<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="小程序知识点总结。">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序">
<meta property="og:url" content="http://example.com/2022/02/18/wx-base-course01/index.html">
<meta property="og:site_name" content="危险">
<meta property="og:description" content="小程序知识点总结。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/resource/images/image-20210407103034181.png">
<meta property="og:image" content="http://example.com/resource/images/image-20210407184426655.png">
<meta property="og:image" content="http://example.com/resource/images/image-20210408111659320.png">
<meta property="og:image" content="http://example.com/resource/images/image-20210408111810145.png">
<meta property="article:published_time" content="2022-02-18T01:48:02.000Z">
<meta property="article:modified_time" content="2022-02-24T16:01:33.067Z">
<meta property="article:author" content="Ifer">
<meta property="article:tag" content="React,Redux,Mobx,Saga,Dva,Umi,AntD,TS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/resource/images/image-20210407103034181.png">

<link rel="canonical" href="http://example.com/2022/02/18/wx-base-course01/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>微信小程序 | 危险</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">危险</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">为之则易，不为则难</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/18/wx-base-course01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/49337922.png">
      <meta itemprop="name" content="Ifer">
      <meta itemprop="description" content="React 全家桶 <span style='position:relative;top:-2px;'>✍</span>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="危险">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          微信小程序
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-18 09:48:02" itemprop="dateCreated datePublished" datetime="2022-02-18T09:48:02+08:00">2022-02-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-02-25 00:01:33" itemprop="dateModified" datetime="2022-02-25T00:01:33+08:00">2022-02-25</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>小程序知识点总结。</p>
<span id="more"></span>

<h2 id="基础掌握"><a href="#基础掌握" class="headerlink" title="基础掌握"></a>基础掌握</h2><h3 id="小程序页面的组成部分"><a href="#小程序页面的组成部分" class="headerlink" title="小程序页面的组成部分"></a>小程序页面的组成部分</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/code.html">文档</a>：<code>index.js</code>、<code>index.json</code>、<code>index.wxml</code>、<code>index.wxss</code></p>
<h3 id="四种-JSON-配置文件"><a href="#四种-JSON-配置文件" class="headerlink" title="四种 JSON 配置文件"></a>四种 JSON 配置文件</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html">文档</a>：<code>app.json</code>、<code>sitemap.json</code>、<code>页面.json</code></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/projectconfig.html">文档</a>：<code>project.config.json</code></p>
<h3 id="小程序的运行环境和通信机制"><a href="#小程序的运行环境和通信机制" class="headerlink" title="小程序的运行环境和通信机制"></a>小程序的运行环境和通信机制</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/framework.html#%E6%B8%B2%E6%9F%93%E5%B1%82%E5%92%8C%E9%80%BB%E8%BE%91%E5%B1%82">文档</a>：微信客户端</p>
<h3 id="常见组件"><a href="#常见组件" class="headerlink" title="常见组件"></a>常见组件</h3><p><code>view</code>、<code>text</code>、<code>rich-text</code>、<code>scroll-view</code>、<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">Swiper</a>、<code>button</code>、<code>image</code>…</p>
<h4 id="text-and-rich-text"><a href="#text-and-rich-text" class="headerlink" title="text and rich-text"></a><strong>text and rich-text</strong></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- selectable is deprecated, use user-select instead --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">selectable</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">nodes</span>=<span class="string">&quot;&lt;h1 class=&#x27;my-h1&#x27; style=&#x27;color: red;&#x27;&gt;Hello World&lt;/h1&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="Swiper-常见属性"><a href="#Swiper-常见属性" class="headerlink" title="Swiper 常见属性"></a><strong>Swiper 常见属性</strong></h4><p>indicator-dots：是否显示面板指示点</p>
<p>indicator-color：指示点颜色</p>
<p>indicator-active-color：激活指示点颜色</p>
<p>autoplay：是否自动切换</p>
<p>interval：自动切换时间间隔</p>
<p><strong>circular：是否采用衔接滑动</strong></p>
<h4 id="Button"><a href="#Button" class="headerlink" title="Button"></a><strong>Button</strong></h4><p>可以通过 open-type 属性可以调用微信提供的各种功能（客服、转发、获取用户授权、获取用户信息等）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;share&quot;</span>&gt;</span>分享<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="image"><a href="#image" class="headerlink" title="image"></a><strong>image</strong></h4><p>scaleToFill：默认，不保持比例，使图片填满 image 元素</p>
<p>aspectFit：保持比例，使图片长边完全展示，image 区域可能有空白</p>
<p>aspectFill：保持比例，图片完全填充 image，可能发生截取</p>
<h3 id="常见-API"><a href="#常见-API" class="headerlink" title="常见 API"></a>常见 API</h3><h4 id="事件监听类"><a href="#事件监听类" class="headerlink" title="事件监听类"></a><strong>事件监听类</strong></h4><p>特点：以 on 开头，用来监听某些事件的触发</p>
<p>举例：<code>wx.onWindowResize(function callback)</code> 监听窗口尺寸变化的事件</p>
<h4 id="同步-API"><a href="#同步-API" class="headerlink" title="同步 API"></a><strong>同步 API</strong></h4><p>特点 1：以 Sync 结尾的 API 都是同步 API</p>
<p>特点 2：同步 API 的执行结果，可以通过函数返回值直接获取，如果执行出错会抛出异常</p>
<p>举例：<code>wx.setStorageSync(&#39;key&#39;, &#39;value&#39;)</code> 向本地存储中写入内容</p>
<h4 id="异步-API"><a href="#异步-API" class="headerlink" title="异步 API"></a><strong>异步 API</strong></h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/api.html#API">文档</a></p>
<p>特点：类似于 jQuery 中的 <code>$.ajax(options)</code> 函数，需要通过 success、fail、complete 接收调用的结果</p>
<p>举例：<code>wx.request()</code> 发起网络数据请求，通过 success 回调函数接收数据</p>
<h3 id="协同工作"><a href="#协同工作" class="headerlink" title="协同工作"></a>协同工作</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/quickstart/release.html#%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C">文档</a></p>
<h2 id="语法入门"><a href="#语法入门" class="headerlink" title="语法入门"></a>语法入门</h2><p>动态绑定数据、三元运算、算数运算、事件绑定</p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/data.html">文档</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 对比和 Vue 的差异 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123; imgSrc &#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">文档</a></p>
<p>e.target：点击谁就是谁</p>
<p>e.currentTarget：谁绑定就是谁</p>
<h3 id="setData-的注意点"><a href="#setData-的注意点" class="headerlink" title="setData 的注意点"></a>setData 的注意点</h3><h4 id="bindtap"><a href="#bindtap" class="headerlink" title="bindtap"></a><strong>bindtap</strong></h4><p><code>setData</code> 函数用于将数据从逻辑层发送到视图层（异步），同时改变对应的 <code>this.data</code> 的值（同步），可以配合事件绑定的参数传递来证明</p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">文档</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span> &#123;&#123;count&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnTapHandler&quot;</span> <span class="attr">data-info</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnTapHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="built_in">this</span>.data.count + <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.data.count) <span class="comment">// 同步</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.target.dataset.info) <span class="comment">// 异步</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="bindinput"><a href="#bindinput" class="headerlink" title="bindinput"></a><strong>bindinput</strong></h4><p>实现双向数据绑定</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注意结束标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span> &#123;&#123;msg&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&quot;&#123;&#123;msg&#125;&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">handleInput</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="attr">msg</span>: e.detail.value</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="wx-if-和-hidden-的差异"><a href="#wx-if-和-hidden-的差异" class="headerlink" title="wx:if 和 hidden 的差异"></a>wx:if 和 hidden 的差异</h4><p>创建和销毁，显示与隐藏</p>
<h4 id="wx-for"><a href="#wx-for" class="headerlink" title="wx:for"></a>wx:for</h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/wxml/list.html">文档</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 默认是 index 和 item --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;arr&#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;idx&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;itemName&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;idx&quot;</span>&gt;</span> &#123;&#123;idx&#125;&#125;: &#123;&#123;itemName&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="wxss"><a href="#wxss" class="headerlink" title="wxss"></a>wxss</h3><p>不同设备屏幕统一等分为 750 份, 1 份就是 1 rpx, 在较小的设备上，1 rpx 所代表的宽度较小，在较大的设备上，1 rpx 所代表的宽度较大，小程序会自动把 rpx 的样式单位换算成对应的像素单位来渲染，从而实现屏幕适配！</p>
<h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;window&quot;</span>:&#123;</span><br><span class="line">    <span class="comment">// 标题文字</span></span><br><span class="line">    <span class="string">&quot;navigationBarTitleText&quot;</span>: <span class="string">&quot;黑马程序员&quot;</span>,</span><br><span class="line">    <span class="comment">// 标题背景色，只支持 16 进制</span></span><br><span class="line">    <span class="string">&quot;navigationBarBackgroundColor&quot;</span>: <span class="string">&quot;#2b4b6b&quot;</span>,</span><br><span class="line">    <span class="comment">// 标题文字颜色，只支持 black 和 white</span></span><br><span class="line">    <span class="string">&quot;navigationBarTextStyle&quot;</span>:<span class="string">&quot;white&quot;</span>,</span><br><span class="line">    <span class="comment">// 开启下拉刷新时 loading 的颜色，支持 dark 和 light</span></span><br><span class="line">    <span class="string">&quot;backgroundTextStyle&quot;</span>:<span class="string">&quot;dark&quot;</span>,</span><br><span class="line">    <span class="comment">// 开启下拉刷新</span></span><br><span class="line">    <span class="string">&quot;enablePullDownRefresh&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// 下拉刷新后看到的背景色</span></span><br><span class="line">    <span class="string">&quot;backgroundColor&quot;</span>: <span class="string">&quot;#efefef&quot;</span>,</span><br><span class="line">    <span class="comment">// 上滑触底的距离，默认 50px</span></span><br><span class="line">    <span class="string">&quot;onReachBottomDistance&quot;</span>: <span class="number">50</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="tabBar"><a href="#tabBar" class="headerlink" title="tabBar"></a>tabBar</h3><img src="/resource/images/image-20210407103034181.png" alt="image-20210407103034181" style="zoom:67%;" />

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">backgroundColor: tabBar 的背景色</span><br><span class="line"></span><br><span class="line">iconPath: 未选中的图片路径</span><br><span class="line"></span><br><span class="line">selectedIconPath: 选中的图片路径</span><br><span class="line"></span><br><span class="line">borderStyle: tabBar 上边框的颜色</span><br><span class="line"></span><br><span class="line">color: 文字颜色</span><br><span class="line"></span><br><span class="line">selectedColor: 选中时的文字颜色</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;tabBar&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;list&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 页面路径，必须在 pages 中预先定义</span></span><br><span class="line">            <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/index/index&quot;</span>,</span><br><span class="line">            <span class="comment">// tab 上显示的文字</span></span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;首页&quot;</span>,</span><br><span class="line">            <span class="comment">// 未选中时的图标路径，当 postion 为 top 时，不显示 icon</span></span><br><span class="line">            <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="comment">// 选中时的图标路径，当 postion 为 top 时，不显示 icon</span></span><br><span class="line">            <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/test/test&quot;</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;测试&quot;</span>,</span><br><span class="line">            <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="页面配置中常用的配置项"><a href="#页面配置中常用的配置项" class="headerlink" title="页面配置中常用的配置项"></a>页面配置中常用的配置项</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/page.html">文档</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">navigationBarBackgroundColor: 导航背景颜色</span><br><span class="line"></span><br><span class="line"><span class="attr">navigationBarTextStyle</span>: 标题颜色</span><br><span class="line"></span><br><span class="line"><span class="attr">navigationBarTitleText</span>: 标题内容</span><br><span class="line"></span><br><span class="line"><span class="attr">backgroundColor</span>: 背景色，即下拉刷新时期望看到的背景色</span><br><span class="line"></span><br><span class="line"><span class="attr">backgroundTextStyle</span>: 下拉 loading 的样式</span><br><span class="line"></span><br><span class="line"><span class="attr">enablePullDownRefresh</span>: 是否开启下拉刷新</span><br><span class="line"></span><br><span class="line"><span class="attr">onReachBottomDistance</span>: 上滑加载距离</span><br></pre></td></tr></table></figure>

<h3 id="网络请求"><a href="#网络请求" class="headerlink" title="网络请求"></a>网络请求</h3><p>两个限制：安全考虑，只能请求 <strong>HTTPS</strong> 类型的接口；必须将接口的域名<strong>添加到信任列表</strong>中，域名只支持 https 协议，不能使用 IP 地址或 localhost，ICP 备案，一个月内最多可申请 5 次修改！</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">onLoad: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/api/get&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">22</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(res)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="本地生活"><a href="#本地生活" class="headerlink" title="本地生活"></a>本地生活</h2><h3 id="初始化项目结构"><a href="#初始化项目结构" class="headerlink" title="初始化项目结构"></a>初始化项目结构</h3><h3 id="配置导航栏效果"><a href="#配置导航栏效果" class="headerlink" title="配置导航栏效果"></a>配置导航栏效果</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;window&quot;</span>:&#123;</span><br><span class="line">        <span class="comment">// 开启下拉刷新时 enablePullDownRefresh，loading 的颜色</span></span><br><span class="line">        <span class="string">&quot;backgroundTextStyle&quot;</span>:<span class="string">&quot;light&quot;</span>,</span><br><span class="line">        <span class="comment">// 导航的背景色</span></span><br><span class="line">        <span class="string">&quot;navigationBarBackgroundColor&quot;</span>: <span class="string">&quot;#2b4b6b&quot;</span>,</span><br><span class="line">        <span class="comment">// 导航的文本</span></span><br><span class="line">        <span class="string">&quot;navigationBarTitleText&quot;</span>: <span class="string">&quot;本地生活&quot;</span>,</span><br><span class="line">        <span class="comment">// 导航的文本颜色</span></span><br><span class="line">        <span class="string">&quot;navigationBarTextStyle&quot;</span>:<span class="string">&quot;white&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="配置-TabBar-效果"><a href="#配置-TabBar-效果" class="headerlink" title="配置 TabBar 效果"></a>配置 TabBar 效果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;tabBar&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;list&quot;</span>: [&#123;</span><br><span class="line">            <span class="comment">// TabBar 对应的页面路径</span></span><br><span class="line">            <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/home/home&quot;</span>,</span><br><span class="line">            <span class="comment">// TabBar 文本</span></span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;首页&quot;</span>,</span><br><span class="line">            <span class="comment">// TabBar 图标</span></span><br><span class="line">            <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;/images/tabs/home.png&quot;</span>,</span><br><span class="line">            <span class="comment">// TabBar 选中的图标</span></span><br><span class="line">            <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;/images/tabs/home-active.png&quot;</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/message/message&quot;</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;消息&quot;</span>,</span><br><span class="line">            <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;/images/tabs/message.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;/images/tabs/message-active.png&quot;</span></span><br><span class="line">        &#125;,&#123;</span><br><span class="line">            <span class="string">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/contact/contact&quot;</span>,</span><br><span class="line">            <span class="string">&quot;text&quot;</span>: <span class="string">&quot;联系我们&quot;</span>,</span><br><span class="line">            <span class="string">&quot;iconPath&quot;</span>: <span class="string">&quot;/images/tabs/contact.png&quot;</span>,</span><br><span class="line">            <span class="string">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;/images/tabs/contact-active.png&quot;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="获取轮播图的数据"><a href="#获取轮播图的数据" class="headerlink" title="获取轮播图的数据"></a>获取轮播图的数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">swiperList</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.getSwiperList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getSwiperList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/slides&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                    <span class="attr">swiperList</span>: res.data,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="渲染轮播图的效果"><a href="#渲染轮播图的效果" class="headerlink" title="渲染轮播图的效果"></a>渲染轮播图的效果</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">indicator-dots</span> <span class="attr">circular</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;swiperList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.image&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">swiper &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">350</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">swiper image &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="获取九宫格的数据"><a href="#获取九宫格的数据" class="headerlink" title="获取九宫格的数据"></a>获取九宫格的数据</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">gridList</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.getGridList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getGridList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/categories&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                    <span class="attr">gridList</span>: res.data,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="渲染九宫格的效果"><a href="#渲染九宫格的效果" class="headerlink" title="渲染九宫格的效果"></a>渲染九宫格的效果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;view <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;grid-list&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;grid-item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;gridList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.icon&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.grid-list</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grid-item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">33.33%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 小技巧 */</span></span><br><span class="line"><span class="selector-class">.grid-item</span><span class="selector-pseudo">:not</span>(<span class="selector-pseudo">:nth-child</span>(<span class="number">3</span>n)) &#123;</span><br><span class="line">    <span class="attribute">border-right</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grid-item</span> image &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.grid-item</span> text &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">10</span>rpx;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="首页底部图片效果"><a href="#首页底部图片效果" class="headerlink" title="首页底部图片效果"></a>首页底部图片效果</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;img-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/link-01.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/images/link-02.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.img-box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">10</span>rpx;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.img-box</span> image &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">45%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="视图与逻辑"><a href="#视图与逻辑" class="headerlink" title="视图与逻辑"></a>视图与逻辑</h2><h3 id="页面导航"><a href="#页面导航" class="headerlink" title="页面导航"></a>页面导航</h3><h4 id="声明式导航"><a href="#声明式导航" class="headerlink" title="声明式导航"></a>声明式导航</h4><p>概念：通过点击 <code>&lt;navigator&gt;</code> 组件实现页面跳转</p>
<p><font color='red'>如何跳转到 tabBar 页面？</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 需要指定 url 和 open-type 属性 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/message/message&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;switchTab&quot;</span>&gt;</span>导航到消息页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color='red'>如何跳转到非 tabBar 页面？</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- open-type 可以省略，默认就是 navigate --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/info/info&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;navigate&quot;</span>&gt;</span>跳转到info页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color='red'>如何后退？</font></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- open-type 必须为 navigateBack，delta 表示后退的层级默认是 1 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">open-type</span>=<span class="string">&quot;navigateBack&quot;</span> <span class="attr">delta</span>=<span class="string">&quot;1&quot;</span>&gt;</span>后退<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h4><p>概念：通过调用小程序的导航 API 实现跳转</p>
<p><font color='red'>如何跳转到 tabBar 页面？</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wx.switchTab(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/message/message&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">success</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">fail</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><font color='red'>如何跳转到非 tabBar 页面？</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.navigateTo(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/info/info&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><font color='red'>如何后退？</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wx.navigateBack(&#123;</span><br><span class="line">    <span class="attr">delta</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="function"><span class="title">success</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">fail</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="导航传参"><a href="#导航传参" class="headerlink" title="导航传参"></a>导航传参</h4><p><strong>a.</strong> 声明式导航传参</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/info/info?name=zs&amp;age=20&quot;</span>&gt;</span>跳转至info页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>b.</strong> 编程式导航传参</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.navigateTo(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/pages/info/info?name=李&amp;gender=男&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>c.</strong> onLoad 中接收参数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 一般会存储到 data 中</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新"><a href="#下拉刷新" class="headerlink" title="下拉刷新"></a>下拉刷新</h3><h4 id="开启的两种方式"><a href="#开启的两种方式" class="headerlink" title="开启的两种方式"></a>开启的两种方式</h4><p>全局或局部</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.json 或 页面.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">enablePullDownRefresh</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置下拉刷新的样式"><a href="#配置下拉刷新的样式" class="headerlink" title="配置下拉刷新的样式"></a>配置下拉刷新的样式</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">backgroundColor</span>: <span class="string">&#x27;#fefefe&#x27;</span>, <span class="comment">// 用来配置下拉刷新窗口的背景颜色，仅支持16 进制的颜色值</span></span><br><span class="line">    <span class="attr">backgroundTextStyle</span>: <span class="string">&#x27;dark&#x27;</span> <span class="comment">// 用来配置下拉刷新 loading 的样式，仅支持 dark 和 light</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="监听下拉刷新的事件"><a href="#监听下拉刷新的事件" class="headerlink" title="监听下拉刷新的事件"></a>监听下拉刷新的事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面.js</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">onPullDownRefresh</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 触发了下拉刷新事件就会立即调用该方法</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;触发了下拉刷新&quot;</span>);</span><br><span class="line">        <span class="comment">// 触发了下拉刷洗就将 data 中的 count 重置为 0</span></span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">            <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="停止下拉刷新的效果"><a href="#停止下拉刷新的效果" class="headerlink" title="停止下拉刷新的效果"></a>停止下拉刷新的效果</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">onPullDownRefresh</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                    <span class="attr">XXX</span>: res.data</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="comment">// 数值处理完毕，就可以关闭下拉刷新的事件了</span></span><br><span class="line">                wx.stopPullDownRefresh()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="上拉触底"><a href="#上拉触底" class="headerlink" title="上拉触底"></a>上拉触底</h3><h4 id="监听上拉触底事件"><a href="#监听上拉触底事件" class="headerlink" title="监听上拉触底事件"></a>监听上拉触底事件</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            上拉触底事件不需要开启，直接监听就可以</span></span><br><span class="line"><span class="comment">            在全局配置的 window节 点中或者页面的配置文件中可设置触底距离，默认 50px，&quot;onReachBottomDistance&quot;: 50</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;触发了上拉触底事件&quot;</span>);</span><br><span class="line">        <span class="comment">/* 在上拉触底事件中，需要做节流处理，防止频繁触发该事件导致频繁发起请求 */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="上拉触底案例"><a href="#上拉触底案例" class="headerlink" title="上拉触底案例"></a>上拉触底案例</h4><p><strong>①</strong> 定义获取随机颜色的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">colorList</span>: [],</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getColors</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/api/color&#x27;</span>,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">&#123; data: res &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(res)</span><br><span class="line">                <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                    <span class="attr">colorList</span>: [...this.data.colorList, ...res.data],</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>②</strong> 在页面加载时获取初始数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.getColors()</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>③</strong> 渲染 UI 结构并美化页面效果</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;colorList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">class</span>=<span class="string">&quot;num-item&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: rgba(&#123;&#123;item&#125;&#125;);&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.num-item</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15</span>rpx;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">0</span>rpx <span class="number">0</span>rpx <span class="number">5</span>rpx <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1</span>rpx <span class="number">1</span>rpx <span class="number">5</span>rpx <span class="number">#efefef</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>④</strong> 在上拉触底时调用获取随机颜色的方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 在真实的项目中，我们请求数据一定是下一页数据，因此需要再 data 中存储一个当前页码的数据，在触发上拉触底事件时，将代表页码的数据对象+1，然后再去调用获取数据的方法</span></span><br><span class="line">        <span class="built_in">this</span>.getColors();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>⑤</strong> 添加 loading 提示效果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">getColors () &#123;</span><br><span class="line">    <span class="comment">// 1. 展示loading效果</span></span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;数据加载中...&#x27;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 2. 发起网络请求</span></span><br><span class="line">    wx.request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/api/color&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">        <span class="attr">success</span>: <span class="function">(<span class="params">&#123;data: res&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">colorList</span>: [...this.data.colorList, ...res.data]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 无论成功与否都会调用该方法</span></span><br><span class="line">        <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 3. 隐藏loading效果</span></span><br><span class="line">            wx.hideLoading();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>⑥</strong> 对上拉触底进行节流处理</p>
<p><font color="red">a.</font> 在 data 中定义 isLoading 节流阀</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// false 表示当前没有进行任何数据请求，true 表示当前正在进行数据请求</span></span><br><span class="line">        <span class="comment">// 0. 定义一个变量</span></span><br><span class="line">        <span class="attr">isLoading</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color="red">b.</font> 在 getColors() 方法中修改 isloading 节流阀的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在刚调用 getColors 时将节流阀设置 true，在网络请求的 complete 回调函数中，将节流阀重置为 false</span></span><br><span class="line">getColors () &#123;</span><br><span class="line">    <span class="comment">// 1. 开启节流阀</span></span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="attr">isLoading</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">        <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 3. 关闭节流阀</span></span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">isLoading</span>: <span class="literal">false</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><font color="red">c.</font> 在 onReachBottom 中判断节流阀的值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果节流阀的值为 true ，则阻止当前请求，如果节流阀的值为 false ，则发起数据请求</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 2</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.data.isLoading) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.getColors();</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="应用和页面生命周期"><a href="#应用和页面生命周期" class="headerlink" title="应用和页面生命周期"></a>应用和页面生命周期</h3><h4 id="应用生命周期"><a href="#应用生命周期" class="headerlink" title="应用生命周期"></a>应用生命周期</h4><p>特指小程序从启动 -&gt; 运行 -&gt; 销毁的过程</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）</span></span><br><span class="line">    <span class="attr">onLaunch</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="comment">// 当小程序启动，或从后台进入前台显示，会触发 onShow</span></span><br><span class="line">    <span class="attr">onShow</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="comment">// 当小程序从前台进入后台，会触发 onHide</span></span><br><span class="line">    <span class="attr">onHide</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h4><p>特指小程序中，每个页面的加载 -&gt; 渲染 -&gt; 销毁的过程</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 监听页面加载，一个页面只调用一次</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="comment">// 监听页面初次渲染完成，一个页面只调用一次</span></span><br><span class="line">    <span class="attr">onReady</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="comment">// 监听页面显示</span></span><br><span class="line">    <span class="attr">onShow</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="comment">// 监听页面隐藏</span></span><br><span class="line">    <span class="attr">onHide</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="comment">// 监听页面卸载，一个页面只调用一次</span></span><br><span class="line">    <span class="attr">onUnload</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="WXS-脚本"><a href="#WXS-脚本" class="headerlink" title="WXS 脚本"></a>WXS 脚本</h3><p>wxml 中无法调用在页面的 .js 中定义的函数（除了事件绑定），但是可以调用 wxs 中定义的函数，小程序中 wxs 的典型应用场景就是“过滤器”</p>
<h4 id="内嵌-wxs-脚本"><a href="#内嵌-wxs-脚本" class="headerlink" title="内嵌 wxs 脚本"></a>内嵌 wxs 脚本</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义一个文本，调用 wxs 中的方法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; m1.toUpper(username) &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 定义一个 wxs 的标签，并指定 module 模块名称 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">module</span>=<span class="string">&quot;m1&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 向外暴露一个方法 --&gt;</span></span><br><span class="line">    module.exports.toUpper = function(str) &#123; return str.toUpperCase() &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="外联-wxs-脚本"><a href="#外联-wxs-脚本" class="headerlink" title="外联 wxs 脚本"></a>外联 wxs 脚本</h4><p>定义</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// tools.wxs</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toLower</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> str.toLowerCase()</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">toLower</span>: toLower,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 注意：src 使用相对路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">module</span>=<span class="string">&quot;m2&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../../utils/tools.wxs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123; m2.toLower(country) &#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="wxs-的四个特点"><a href="#wxs-的四个特点" class="headerlink" title="wxs 的四个特点"></a>wxs 的四个特点</h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxs/">了解</a></p>
<h2 id="列表页面开发"><a href="#列表页面开发" class="headerlink" title="列表页面开发"></a>列表页面开发</h2><h3 id="页面导航传参"><a href="#页面导航传参" class="headerlink" title="页面导航传参"></a>页面导航传参</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;grid-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;grid-item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;gridList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span> <span class="attr">url</span>=<span class="string">&quot;/pages/shoplist/shoplist?id=&#123;&#123;item.id&#125;&#125;&amp;title=&#123;&#123;item.name&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.icon&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="动态设置商铺列表页面的标题内容"><a href="#动态设置商铺列表页面的标题内容" class="headerlink" title="动态设置商铺列表页面的标题内容"></a>动态设置商铺列表页面的标题内容</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">文档</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">query</span>: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">            <span class="attr">query</span>: options</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onReady</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        wx.setNavigationBarTitle(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="built_in">this</span>.data.query.title,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="定义-getShopList-方法获取商品列表"><a href="#定义-getShopList-方法获取商品列表" class="headerlink" title="定义 getShopList 方法获取商品列表"></a>定义 getShopList 方法获取商品列表</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">query</span>: &#123;&#125;,</span><br><span class="line">        <span class="attr">shopList</span>: [],</span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">pageSize</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.setData(&#123; <span class="attr">query</span>: options &#125;)</span><br><span class="line">        <span class="built_in">this</span>.getShopList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getShopList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">`https://www.escook.cn/categories/<span class="subst">$&#123;<span class="built_in">this</span>.data.query.id&#125;</span>/shops`</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">_page</span>: <span class="built_in">this</span>.data.page,</span><br><span class="line">                <span class="attr">_limit</span>: <span class="built_in">this</span>.data.pageSize,</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                    <span class="attr">shopList</span>: [...this.data.shopList, ...res.data],</span><br><span class="line">                    <span class="attr">total</span>: res.header[<span class="string">&#x27;X-Total-Count&#x27;</span>] - <span class="number">0</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="渲染商铺列表的-UI-结构和样式"><a href="#渲染商铺列表的-UI-结构和样式" class="headerlink" title="渲染商铺列表的 UI 结构和样式"></a>渲染商铺列表的 UI 结构和样式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;shop-item&quot;</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;shopList&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;id&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;thumb&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.images[0]&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;shop-title&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>电话：&#123;&#123;item.phone&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>地址：&#123;&#123;item.address&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>营业时间：&#123;&#123;item.businessHours&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.shop-item</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15</span>rpx;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">15</span>rpx;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8</span>rpx;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">1</span>rpx <span class="number">1</span>rpx <span class="number">15</span>rpx <span class="number">#ddd</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.thumb</span> image &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">250</span>rpx;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">250</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">15</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.info</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.shop-title</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="展示-loading-效果"><a href="#展示-loading-效果" class="headerlink" title="展示 loading 效果"></a>展示 loading 效果</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="function"><span class="title">getShopList</span>(<span class="params">cb</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// #1</span></span><br><span class="line">        wx.showLoading(&#123;</span><br><span class="line">            <span class="attr">title</span>: <span class="string">&#x27;数据加载中...&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// #2</span></span><br><span class="line">                wx.hideLoading()</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="上拉触底时请求下一页数据"><a href="#上拉触底时请求下一页数据" class="headerlink" title="上拉触底时请求下一页数据"></a>上拉触底时请求下一页数据</h3><p>配置下拉触底的距离</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;onReachBottomDistance&quot;</span>: <span class="number">200</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>监听 onReachBottom 事件并请求下一页数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">            <span class="attr">page</span>: <span class="built_in">this</span>.data.page + <span class="number">1</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="built_in">this</span>.getShopList()</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="上拉触底请求数据节流处理"><a href="#上拉触底请求数据节流处理" class="headerlink" title="上拉触底请求数据节流处理"></a>上拉触底请求数据节流处理</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// #1</span></span><br><span class="line">        <span class="attr">isLoading</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.getShopList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">getShopList</span>(<span class="params">cb</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// #2</span></span><br><span class="line">        <span class="built_in">this</span>.setData(&#123; <span class="attr">isLoading</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">        wx.request(&#123;</span><br><span class="line">            <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// #4</span></span><br><span class="line">                <span class="built_in">this</span>.setData(&#123; <span class="attr">isLoading</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">                cb &amp;&amp; cb()</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// #3</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.data.isLoading) <span class="keyword">return</span></span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">            <span class="attr">page</span>: <span class="built_in">this</span>.data.page + <span class="number">1</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="built_in">this</span>.getShopList()</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="解决没有数据时还发起请求的问题"><a href="#解决没有数据时还发起请求的问题" class="headerlink" title="解决没有数据时还发起请求的问题"></a>解决没有数据时还发起请求的问题</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 当前页 * 每页条数 &gt;= 总条数，证明没有下一页数据了</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.data.page * <span class="built_in">this</span>.data.pageSize &gt;= <span class="built_in">this</span>.data.total) &#123;</span><br><span class="line">            <span class="keyword">return</span> wx.showToast(&#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">&#x27;数据加载完毕！&#x27;</span>,</span><br><span class="line">                <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新效果"><a href="#下拉刷新效果" class="headerlink" title="下拉刷新效果"></a>下拉刷新效果</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;enablePullDownRefresh&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">onPullDownRefresh</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 重置数据</span></span><br><span class="line">        <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">            <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">shopList</span>: [],</span><br><span class="line">            <span class="attr">total</span>: <span class="number">0</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 重新发起请求</span></span><br><span class="line">        <span class="built_in">this</span>.getShopList(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            wx.stopPullDownRefresh()</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="wxs-处理手机号"><a href="#wxs-处理手机号" class="headerlink" title="wxs 处理手机号"></a>wxs 处理手机号</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>电话：&#123;&#123;tools.splitPhone(item.phone)&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">wxs</span> <span class="attr">src</span>=<span class="string">&quot;../../utils/tools.wxs&quot;</span> <span class="attr">module</span>=<span class="string">&quot;tools&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">wxs</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">splitPhone</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!str) <span class="keyword">return</span> <span class="string">&#x27;暂无&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> (str.length !== <span class="number">11</span>) <span class="keyword">return</span> str</span><br><span class="line">    <span class="keyword">var</span> arr = str.split(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    arr.splice(<span class="number">3</span>, <span class="number">0</span>, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">    arr.splice(<span class="number">8</span>, <span class="number">0</span>, <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> arr.join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">splitPhone</span>: splitPhone,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="关于组件"><a href="#关于组件" class="headerlink" title="关于组件"></a>关于组件</h2><h3 id="组件引用的方式"><a href="#组件引用的方式" class="headerlink" title="组件引用的方式"></a>组件引用的方式</h3><p>局部引用：组件只能在当前被引用的页面内使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;my-test1&quot;</span>: <span class="string">&quot;/components/test/test&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全局引用：组件可以在每个小程序页面中使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;my-test2&quot;</span>: <span class="string">&quot;/components/test2/test2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="组件和页面的区别"><a href="#组件和页面的区别" class="headerlink" title="组件和页面的区别"></a>组件和页面的区别</h3><p>a, 组件的 .json 文件中需要声明 <code>&quot;component&quot;: true</code> 属性</p>
<p>b, 程序启动调用的是 <code>App()</code>，页面的渲染调用的是 <code>Page()</code>，组件的渲染调用的是 <code>Component()</code></p>
<p>c, 组件的事件处理函数需要定义到 methods 节点中</p>
<h3 id="组件样式的隔离性"><a href="#组件样式的隔离性" class="headerlink" title="组件样式的隔离性"></a>组件样式的隔离性</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html">文档链接</a></p>
<p>a, 默认情况下，自定义组件的样式只对当前组件生效！</p>
<p>b, 组件 A 的样式不会影响组件 B 的样式，也不会影响页面的样式，页面的样式也不会影响组件 A 和 B 的样式</p>
<p>c, 注意：<font color="red">class 和 id 选择器会有样式隔离效果</font>，标签选择器不受样式隔离的影响</p>
<h3 id="修改组件样式的隔离性"><a href="#修改组件样式的隔离性" class="headerlink" title="修改组件样式的隔离性"></a>修改组件样式的隔离性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="comment">// 默认值 isolated：代表启动样式隔离</span></span><br><span class="line">        <span class="comment">// apply-shared：代表页面 wxss 样式将影响自定义组件</span></span><br><span class="line">        <span class="comment">// shared：代表双向的影响</span></span><br><span class="line">        <span class="attr">styleIsolation</span>: <span class="string">&#x27;isolated&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 或在组件的.json 文件中新增加如下配置</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;styleIsolation&quot;</span>: <span class="string">&quot;isolated&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="组件的数据、方法和属性"><a href="#组件的数据、方法和属性" class="headerlink" title="组件的数据、方法和属性"></a>组件的数据、方法和属性</h3><p>数据还是放到 data 中，方法和事件统一放到 methods 中，属性放到 properties 中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Components(&#123;</span><br><span class="line">    <span class="comment">// 属性定义</span></span><br><span class="line">    <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="comment">// 完整定义属性的方式【当需要指定属性默认值时，建议使用此方式】</span></span><br><span class="line">        <span class="attr">max</span>: &#123;</span><br><span class="line">            <span class="comment">// 属性值的数据类型</span></span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Number</span>,</span><br><span class="line">            <span class="comment">// 属性值的默认值</span></span><br><span class="line">            <span class="attr">value</span>: <span class="number">10</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 简化定义属性的方式</span></span><br><span class="line">        <span class="comment">// max: Number</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="data-和-properties-的区别"><a href="#data-和-properties-的区别" class="headerlink" title="data 和 properties 的区别"></a>data 和 properties 的区别</h3><p>两者相等，本质上是一样的，可读可写！</p>
<p>data 更倾向于存储组件的私有数据，properties 更倾向于存储外界传递到组件中的数据！</p>
<p>不太建议修改 properties 数据，如果要修改 properties 的数据，最好通过子组件通信给父组件的方式实现！</p>
<h3 id="数据监听器"><a href="#数据监听器" class="headerlink" title="数据监听器"></a>数据监听器</h3><p><font color="red">监听普通值</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Components(&#123;</span><br><span class="line">    <span class="comment">// observers: 观察者</span></span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;字段A，字段B&#x27;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">字段A的新值， 字段B的新值</span>) </span>&#123;&#125;</span><br><span class="line">        <span class="comment">// do something</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><font color="red">监听对象</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Components(&#123;</span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;对象.属性A， 对象.属性B&#x27;</span>: <span class="function"><span class="keyword">function</span>(<span class="params">属性A的新值， 属性B的新值</span>) </span>&#123;&#125;</span><br><span class="line">        <span class="comment">// 触发此侦听器的 3 种情况：</span></span><br><span class="line">        <span class="comment">// 【为属性 A 赋值】：使用 setData 设置 this.data.对象.属性A 时触发</span></span><br><span class="line">        <span class="comment">// 【为属性 B 赋值】：使用 setData 设置 this.data.对象.属性B 时触发</span></span><br><span class="line">        <span class="comment">// 【为对象赋值】：使用 setData 设置 this.data.对象 时触发</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><font color="red">使用通配符</font></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;对象.**&#x27;</span>: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">fullColor</span>: <span class="string">`<span class="subst">$&#123;obj.r&#125;</span>, <span class="subst">$&#123;obj.g&#125;</span>, <span class="subst">$&#123;obj.b&#125;</span>`</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="纯数据字段"><a href="#纯数据字段" class="headerlink" title="纯数据字段"></a>纯数据字段</h3><p>概念：纯数据字段指的是那些不用于界面渲染的 data 字段</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="comment">// 指定所有 _ 开头的数据字段为纯数据字段</span></span><br><span class="line">        <span class="attr">pureDataPattern</span>: <span class="regexp">/^_/</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">_rgb</span>: &#123;</span><br><span class="line">            <span class="attr">r</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">g</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">b</span>: <span class="number">0</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">fullColor</span>: <span class="string">&#x27;0, 0, 0&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;_rgb.**&#x27;</span>: <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">fullColor</span>: <span class="string">`<span class="subst">$&#123;obj.r&#125;</span>, <span class="subst">$&#123;obj.g&#125;</span>, <span class="subst">$&#123;obj.b&#125;</span>`</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="组件生命周期"><a href="#组件生命周期" class="headerlink" title="组件生命周期"></a>组件生命周期</h3><h4 id="自身的什么生命周期"><a href="#自身的什么生命周期" class="headerlink" title="自身的什么生命周期"></a>自身的什么生命周期</h4><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html">参考文档</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="comment">// 推荐用法</span></span><br><span class="line">    <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">attached</span>(<span class="params"></span>)</span> &#123;&#125;, <span class="comment">// 在组件实例进入页面节点树时执行</span></span><br><span class="line">        <span class="function"><span class="title">detached</span>(<span class="params"></span>)</span> &#123;&#125;, <span class="comment">// 在组建实例被从页面节点树移除时执行</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>① created</p>
<p><font color="red">组件实例刚被创建好的时候</font>，created 生命周期函数会被触发；此时调用 setData 不会有效果；通常用于给组件的 this 添加一些自定义的属性字段；</p>
<p>② attached</p>
<p><font color="red">在组件完全初始化完毕、进入页面节点树后</font>，attached 生命周期函数会被触发；此时， this.data 已被初始化完毕；大多数初始化工作可以在这个时机进行（例如发请求获取初始数据）；</p>
<p>③ detached</p>
<p><font color="red">在组件离开页面节点树后</font>，detached 生命周期函数会被触发；退出一个页面时，会触发页面内每个自定义组件的 detached 生命周期函数；此时适合做一些清理性质的工作，例如清除定时器；</p>
<p>④ ready</p>
<p><font color="red">布局完成后执行，可以操作页面</font></p>
<h4 id="6-9-2-所在页面的生命周期"><a href="#6-9-2-所在页面的生命周期" class="headerlink" title="6.9.2 所在页面的生命周期"></a>6.9.2 所在页面的生命周期</h4><p>有时，自定义组件的行为依赖于页面状态的变化，此时就需要用到组件所在页面的生命周期！</p>
<p>通俗的理解：相当于在组件中, 监听了组件所在页面的一些事件。</p>
<p>例如每当触发页面的 show 生命周期函数的时候，我们希望能够重新生成一个随机的 RGB 颜色值。</p>
<p><img src="/resource/images/image-20210407184426655.png" alt="image-20210407184426655"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="comment">// 在组件的 methods 节点中，定义一个随机颜色的方法</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">_randomColor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// 设置 data 中的数据</span></span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">_rgb</span>: &#123;</span><br><span class="line">                    <span class="attr">r</span>: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">256</span>),</span><br><span class="line">                    <span class="attr">g</span>: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">256</span>),</span><br><span class="line">                    <span class="attr">b</span>: <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">256</span>),</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 在组件内部的 pageLifetimes 节点中，监听组件在页面的生命周期函数</span></span><br><span class="line">    <span class="attr">pageLifetimes</span>: &#123;</span><br><span class="line">        <span class="comment">// 在页面被展示的时候，调用该方法</span></span><br><span class="line">        <span class="function"><span class="title">show</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>._randomColor()</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">hide</span>(<span class="params"></span>)</span> &#123;&#125;, <span class="comment">// 页面被隐藏</span></span><br><span class="line">        <span class="function"><span class="title">resize</span>(<span class="params"></span>)</span> &#123;&#125;, <span class="comment">// 页面尺寸变化</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="关于插槽"><a href="#关于插槽" class="headerlink" title="关于插槽"></a>关于插槽</h3><p><font color="red">子挖坑，父（使用的地方）填坑！</font></p>
<h4 id="单插槽"><a href="#单插槽" class="headerlink" title="单插槽"></a>单插槽</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 封装 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是组件的内部节点<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 对于不确定的内容，可以使用 &lt;slot&gt; 进行占位，具体内容由组件的使用者决定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这部分内容将被放置在组件的 &lt;slot&gt; 的位置上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这里是插入到组件slot中的内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="多插槽"><a href="#多插槽" class="headerlink" title="多插槽"></a>多插槽</h4><p>a, 先开启</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">multipleSolts</span>: <span class="literal">true</span>, <span class="comment">// 在组件定义时的选项中启用多 slot 支持</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>b, 再定义（挖）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name 为 before 的第一个插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;before&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span>这是一段固定的文本内容<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- name 为 after 的第一个插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;after&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>c, 最后使用（填）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件的使用者 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 这部分内容将被放置在组件的 &lt;slot&gt; 的位置上 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;before&quot;</span>&gt;</span>这是通过插槽填充的内容，name 为 before<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">slot</span>=<span class="string">&quot;after&quot;</span>&gt;</span>这是通过插槽填充的内容，name 为 after<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h3><h4 id="属性绑定"><a href="#属性绑定" class="headerlink" title="属性绑定"></a>属性绑定</h4><p>父传子，仅能设置 JSON 兼容的数据（只能传递数据，不能传递方法）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 父传递 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-test</span> <span class="attr">count</span>=<span class="string">&quot;&#123;&#123;count&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子接收</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">properties</span>: &#123;</span><br><span class="line">        <span class="attr">count</span>: <span class="built_in">Number</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="事件绑定-1"><a href="#事件绑定-1" class="headerlink" title="事件绑定"></a>事件绑定</h4><p>子传父，可以传递任意数据（包括数据和方法）</p>
<p><strong>a,</strong> 在 <code>子组件.js</code> 中，在特定的时机通过调用 <code>this.triggerEvent</code> 产生一个自定义事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">addCount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// 【注意】这个操作并不会同步到父组件</span></span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="attr">count</span>: <span class="built_in">this</span>.properties.count + <span class="number">1</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// 使用 this.triggerEvent 去触发父组件的自定义事件，并将数值同步给父组件</span></span><br><span class="line">            <span class="built_in">this</span>.tiggerEvent(<span class="string">&#x27;sync&#x27;</span>, &#123; <span class="attr">value</span>: <span class="built_in">this</span>.properties.count &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>b,</strong> 在父组件的 wxml 中的子组件标签中，使用 ==bind:自定义事件名称=“事件处理函数”== 监听 自定义事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test</span> <span class="attr">bind:sync</span>=<span class="string">&quot;syncCount&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>c,</strong> 在 <code>父组件js</code> 中，通过 <code>e.detail</code> 获取到子组件传递过来的数据</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">syncCount (e) &#123;</span><br><span class="line">    <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">        <span class="comment">// 父组件通过事件对象 e 获取到子组件传递的值</span></span><br><span class="line">        <span class="attr">count</span>: e.detail.value</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="获取实例"><a href="#获取实例" class="headerlink" title="获取实例"></a>获取实例</h4><p>父页面可以通过 <code>this.selectComponent(id 或 class 选择器)</code> 获取子组件实例对象，这样就可以直接访问子组件的任意数据和方法</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">my-test</span> <span class="attr">class</span>=<span class="string">&quot;cusstomA&quot;</span> <span class="attr">id</span>=<span class="string">&quot;cA&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-test</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;getChild&quot;</span>&gt;</span>获取子组件实例<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="title">getChild</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> child = <span class="built_in">this</span>.selectComponent(<span class="string">&#x27;.customA&#x27;</span>);</span><br><span class="line">        <span class="comment">// 可以调用子组件的 setData 方法修改数据</span></span><br><span class="line">        child.setData(&#123; <span class="attr">count</span>: child.data.count + <span class="number">1</span> &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 也可以调用子组件的普通方法</span></span><br><span class="line">        <span class="comment">// child.addCount();</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="behaviors"><a href="#behaviors" class="headerlink" title="behaviors"></a>behaviors</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/behaviors.html">指南</a>，<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Behavior.html">框架</a></p>
<p><strong>概念</strong></p>
<p>behaviors 是小程序中，用于实现组件间代码共享的特性，类似于 Vue 中的 mixins</p>
<p><strong>工作方式</strong></p>
<p>每个 behaviors 可以包含一组属性、数据、生命周期函数和方法。组件引用它时，它的属性、数据和方法会被合并到组件中。每个组件可以引用多个 behaviors，behaviors 也可以引用其它 behaviors</p>
<p><strong>基本使用</strong></p>
<p><strong>a,</strong> 创建文件夹 behaviors，新建 <code>my-behavior.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 调用 Behavior() 方法，创建实例对象并导出</span></span><br><span class="line"><span class="built_in">module</span>.exports = Behavior(&#123;</span><br><span class="line">    <span class="comment">// 属性节点</span></span><br><span class="line">    <span class="attr">properties</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 私有数据节点</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 事件处理函数和自定义方法节点</span></span><br><span class="line">    <span class="attr">methods</span>: &#123;&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>b,</strong> <code>组件.js</code> 中导入并使用 behavior</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myBehavior = <span class="built_in">require</span>(<span class="string">&#x27;../../behaviors/my-behavior&#x27;</span>)</span><br><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">behaviors</span>: [myBehavior],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>在组件中共享的behavior是：&#123;&#123;username&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用-NPM"><a href="#使用-NPM" class="headerlink" title="使用 NPM"></a>使用 NPM</h2><h3 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h3><p>① 不支持依赖于 Node.js 内置库的包</p>
<p>② 不支持依赖于浏览器内置对象的包</p>
<p>③ 不支持依赖于 C++ 插件的包</p>
<h3 id="Vant-Weapp"><a href="#Vant-Weapp" class="headerlink" title="Vant Weapp"></a>Vant Weapp</h3><p><strong>a,</strong> 初始化 <code>package.json</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<p><strong>b,</strong> 安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @vant/weapp@1.3.3</span><br></pre></td></tr></table></figure>

<p><strong>c,</strong> 构建 npm 并使用 npm 模块</p>
<p><strong>d,</strong> 去除 app.json 配置项中的 <code>stylev2</code></p>
<p><strong>e,</strong> 全局注册组件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;van-button&quot;</span>: <span class="string">&quot;@vant/weapp/button/index&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>f,</strong> 使用组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>g,</strong> 定制主题</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties">CSS 变量</a>，<a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp/blob/dev/packages/common/style/var.less">Vant 变量</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* app.wxss */</span></span><br><span class="line">page &#123;</span><br><span class="line">    --button-danger-background-color: #c00000;</span><br><span class="line">    --button-danger-border-color: #d60000;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="API-Promise-化"><a href="#API-Promise-化" class="headerlink" title="API Promise 化"></a>API Promise 化</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/extended/utils/api-promise.html">参考文档</a></p>
<p><strong>a,</strong> 安装</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install miniprogram-api-promise</span><br></pre></td></tr></table></figure>

<p><strong>b,</strong> 构建并使用 npm 模块</p>
<p>构建前记得删除 <code>miniprogram_npm</code> 目录</p>
<p><strong>c,</strong> 配置</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; promisifyAll &#125; <span class="keyword">from</span> <span class="string">&#x27;miniprogram-api-promise&#x27;</span></span><br><span class="line">wx.p = &#123;&#125;</span><br><span class="line"><span class="comment">// 把 wx 上的所有回调函数的 API 变成支持 Promise 形式的 api，并挂载到 wx.p 上</span></span><br><span class="line"><span class="comment">// wx.request(&#123; success: (res) =&gt; &#123;&#125; &#125;)</span></span><br><span class="line"><span class="comment">// const res = await wx.p.request()</span></span><br><span class="line">promisifyAll(wx, wx.p)</span><br></pre></td></tr></table></figure>

<p><strong>d,</strong> 使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line">wx.p</span><br><span class="line">    .request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://www.escook.cn/api/get&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">    .then(<span class="function">(<span class="params">r</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(r)</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="全局数据共享"><a href="#全局数据共享" class="headerlink" title="全局数据共享"></a>全局数据共享</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/extended/utils/mobx.html">文档</a>，<code>mobx-miniprogram</code> 用来创建 Store 实例对象，<code>mobx-miniprogram-bindings</code> 用来把 Store 中的共享数据或方法，绑定到组件或页面中使用</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mobx-miniprogram@4.13.2 mobx-miniprogram-bindings@1.2.1</span><br></pre></td></tr></table></figure>

<h3 id="创建-store-实例"><a href="#创建-store-实例" class="headerlink" title="创建 store 实例"></a>创建 store 实例</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/store.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; observable, action &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = observable(&#123;</span><br><span class="line">    <span class="attr">numA</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">numB</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="comment">// 计算属性 sum 的值是只读的</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title">sum</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.numA + <span class="built_in">this</span>.numB</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 定义 actions 方法, 用来修改 store 中的数据</span></span><br><span class="line">    <span class="attr">updateNum1</span>: action(<span class="function"><span class="keyword">function</span> (<span class="params">step</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.numA += step</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="attr">updateNum2</span>: action(<span class="function"><span class="keyword">function</span> (<span class="params">step</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.numB += step</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="页面-js-中使用"><a href="#页面-js-中使用" class="headerlink" title="页面.js 中使用"></a><code>页面.js</code> 中使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStoreBindings &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../../store/store&#x27;</span></span><br><span class="line">Page(&#123;</span><br><span class="line">    <span class="attr">onLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 参数1：绑定给谁，参数2：对象</span></span><br><span class="line">        <span class="built_in">this</span>.storeBindings = createStoreBindings(<span class="built_in">this</span>, &#123;</span><br><span class="line">            <span class="comment">// 映射容器的实例</span></span><br><span class="line">            store,</span><br><span class="line">            <span class="comment">// 映射容器的数据字段</span></span><br><span class="line">            <span class="attr">fields</span>: [<span class="string">&#x27;numA&#x27;</span>, <span class="string">&#x27;numB&#x27;</span>, <span class="string">&#x27;sum&#x27;</span>],</span><br><span class="line">            <span class="comment">// 映射容器修改的方法</span></span><br><span class="line">            <span class="attr">actions</span>: [<span class="string">&#x27;updateNum1&#x27;</span>],</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">onUnload</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.storeBindings.destroyStoreBindings()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">btnHnadler1</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 使用仓库中的方法，并传递数据</span></span><br><span class="line">        <span class="built_in">this</span>.updateNum1(<span class="number">100</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;numA&#125;&#125; + &#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span> <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHnadler1&quot;</span>&gt;</span>numA+1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="在-组件-js-中使用"><a href="#在-组件-js-中使用" class="headerlink" title="在 组件.js 中使用"></a>在 <code>组件.js</code> 中使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeBindingsBehavior &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../../store/store&#x27;</span></span><br><span class="line">Component(&#123;</span><br><span class="line">    <span class="comment">// 通过 storeBindingsBehavior 来实现自动绑定</span></span><br><span class="line">    <span class="attr">behaviors</span>: [storeBindingsBehavior],</span><br><span class="line">    <span class="attr">storeBindings</span>: &#123;</span><br><span class="line">        store,</span><br><span class="line">        <span class="attr">fields</span>: &#123;</span><br><span class="line">            <span class="attr">numA</span>: <span class="function">() =&gt;</span> store.numA, <span class="comment">// 绑定字段的方式 1</span></span><br><span class="line">            <span class="attr">numB</span>: <span class="function">(<span class="params">store</span>) =&gt;</span> store.numB, <span class="comment">// 绑定字段的方式 2</span></span><br><span class="line">            <span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>, <span class="comment">// 绑定字段的方式 3</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">actions</span>: &#123;</span><br><span class="line">            <span class="attr">updateNum2</span>: <span class="string">&#x27;updateNum2&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">btnHnadler2</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// 直接使用this调用仓库中的方法</span></span><br><span class="line">            <span class="built_in">this</span>.updateNum2(<span class="number">20</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;numA&#125;&#125; + &#123;&#123;numB&#125;&#125; = &#123;&#123;sum&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span> <span class="tag">&lt;<span class="name">van-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;btnHnadler2&quot;</span>&gt;</span>numB+1<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="关于分包"><a href="#关于分包" class="headerlink" title="关于分包"></a>关于分包</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">文档</a></p>
<h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>分包指的是把一个完整的小程序项目，按照需求划分为不同的子包，在构建时打包成不同的分包，用户在使用时可以按需进行加载</p>
<h3 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h3><p>可以优化小程序首次启动的下载时间；在多团队共同开发时可以更好的解耦协作</p>
<h3 id="项目构成"><a href="#项目构成" class="headerlink" title="项目构成"></a>项目构成</h3><img src="/resource/images/image-20210408111659320.png" alt="image-20210408111659320" style="zoom: 50%;" />

<hr>
<img src="/resource/images/image-20210408111810145.png" alt="image-20210408111810145" style="zoom: 67%;" />

<h3 id="分包的加载规则"><a href="#分包的加载规则" class="headerlink" title="分包的加载规则"></a>分包的加载规则</h3><p>在小程序启动时，默认会下载主包并启动主包内页面，tabBar 页面需要放到主包中</p>
<p>当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示，非 tabBar 页面可以按照功能的不同，划分为不同的分包之后，进行按需下载</p>
<h3 id="分包的体积限制"><a href="#分包的体积限制" class="headerlink" title="分包的体积限制"></a>分包的体积限制</h3><p>整个小程序所有分包大小不超过 16M （主包 + 所有分包），单个分包/主包大小不能超过 2M</p>
<h3 id="配置分包"><a href="#配置分包" class="headerlink" title="配置分包"></a>配置分包</h3><p><code>app.json</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;subPackages&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;root&quot;</span>: <span class="string">&quot;pkgA&quot;</span>, <span class="comment">// 根目录</span></span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;p1&quot;</span>,</span><br><span class="line">            <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;pages/cat/cat&quot;</span>,</span><br><span class="line">                <span class="string">&quot;pages/dog/dog&quot;</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;root&quot;</span>: <span class="string">&quot;pkgB&quot;</span>,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;p2&quot;</span>,</span><br><span class="line">            <span class="string">&quot;pages&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;pages/apple/apple&quot;</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="string">&quot;independent&quot;</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="打包原则"><a href="#打包原则" class="headerlink" title="打包原则"></a>打包原则</h3><p>① 小程序会按 subpackages 的配置进行分包，subpackages 之外的目录将被打包到主包中</p>
<p>② 主包也可以有自己的 pages（即最外层的 pages 字段）</p>
<p>③ tabBar 页面必须在主包内</p>
<p>④ 分包之间不能互相嵌套</p>
<h3 id="普通分包引用原则"><a href="#普通分包引用原则" class="headerlink" title="普通分包引用原则"></a>普通分包引用原则</h3><p>① 主包无法引用分包内的私有资源</p>
<p>② 分包之间不能相互引用私有资源</p>
<p>③ <font color="red">分包可以引用主包内的公共资源</font></p>
<h3 id="独立分包"><a href="#独立分包" class="headerlink" title="独立分包"></a>独立分包</h3><p>独立分包和普通分包的差异：普通分包必须依赖于主包才能运行，独立分包可以在不下载主包的情况下，独立运行，只需在配置项中指定 <code>independent: true</code></p>
<p>独立分包和普通分包以及主包之间，是相互隔绝的，不能相互引用彼此的资源！</p>
<p>① 主包无法引用独立分包内的私有资源</p>
<p>② 独立分包之间，不能相互引用私有资源</p>
<p>③ 独立分包和普通分包之间，不能相互引用私有资源</p>
<p>④ <font color="red">特别注意：独立分包中不能引用主包内的公共资源</font></p>
<h3 id="分包预下载"><a href="#分包预下载" class="headerlink" title="分包预下载"></a>分包预下载</h3><p><strong>什么是分包预下载</strong></p>
<p>在进入小程序的某个页面时，由框架自动预下载可能需要的分包，从而提升进入后续分包页面时的启动速度</p>
<p><strong>配置分包的预下载</strong></p>
<p>预下载分包的行为，会在进入指定的页面时触发。在 app.json 中，使用 preloadRule 节点定义分包的预下载规则，示例代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;preloadRule&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">// 触发分包预下载的页面路径</span></span><br><span class="line">        <span class="string">&quot;page/concact/concact&quot;</span>: &#123;</span><br><span class="line">            <span class="comment">// 默认值为： wifi</span></span><br><span class="line">            <span class="string">&quot;network&quot;</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">            <span class="comment">// 可以通过 root 或 name 指定预下载哪些分包</span></span><br><span class="line">            <span class="string">&quot;packages&quot;</span>: [<span class="string">&quot;pkgA&quot;</span>]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：同一个分包中的页面享有共同的预下载大小限额 2M</p>
<h2 id="自定义-TabBar"><a href="#自定义-TabBar" class="headerlink" title="自定义 TabBar"></a>自定义 TabBar</h2><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/ability/custom-tabbar.html">文档</a></p>
<h3 id="10-1-app-json-中配置-tabBar"><a href="#10-1-app-json-中配置-tabBar" class="headerlink" title="10.1 app.json 中配置 tabBar"></a>10.1 app.json 中配置 tabBar</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;tabBar&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;custom&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加-tabBar-文件"><a href="#添加-tabBar-文件" class="headerlink" title="添加 tabBar 文件"></a>添加 tabBar 文件</h3><p>根目录下添加 <code>custom-tab-bar</code> 组件</p>
<h3 id="基于-Vant-组件渲染出基本的自定义-tabBar-效果"><a href="#基于-Vant-组件渲染出基本的自定义-tabBar-效果" class="headerlink" title="基于 Vant 组件渲染出基本的自定义 tabBar 效果"></a>基于 Vant 组件渲染出基本的自定义 tabBar 效果</h3><p><code>app.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;van-button&quot;</span>: <span class="string">&quot;@vant/weapp/button/index&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;my-numbers&quot;</span>: <span class="string">&quot;./components/numbers/numbers&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;van-tabbar&quot;</span>: <span class="string">&quot;@vant/weapp/tabbar/index&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;van-tabbar-item&quot;</span>: <span class="string">&quot;@vant/weapp/tabbar-item/index&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>custom-tab-bar/index.wxml</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">active</span>=<span class="string">&quot;&#123;&#123; active &#125;&#125;&quot;</span> <span class="attr">bind:change</span>=<span class="string">&quot;onChange&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;home-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;search&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;friends-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;setting-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>custom-tab-bar/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">active</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">onChange</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// event.detail 的值为当前选中项的索引</span></span><br><span class="line">            <span class="built_in">this</span>.setData(&#123; <span class="attr">active</span>: event.detail &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="自定义-tabBar-的图标和文本"><a href="#自定义-tabBar-的图标和文本" class="headerlink" title="自定义 tabBar 的图标和文本"></a>自定义 tabBar 的图标和文本</h3><p><code>custom-tab-bar/index.wxml</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">active</span>=<span class="string">&quot;&#123;&#123; active &#125;&#125;&quot;</span> <span class="attr">bind:change</span>=<span class="string">&quot;onChange&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">slot</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/images/tabs/home.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 30px; height: 18px;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">slot</span>=<span class="string">&quot;icon-active&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/images/tabs/home-active.png&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 30px; height: 18px;&quot;</span> /&gt;</span></span><br><span class="line">        首页</span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;search&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;friends-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">icon</span>=<span class="string">&quot;setting-o&quot;</span>&gt;</span>标签<span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="循环渲染-tabBar-的-Item-项"><a href="#循环渲染-tabBar-的-Item-项" class="headerlink" title="循环渲染 tabBar 的 Item 项"></a>循环渲染 tabBar 的 Item 项</h3><p><code>custom-tab-bar/index.wxml</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">active</span>=<span class="string">&quot;&#123;&#123; active &#125;&#125;&quot;</span> <span class="attr">bind:change</span>=<span class="string">&quot;onChange&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">slot</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.iconPath&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25px; height: 25px;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">slot</span>=<span class="string">&quot;icon-active&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;item.selectedIconPath&#125;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;aspectFit&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 25px; height: 25px;&quot;</span> /&gt;</span></span><br><span class="line">        &#123;&#123;item.text&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><code>custom-tab-bar/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">active</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">list</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">pagePath</span>: <span class="string">&#x27;pages/home/home&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&#x27;首页&#x27;</span>,</span><br><span class="line">                <span class="attr">iconPath</span>: <span class="string">&#x27;/images/tabs/home.png&#x27;</span>,</span><br><span class="line">                <span class="attr">selectedIconPath</span>: <span class="string">&#x27;/images/tabs/home-active.png&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">pagePath</span>: <span class="string">&#x27;pages/message/message&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&#x27;消息&#x27;</span>,</span><br><span class="line">                <span class="attr">iconPath</span>: <span class="string">&#x27;/images/tabs/message.png&#x27;</span>,</span><br><span class="line">                <span class="attr">selectedIconPath</span>: <span class="string">&#x27;/images/tabs/message-active.png&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">pagePath</span>: <span class="string">&#x27;pages/contact/contact&#x27;</span>,</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&#x27;联系我们&#x27;</span>,</span><br><span class="line">                <span class="attr">iconPath</span>: <span class="string">&#x27;/images/tabs/contact.png&#x27;</span>,</span><br><span class="line">                <span class="attr">selectedIconPath</span>: <span class="string">&#x27;/images/tabs/contact-active.png&#x27;</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="渲染并美化数字徽标的样式"><a href="#渲染并美化数字徽标的样式" class="headerlink" title="渲染并美化数字徽标的样式"></a>渲染并美化数字徽标的样式</h3><p><code>custom-tab-bar/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">styleIsolation</span>: <span class="string">&#x27;shared&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>custom-tab-bar/index.wxss</code></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.van-tabbar-item</span> &#123;</span><br><span class="line">    --tabbar-item-<span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="按需渲染数字徽标"><a href="#按需渲染数字徽标" class="headerlink" title="按需渲染数字徽标"></a>按需渲染数字徽标</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">active</span>=<span class="string">&quot;&#123;&#123; active &#125;&#125;&quot;</span> <span class="attr">bind:change</span>=<span class="string">&quot;onChange&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">van-tabbar-item</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;list&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span> <span class="attr">info</span>=<span class="string">&quot;&#123;&#123;item.info ? item.info : &#x27;&#x27;&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">van-tabbar-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="把-store-中-sum-值渲染为数字徽标"><a href="#把-store-中-sum-值渲染为数字徽标" class="headerlink" title="把 store 中 sum 值渲染为数字徽标"></a>把 store 中 sum 值渲染为数字徽标</h3><p><code>custom-tab-bar/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeBindingsBehavior &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../store/store&#x27;</span></span><br><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">behaviors</span>: [storeBindingsBehavior],</span><br><span class="line">    <span class="attr">storeBindings</span>: &#123;</span><br><span class="line">        store,</span><br><span class="line">        <span class="attr">fields</span>: &#123;</span><br><span class="line">            <span class="attr">sum</span>: <span class="string">&#x27;sum&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">observers</span>: &#123;</span><br><span class="line">        <span class="attr">sum</span>: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123;</span><br><span class="line">                <span class="string">&#x27;list[1].info&#x27;</span>: val,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="实现-tabBar-页面切换"><a href="#实现-tabBar-页面切换" class="headerlink" title="实现 tabBar 页面切换"></a>实现 tabBar 页面切换</h3><p><code>custom-tab-bar/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">onChange</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.setData(&#123; <span class="attr">active</span>: event.detail &#125;)</span><br><span class="line">            wx.switchTab(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="built_in">this</span>.data.list[event.detail].pagePath,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="解决-tabBar-选中项不准确的问题"><a href="#解决-tabBar-选中项不准确的问题" class="headerlink" title="解决 tabBar 选中项不准确的问题"></a>解决 tabBar 选中项不准确的问题</h3><p><a target="_blank" rel="noopener" href="https://vant-contrib.gitee.io/vant-weapp/#/tabbar">官方处理方案</a>，<a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp/issues/3916">#3916</a>，<a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp/issues/3992">#3992</a></p>
<p><code>store/store.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = observable(&#123;</span><br><span class="line">    <span class="attr">activeTabBarIndex</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">updateActiveTabBarIndex</span>: action(<span class="function"><span class="keyword">function</span> (<span class="params">index</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.activeTabBarIndex = index</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>custom-tab-bar/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; storeBindingsBehavior &#125; <span class="keyword">from</span> <span class="string">&#x27;mobx-miniprogram-bindings&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;../store/store&#x27;</span></span><br><span class="line">Component(&#123;</span><br><span class="line">    <span class="attr">behaviors</span>: [storeBindingsBehavior],</span><br><span class="line">    <span class="attr">storeBindings</span>: &#123;</span><br><span class="line">        store,</span><br><span class="line">        <span class="attr">fields</span>: &#123;</span><br><span class="line">            <span class="attr">active</span>: <span class="string">&#x27;activeTabBarIndex&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">actions</span>: &#123;</span><br><span class="line">            <span class="attr">updateActive</span>: <span class="string">&#x27;updateActiveTabBarIndex&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">onChange</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// event.detail 的值为当前选中项的索引</span></span><br><span class="line">            <span class="comment">// this.setData(&#123; active: event.detail &#125;)</span></span><br><span class="line">            <span class="built_in">this</span>.updateActive(event.detail)</span><br><span class="line">            wx.switchTab(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="built_in">this</span>.data.list[event.detail].pagePath,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>custom-tab-bar/index.wxml</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-tabbar</span> <span class="attr">active</span>=<span class="string">&quot;&#123;&#123; active &#125;&#125;&quot;</span> <span class="attr">bind:change</span>=<span class="string">&quot;onChange&quot;</span> <span class="attr">active-color</span>=<span class="string">&quot;#13a7a0&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">van-tabbar</span>&gt;</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/02/15/vue-base-course01/" rel="prev" title="🥭 Vue3 入门">
      <i class="fa fa-chevron-left"></i> 🥭 Vue3 入门
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E6%8E%8C%E6%8F%A1"><span class="nav-number">1.</span> <span class="nav-text">基础掌握</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86"><span class="nav-number">1.1.</span> <span class="nav-text">小程序页面的组成部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9B%9B%E7%A7%8D-JSON-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.</span> <span class="nav-text">四种 JSON 配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%BF%90%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%92%8C%E9%80%9A%E4%BF%A1%E6%9C%BA%E5%88%B6"><span class="nav-number">1.3.</span> <span class="nav-text">小程序的运行环境和通信机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%BB%84%E4%BB%B6"><span class="nav-number">1.4.</span> <span class="nav-text">常见组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#text-and-rich-text"><span class="nav-number">1.4.1.</span> <span class="nav-text">text and rich-text</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Swiper-%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7"><span class="nav-number">1.4.2.</span> <span class="nav-text">Swiper 常见属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Button"><span class="nav-number">1.4.3.</span> <span class="nav-text">Button</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#image"><span class="nav-number">1.4.4.</span> <span class="nav-text">image</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81-API"><span class="nav-number">1.5.</span> <span class="nav-text">常见 API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E7%B1%BB"><span class="nav-number">1.5.1.</span> <span class="nav-text">事件监听类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5-API"><span class="nav-number">1.5.2.</span> <span class="nav-text">同步 API</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5-API"><span class="nav-number">1.5.3.</span> <span class="nav-text">异步 API</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%8F%E5%90%8C%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.6.</span> <span class="nav-text">协同工作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95%E5%85%A5%E9%97%A8"><span class="nav-number">2.</span> <span class="nav-text">语法入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="nav-number">2.1.</span> <span class="nav-text">事件绑定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#setData-%E7%9A%84%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">2.2.</span> <span class="nav-text">setData 的注意点</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#bindtap"><span class="nav-number">2.2.1.</span> <span class="nav-text">bindtap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bindinput"><span class="nav-number">2.2.2.</span> <span class="nav-text">bindinput</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wx-if-%E5%92%8C-hidden-%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="nav-number">2.2.3.</span> <span class="nav-text">wx:if 和 hidden 的差异</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wx-for"><span class="nav-number">2.2.4.</span> <span class="nav-text">wx:for</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wxss"><span class="nav-number">2.3.</span> <span class="nav-text">wxss</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE"><span class="nav-number">2.4.</span> <span class="nav-text">全局配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tabBar"><span class="nav-number">2.5.</span> <span class="nav-text">tabBar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%B8%B8%E7%94%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="nav-number">2.6.</span> <span class="nav-text">页面配置中常用的配置项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="nav-number">2.7.</span> <span class="nav-text">网络请求</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E7%94%9F%E6%B4%BB"><span class="nav-number">3.</span> <span class="nav-text">本地生活</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="nav-number">3.1.</span> <span class="nav-text">初始化项目结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%95%88%E6%9E%9C"><span class="nav-number">3.2.</span> <span class="nav-text">配置导航栏效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-TabBar-%E6%95%88%E6%9E%9C"><span class="nav-number">3.3.</span> <span class="nav-text">配置 TabBar 效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">3.4.</span> <span class="nav-text">获取轮播图的数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E6%95%88%E6%9E%9C"><span class="nav-number">3.5.</span> <span class="nav-text">渲染轮播图的效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E4%B9%9D%E5%AE%AB%E6%A0%BC%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">3.6.</span> <span class="nav-text">获取九宫格的数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E4%B9%9D%E5%AE%AB%E6%A0%BC%E7%9A%84%E6%95%88%E6%9E%9C"><span class="nav-number">3.7.</span> <span class="nav-text">渲染九宫格的效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A6%96%E9%A1%B5%E5%BA%95%E9%83%A8%E5%9B%BE%E7%89%87%E6%95%88%E6%9E%9C"><span class="nav-number">3.8.</span> <span class="nav-text">首页底部图片效果</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%86%E5%9B%BE%E4%B8%8E%E9%80%BB%E8%BE%91"><span class="nav-number">4.</span> <span class="nav-text">视图与逻辑</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA"><span class="nav-number">4.1.</span> <span class="nav-text">页面导航</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="nav-number">4.1.1.</span> <span class="nav-text">声明式导航</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="nav-number">4.1.2.</span> <span class="nav-text">编程式导航</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="nav-number">4.1.3.</span> <span class="nav-text">导航传参</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="nav-number">4.2.</span> <span class="nav-text">下拉刷新</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-number">4.2.1.</span> <span class="nav-text">开启的两种方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="nav-number">4.2.2.</span> <span class="nav-text">配置下拉刷新的样式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%9A%84%E4%BA%8B%E4%BB%B6"><span class="nav-number">4.2.3.</span> <span class="nav-text">监听下拉刷新的事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E7%9A%84%E6%95%88%E6%9E%9C"><span class="nav-number">4.2.4.</span> <span class="nav-text">停止下拉刷新的效果</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95"><span class="nav-number">4.3.</span> <span class="nav-text">上拉触底</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E4%BA%8B%E4%BB%B6"><span class="nav-number">4.3.1.</span> <span class="nav-text">监听上拉触底事件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E6%A1%88%E4%BE%8B"><span class="nav-number">4.3.2.</span> <span class="nav-text">上拉触底案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">4.4.</span> <span class="nav-text">应用和页面生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">4.4.1.</span> <span class="nav-text">应用生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">4.4.2.</span> <span class="nav-text">页面生命周期</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WXS-%E8%84%9A%E6%9C%AC"><span class="nav-number">4.5.</span> <span class="nav-text">WXS 脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%85%E5%B5%8C-wxs-%E8%84%9A%E6%9C%AC"><span class="nav-number">4.5.1.</span> <span class="nav-text">内嵌 wxs 脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E8%81%94-wxs-%E8%84%9A%E6%9C%AC"><span class="nav-number">4.5.2.</span> <span class="nav-text">外联 wxs 脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wxs-%E7%9A%84%E5%9B%9B%E4%B8%AA%E7%89%B9%E7%82%B9"><span class="nav-number">4.5.3.</span> <span class="nav-text">wxs 的四个特点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2%E5%BC%80%E5%8F%91"><span class="nav-number">5.</span> <span class="nav-text">列表页面开发</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="nav-number">5.1.</span> <span class="nav-text">页面导航传参</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AE%E5%95%86%E9%93%BA%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E6%A0%87%E9%A2%98%E5%86%85%E5%AE%B9"><span class="nav-number">5.2.</span> <span class="nav-text">动态设置商铺列表页面的标题内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89-getShopList-%E6%96%B9%E6%B3%95%E8%8E%B7%E5%8F%96%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8"><span class="nav-number">5.3.</span> <span class="nav-text">定义 getShopList 方法获取商品列表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E9%93%BA%E5%88%97%E8%A1%A8%E7%9A%84-UI-%E7%BB%93%E6%9E%84%E5%92%8C%E6%A0%B7%E5%BC%8F"><span class="nav-number">5.4.</span> <span class="nav-text">渲染商铺列表的 UI 结构和样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%95%E7%A4%BA-loading-%E6%95%88%E6%9E%9C"><span class="nav-number">5.5.</span> <span class="nav-text">展示 loading 效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E6%97%B6%E8%AF%B7%E6%B1%82%E4%B8%8B%E4%B8%80%E9%A1%B5%E6%95%B0%E6%8D%AE"><span class="nav-number">5.6.</span> <span class="nav-text">上拉触底时请求下一页数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8A%E6%8B%89%E8%A7%A6%E5%BA%95%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E8%8A%82%E6%B5%81%E5%A4%84%E7%90%86"><span class="nav-number">5.7.</span> <span class="nav-text">上拉触底请求数据节流处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E6%B2%A1%E6%9C%89%E6%95%B0%E6%8D%AE%E6%97%B6%E8%BF%98%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">5.8.</span> <span class="nav-text">解决没有数据时还发起请求的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E6%95%88%E6%9E%9C"><span class="nav-number">5.9.</span> <span class="nav-text">下拉刷新效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wxs-%E5%A4%84%E7%90%86%E6%89%8B%E6%9C%BA%E5%8F%B7"><span class="nav-number">5.10.</span> <span class="nav-text">wxs 处理手机号</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E7%BB%84%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">关于组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%BC%95%E7%94%A8%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">6.1.</span> <span class="nav-text">组件引用的方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">6.2.</span> <span class="nav-text">组件和页面的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E7%9A%84%E9%9A%94%E7%A6%BB%E6%80%A7"><span class="nav-number">6.3.</span> <span class="nav-text">组件样式的隔离性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E7%9A%84%E9%9A%94%E7%A6%BB%E6%80%A7"><span class="nav-number">6.4.</span> <span class="nav-text">修改组件样式的隔离性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E3%80%81%E6%96%B9%E6%B3%95%E5%92%8C%E5%B1%9E%E6%80%A7"><span class="nav-number">6.5.</span> <span class="nav-text">组件的数据、方法和属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#data-%E5%92%8C-properties-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">6.6.</span> <span class="nav-text">data 和 properties 的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">6.7.</span> <span class="nav-text">数据监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%AF%E6%95%B0%E6%8D%AE%E5%AD%97%E6%AE%B5"><span class="nav-number">6.8.</span> <span class="nav-text">纯数据字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">6.9.</span> <span class="nav-text">组件生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E8%BA%AB%E7%9A%84%E4%BB%80%E4%B9%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">6.9.1.</span> <span class="nav-text">自身的什么生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-9-2-%E6%89%80%E5%9C%A8%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">6.9.2.</span> <span class="nav-text">6.9.2 所在页面的生命周期</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E6%8F%92%E6%A7%BD"><span class="nav-number">6.10.</span> <span class="nav-text">关于插槽</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%95%E6%8F%92%E6%A7%BD"><span class="nav-number">6.10.1.</span> <span class="nav-text">单插槽</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E6%8F%92%E6%A7%BD"><span class="nav-number">6.10.2.</span> <span class="nav-text">多插槽</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="nav-number">6.11.</span> <span class="nav-text">父子组件通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E7%BB%91%E5%AE%9A"><span class="nav-number">6.11.1.</span> <span class="nav-text">属性绑定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A-1"><span class="nav-number">6.11.2.</span> <span class="nav-text">事件绑定</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AE%9E%E4%BE%8B"><span class="nav-number">6.11.3.</span> <span class="nav-text">获取实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#behaviors"><span class="nav-number">6.12.</span> <span class="nav-text">behaviors</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-NPM"><span class="nav-number">7.</span> <span class="nav-text">使用 NPM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="nav-number">7.1.</span> <span class="nav-text">注意点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vant-Weapp"><span class="nav-number">7.2.</span> <span class="nav-text">Vant Weapp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#API-Promise-%E5%8C%96"><span class="nav-number">7.3.</span> <span class="nav-text">API Promise 化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE%E5%85%B1%E4%BA%AB"><span class="nav-number">8.</span> <span class="nav-text">全局数据共享</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">8.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-store-%E5%AE%9E%E4%BE%8B"><span class="nav-number">8.2.</span> <span class="nav-text">创建 store 实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2-js-%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">8.3.</span> <span class="nav-text">页面.js 中使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8-%E7%BB%84%E4%BB%B6-js-%E4%B8%AD%E4%BD%BF%E7%94%A8"><span class="nav-number">8.4.</span> <span class="nav-text">在 组件.js 中使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E5%88%86%E5%8C%85"><span class="nav-number">9.</span> <span class="nav-text">关于分包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">9.1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A5%BD%E5%A4%84"><span class="nav-number">9.2.</span> <span class="nav-text">好处</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%9E%84%E6%88%90"><span class="nav-number">9.3.</span> <span class="nav-text">项目构成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%8C%85%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%A7%84%E5%88%99"><span class="nav-number">9.4.</span> <span class="nav-text">分包的加载规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%8C%85%E7%9A%84%E4%BD%93%E7%A7%AF%E9%99%90%E5%88%B6"><span class="nav-number">9.5.</span> <span class="nav-text">分包的体积限制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%88%86%E5%8C%85"><span class="nav-number">9.6.</span> <span class="nav-text">配置分包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%93%E5%8C%85%E5%8E%9F%E5%88%99"><span class="nav-number">9.7.</span> <span class="nav-text">打包原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E5%88%86%E5%8C%85%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99"><span class="nav-number">9.8.</span> <span class="nav-text">普通分包引用原则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85"><span class="nav-number">9.9.</span> <span class="nav-text">独立分包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%8C%85%E9%A2%84%E4%B8%8B%E8%BD%BD"><span class="nav-number">9.10.</span> <span class="nav-text">分包预下载</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-TabBar"><span class="nav-number">10.</span> <span class="nav-text">自定义 TabBar</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-1-app-json-%E4%B8%AD%E9%85%8D%E7%BD%AE-tabBar"><span class="nav-number">10.1.</span> <span class="nav-text">10.1 app.json 中配置 tabBar</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-tabBar-%E6%96%87%E4%BB%B6"><span class="nav-number">10.2.</span> <span class="nav-text">添加 tabBar 文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E-Vant-%E7%BB%84%E4%BB%B6%E6%B8%B2%E6%9F%93%E5%87%BA%E5%9F%BA%E6%9C%AC%E7%9A%84%E8%87%AA%E5%AE%9A%E4%B9%89-tabBar-%E6%95%88%E6%9E%9C"><span class="nav-number">10.3.</span> <span class="nav-text">基于 Vant 组件渲染出基本的自定义 tabBar 效果</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-tabBar-%E7%9A%84%E5%9B%BE%E6%A0%87%E5%92%8C%E6%96%87%E6%9C%AC"><span class="nav-number">10.4.</span> <span class="nav-text">自定义 tabBar 的图标和文本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF%E6%B8%B2%E6%9F%93-tabBar-%E7%9A%84-Item-%E9%A1%B9"><span class="nav-number">10.5.</span> <span class="nav-text">循环渲染 tabBar 的 Item 项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%B9%B6%E7%BE%8E%E5%8C%96%E6%95%B0%E5%AD%97%E5%BE%BD%E6%A0%87%E7%9A%84%E6%A0%B7%E5%BC%8F"><span class="nav-number">10.6.</span> <span class="nav-text">渲染并美化数字徽标的样式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E9%9C%80%E6%B8%B2%E6%9F%93%E6%95%B0%E5%AD%97%E5%BE%BD%E6%A0%87"><span class="nav-number">10.7.</span> <span class="nav-text">按需渲染数字徽标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%8A-store-%E4%B8%AD-sum-%E5%80%BC%E6%B8%B2%E6%9F%93%E4%B8%BA%E6%95%B0%E5%AD%97%E5%BE%BD%E6%A0%87"><span class="nav-number">10.8.</span> <span class="nav-text">把 store 中 sum 值渲染为数字徽标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0-tabBar-%E9%A1%B5%E9%9D%A2%E5%88%87%E6%8D%A2"><span class="nav-number">10.9.</span> <span class="nav-text">实现 tabBar 页面切换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3-tabBar-%E9%80%89%E4%B8%AD%E9%A1%B9%E4%B8%8D%E5%87%86%E7%A1%AE%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">10.10.</span> <span class="nav-text">解决 tabBar 选中项不准确的问题</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ifer"
      src="/images/49337922.png">
  <p class="site-author-name" itemprop="name">Ifer</p>
  <div class="site-description" itemprop="description">React 全家桶 <span style='position:relative;top:-2px;'>✍</span></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">22</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/weixiantx" title=" → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;weixiantx" rel="noopener" target="_blank"><i class="fab fa-zhihu fa-fw"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ifer</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
