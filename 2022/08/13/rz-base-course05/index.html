<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="âœ” æŒæ¡ el-tree ç»„ä»¶çš„ä½¿ç”¨ã€‚ âœ” æŒæ¡ç»„ç»‡æ¶æ„ä¸šåŠ¡çš„å¢åˆ æ”¹æŸ¥ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="05_äººèµ„åå°">
<meta property="og:url" content="http://example.com/2022/08/13/rz-base-course05/index.html">
<meta property="og:site_name" content="å±é™©">
<meta property="og:description" content="âœ” æŒæ¡ el-tree ç»„ä»¶çš„ä½¿ç”¨ã€‚ âœ” æŒæ¡ç»„ç»‡æ¶æ„ä¸šåŠ¡çš„å¢åˆ æ”¹æŸ¥ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/resource/images/image-20200828105046683.png">
<meta property="og:image" content="http://example.com/resource/images/zzjg.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200720180221662.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200828105634138.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200720232914114.png">
<meta property="og:image" content="http://example.com/resource/images/zzcc.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200721010931214.png">
<meta property="og:image" content="http://example.com/resource/images/image-20210319095140197.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200828162901390.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200831112149246.png">
<meta property="og:image" content="http://example.com/resource/images/image-20200722134415195.png">
<meta property="article:published_time" content="2022-08-13T14:08:01.000Z">
<meta property="article:modified_time" content="2022-11-22T11:12:36.970Z">
<meta property="article:author" content="Ifer">
<meta property="article:tag" content="React,Redux,Mobx,Saga,Dva,Umi,AntD,TS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/resource/images/image-20200828105046683.png">

<link rel="canonical" href="http://example.com/2022/08/13/rz-base-course05/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>05_äººèµ„åå° | å±é™©</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å±é™©</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸ºä¹‹åˆ™æ˜“ï¼Œä¸ä¸ºåˆ™éš¾</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/13/rz-base-course05/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/49337922.png">
      <meta itemprop="name" content="Ifer">
      <meta itemprop="description" content="React å…¨å®¶æ¡¶ <span style='position:relative;top:-2px;'>âœ</span>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å±é™©">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          05_äººèµ„åå°
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2022-08-13 22:08:01" itemprop="dateCreated datePublished" datetime="2022-08-13T22:08:01+08:00">2022-08-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2022-11-22 19:12:36" itemprop="dateModified" datetime="2022-11-22T19:12:36+08:00">2022-11-22</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>âœ” æŒæ¡ el-tree ç»„ä»¶çš„ä½¿ç”¨ã€‚</p>
<p>âœ” æŒæ¡ç»„ç»‡æ¶æ„ä¸šåŠ¡çš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<span id="more"></span>

<h2 id="ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€"><a href="#ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€" class="headerlink" title="ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€"></a>ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€</h2><h3 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>ä½¿ç”¨ ElementUI ç»„ä»¶å¸ƒå±€ç»„ç»‡æ¶æ„çš„åŸºæœ¬å¸ƒå±€ã€‚</p>
<h3 id="è®¤è¯†ç»„ç»‡æ¶æ„"><a href="#è®¤è¯†ç»„ç»‡æ¶æ„" class="headerlink" title="è®¤è¯†ç»„ç»‡æ¶æ„"></a>è®¤è¯†ç»„ç»‡æ¶æ„</h3><p><img src="/resource/images/image-20200828105046683.png" alt="image-20200828105046683"></p>
<p>ä¸€ä¸ªä¼ä¸šçš„ç»„ç»‡æ¶æ„æ˜¯è¯¥ä¼ä¸šçš„çµé­‚ï¼Œç»„ç»‡æ¶æ„é€šå¸¸é‡‡ç”¨æ ‘å½¢é‡‘å­—å¡”å¼ç»“æ„ï¼Œæœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å¸ƒå±€å‡ºé¡µé¢çš„åŸºæœ¬ç»“æ„ã€‚</p>
<p><img src="/resource/images/zzjg.png" alt="image-20200720010954202"></p>
<h3 id="å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹"><a href="#å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹" class="headerlink" title="å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹"></a>å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹</h3><ol>
<li>é¦–å…ˆå®ç°å¤´éƒ¨çš„ç»“æ„ï¼Œé‡‡ç”¨ Element çš„è¡Œåˆ—å¸ƒå±€ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;departments-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- ç”¨äº†ä¸€ä¸ªè¡Œåˆ—å¸ƒå±€ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">align</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-col</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span>æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- ä¸¤ä¸ªå†…å®¹ --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-col</span>&gt;</span>è´Ÿè´£äºº<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-col</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!-- ä¸‹æ‹‰èœå• element --&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">span</span>&gt;</span> æ“ä½œ<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-arrow-down&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                    <span class="comment">&lt;!-- ä¸‹æ‹‰èœå• --&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                                        <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>æ·»åŠ å­éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ã€‚</li>
</ol>
<p><img src="/resource/images/image-20200720180221662.png" alt="image-20200720180221662"></p>
<h3 id="æ ‘å½¢ç»„ä»¶è®¤è¯†"><a href="#æ ‘å½¢ç»„ä»¶è®¤è¯†" class="headerlink" title="æ ‘å½¢ç»„ä»¶è®¤è¯†"></a>æ ‘å½¢ç»„ä»¶è®¤è¯†</h3><p>æ¥ä¸‹æ¥ï¼Œå®ç°æ ‘å½¢çš„ç»“æ„ï¼Œé‡‡ç”¨ Element UI çš„ <a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/tree">tree ç»„ä»¶</a>ï¼Œæ•ˆæœå¦‚ä¸‹ã€‚</p>
<p><img src="/resource/images/image-20200828105634138.png" alt="image-20200828105634138"></p>
<p>el-tree æ ‘å½¢ç»„ä»¶ç›¸å…³å±æ€§å¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
<th align="left">ç±»å‹</th>
<th align="left">å¯é€‰å€¼</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">default-expand-all</td>
<td align="left">æ˜¯å¦é»˜è®¤å±•å¼€æ‰€æœ‰èŠ‚ç‚¹</td>
<td align="left">boolean</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">data</td>
<td align="left">å±•ç¤ºæ•°æ®</td>
<td align="left">array</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">node-key</td>
<td align="left">æ¯ä¸ªæ ‘èŠ‚ç‚¹ç”¨æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„å±æ€§ï¼Œåœ¨æ•´æ£µæ ‘ä¸­åº”è¯¥æ˜¯å”¯ä¸€çš„</td>
<td align="left">String</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">props</td>
<td align="left">é…ç½®é€‰é¡¹ï¼Œå…·ä½“çœ‹ä¸‹è¡¨</td>
<td align="left">object</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
</tbody></table>
<p>props å¯¹è±¡çš„é…ç½®ä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<table>
<thead>
<tr>
<th align="left">å‚æ•°</th>
<th align="left">è¯´æ˜</th>
<th align="left">ç±»å‹</th>
<th align="left">å¯é€‰å€¼</th>
<th align="left">é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">label</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹æ ‡ç­¾ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">string, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">children</td>
<td align="left">æŒ‡å®šå­æ ‘ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">string</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
<tr>
<td align="left">disabled</td>
<td align="left">æŒ‡å®šèŠ‚ç‚¹é€‰æ‹©æ¡†æ˜¯å¦ç¦ç”¨ä¸ºèŠ‚ç‚¹å¯¹è±¡çš„æŸä¸ªå±æ€§å€¼</td>
<td align="left">boolean, function(data, node)</td>
<td align="left">â€”</td>
<td align="left">â€”</td>
</tr>
</tbody></table>
<p><strong>data å±æ€§</strong>æ˜¯ç»„æˆæ ‘å½¢æ•°æ®çš„å…³é”®ï¼Œæ¼”ç¤ºå®ƒçš„ä½¿ç”¨ï¼Œ<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/tree#ji-chu-yong-fa">å®˜ç½‘</a>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span>&gt;</span><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">:data</span>=<span class="string">&quot;departs&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/resource/images/image-20200720232914114.png" alt="image-20200720232914114"></p>
<h3 id="æ”¹é€ æ ‘å½¢ç»„ä»¶çš„æ•°æ®"><a href="#æ”¹é€ æ ‘å½¢ç»„ä»¶çš„æ•°æ®" class="headerlink" title="æ”¹é€ æ ‘å½¢ç»„ä»¶çš„æ•°æ®"></a>æ”¹é€ æ ‘å½¢ç»„ä»¶çš„æ•°æ®</h3><p>ğŸ“ ç›®æ ‡ï¼šæ”¹é€ æ ‘å½¢ç»„ä»¶çš„æ•°æ®ï¼ŒæŒæ¡ props å±æ€§çš„ä½¿ç”¨ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ”¾ç½®ä¸€ä¸ªå±æ€§ï¼Œè¿™é‡Œçš„ props å’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„çˆ¶ä¼ å­çš„ props æ²¡å…³ç³» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">:data</span>=<span class="string">&quot;departs&quot;</span> <span class="attr">:props</span>=<span class="string">&quot;defaultProps&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">defaultProps</span>: &#123;</span><br><span class="line">                <span class="attr">label</span>: <span class="string">&#x27;name&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">departs</span>: [&#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;æ€»è£åŠ&#x27;</span>,</span><br><span class="line">                    <span class="attr">manager</span>: <span class="string">&#x27;æ›¹æ“&#x27;</span>,</span><br><span class="line">                    <span class="attr">children</span>: [&#123;</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;è‘£äº‹ä¼š&#x27;</span>,</span><br><span class="line">                        <span class="attr">manager</span>: <span class="string">&#x27;æ›¹ä¸•&#x27;</span></span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;è¡Œæ”¿éƒ¨&#x27;</span>,</span><br><span class="line">                    <span class="attr">manager</span>: <span class="string">&#x27;åˆ˜å¤‡&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">name</span>: <span class="string">&#x27;äººäº‹éƒ¨&#x27;</span>,</span><br><span class="line">                    <span class="attr">manager</span>: <span class="string">&#x27;å­™æƒ&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">            ],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ”¹é€ æ ‘å½¢ç»„ä»¶çš„ç»“æ„"><a href="#æ”¹é€ æ ‘å½¢ç»„ä»¶çš„ç»“æ„" class="headerlink" title="æ”¹é€ æ ‘å½¢ç»„ä»¶çš„ç»“æ„"></a>æ”¹é€ æ ‘å½¢ç»„ä»¶çš„ç»“æ„</h3><p>ğŸ“ ç›®æ ‡ï¼šåˆ©ç”¨ tree çš„æ’æ§½æ”¹é€ å†…éƒ¨çš„ç»“æ„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span>&gt;</span><span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">:data</span>=<span class="string">&quot;departs&quot;</span> <span class="attr">:props</span>=<span class="string">&quot;defaultProps&quot;</span> <span class="attr">:default-expand-all</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä½œç”¨åŸŸæ’æ§½ slot-scope=&quot;obj&quot;ï¼Œæ¥æ”¶ä¼ é€’ç»™æ’æ§½çš„æ•°æ®ï¼Œobj.data æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®å¯¹è±¡--&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- æˆ–è€… &lt;template #default=&quot;&#123; data &#125;&quot;&gt;&lt;/template&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">slot-scope</span>=<span class="string">&quot;&#123; data &#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">align</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px; width: 100%&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å·¦ä¾§å†…å®¹ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-col</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; data.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å³ä¾§å†…å®¹ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-col</span>&gt;</span>&#123;&#123; data.manager &#125;&#125;<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-col</span>&gt;</span></span><br><span class="line">                            <span class="comment">&lt;!-- æ”¾ç½®ä¸‹æ‹‰èœå• --&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!-- å†…å®¹ --&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span>&gt;</span>æ“ä½œ<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-arrow-down&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                <span class="comment">&lt;!-- å…·åæ’æ§½ --&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                                    <span class="comment">&lt;!-- ä¸‹æ‹‰é€‰é¡¹ --&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>æ·»åŠ å­éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>ç¼–è¾‘éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                                    <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>åˆ é™¤éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">departs</span>: [&#123;</span></span><br><span class="line"><span class="javascript">                        <span class="attr">name</span>: <span class="string">&#x27;æ€»è£åŠ&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                        <span class="attr">manager</span>: <span class="string">&#x27;æ›¹æ“&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                        <span class="attr">children</span>: [&#123;</span></span><br><span class="line"><span class="javascript">                            <span class="attr">name</span>: <span class="string">&#x27;è‘£äº‹ä¼š&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                            <span class="attr">manager</span>: <span class="string">&#x27;æ›¹ä¸•&#x27;</span></span></span><br><span class="line"><span class="javascript">                        &#125;]</span></span><br><span class="line"><span class="javascript">                    &#125;,</span></span><br><span class="line"><span class="javascript">                    &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="attr">name</span>: <span class="string">&#x27;è¡Œæ”¿éƒ¨&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                        <span class="attr">manager</span>: <span class="string">&#x27;åˆ˜å¤‡&#x27;</span></span></span><br><span class="line"><span class="javascript">                    &#125;,</span></span><br><span class="line"><span class="javascript">                    &#123;</span></span><br><span class="line"><span class="javascript">                        <span class="attr">name</span>: <span class="string">&#x27;äººäº‹éƒ¨&#x27;</span>,</span></span><br><span class="line"><span class="javascript">                        <span class="attr">manager</span>: <span class="string">&#x27;å­™æƒ&#x27;</span></span></span><br><span class="line"><span class="javascript">                    &#125;,</span></span><br><span class="line"><span class="javascript">                ],</span></span><br><span class="line"><span class="javascript">                <span class="attr">defaultProps</span>: &#123;</span></span><br><span class="line"><span class="javascript">                    <span class="attr">label</span>: <span class="string">&#x27;name&#x27;</span>, <span class="comment">// è¡¨ç¤ºæ˜¾ç¤ºè¿™ä¸ªå±æ€§å¯¹åº”çš„å€¼</span></span></span><br><span class="line"><span class="javascript">                &#125;,</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆå½¢æˆé™æ€ç»“æ„æ•ˆæœã€‚</p>
<p><img src="/resource/images/zzcc.png" alt="image-20200912150032528"></p>
<h3 id="ä»»åŠ¡"><a href="#ä»»åŠ¡" class="headerlink" title="ä»»åŠ¡"></a>ä»»åŠ¡</h3><p>å®Œæˆæ ‘å½¢ç»“æ„çš„æ˜¾ç¤ºã€‚</p>
<h2 id="å°†æ ‘å½¢ä¸­ç»“æ„æŠ½ç¦»ç»„ä»¶"><a href="#å°†æ ‘å½¢ä¸­ç»“æ„æŠ½ç¦»ç»„ä»¶" class="headerlink" title="å°†æ ‘å½¢ä¸­ç»“æ„æŠ½ç¦»ç»„ä»¶"></a>å°†æ ‘å½¢ä¸­ç»“æ„æŠ½ç¦»ç»„ä»¶</h2><h3 id="å°è£…å•ç‹¬çš„æ ‘ç»“æ„ç»„ä»¶"><a href="#å°è£…å•ç‹¬çš„æ ‘ç»“æ„ç»„ä»¶" class="headerlink" title="å°è£…å•ç‹¬çš„æ ‘ç»“æ„ç»„ä»¶"></a>å°è£…å•ç‹¬çš„æ ‘ç»“æ„ç»„ä»¶</h3><p>æˆ‘ä»¬å‘ç°ï¼Œæ ‘å½¢çš„é¡¶çº§å†…å®¹å®é™…å’Œå­èŠ‚ç‚¹çš„å†…å®¹æ˜¯ä¸€è‡´çš„ï¼Œæ­¤æ—¶å¯ä»¥å°†è¯¥éƒ¨åˆ†æŠ½ææˆä¸€ä¸ªç»„ä»¶ï¼Œæ–¹ä¾¿å¤ç”¨ï¼Œ <code>views/departments/components/tree-tools.vue</code> ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">align</span>=<span class="string">&quot;middle&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 40px;width: 100%&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- åç§°åº”è¯¥å˜æˆ å¯¹åº”çš„èŠ‚ç‚¹ä¸­çš„name --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; treeNode.name &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- ä¸¤ä¸ªå†…å®¹ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-col</span>&gt;</span>&#123;&#123; treeNode.manager &#125;&#125;<span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-col</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- ä¸‹æ‹‰èœå• element --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span>&gt;</span> æ“ä½œ<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-arrow-down&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="comment">&lt;!-- ä¸‹æ‹‰èœå• --&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>æ·»åŠ å­éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>ç¼–è¾‘éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-dropdown-item</span>&gt;</span>åˆ é™¤éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="comment">// å¤–éƒ¨éœ€è¦ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œéœ€è¦æœ‰ name å’Œ manager</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// å®šä¹‰ä¸€ä¸ª props å±æ€§</span></span></span><br><span class="line"><span class="javascript">            <span class="attr">treeNode</span>: &#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">type</span>: <span class="built_in">Object</span>, <span class="comment">// å¯¹è±¡ç±»å‹</span></span></span><br><span class="line"><span class="javascript">                <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">// è¦æ±‚å¯¹æ–¹ä½¿ç”¨æ‚¨çš„ç»„ä»¶çš„æ—¶å€™ï¼Œå¿…é¡»ä¼  treeNode å±æ€§ï¼Œå¦‚æœä¸ä¼ å°±ä¼šæŠ¥é”™</span></span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨ç»„ä»¶"><a href="#åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨ç»„ä»¶" class="headerlink" title="åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨ç»„ä»¶"></a>åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨ç»„ä»¶</h3><ol>
<li>ä½¿ç”¨ç»„ä»¶ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dashboard-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-card</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tree-tools</span> <span class="attr">:tree-node</span>=<span class="string">&quot;company&quot;</span> /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--æ”¾ç½®ä¸€ä¸ªå±æ€§   è¿™é‡Œçš„propså’Œæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„çˆ¶ä¼ å­ çš„propsæ²¡å…³ç³»--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tree</span> <span class="attr">:data</span>=<span class="string">&quot;departs&quot;</span> <span class="attr">:props</span>=<span class="string">&quot;defaultProps&quot;</span> <span class="attr">default-expand-all</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">tree-tools</span> <span class="attr">slot-scope</span>=<span class="string">&quot;&#123; data &#125;&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;data&quot;</span> /&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-tree</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ data ä¸­å®šä¹‰ company çš„æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            <span class="attr">company</span>: &#123;</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&#x27;</span>,</span><br><span class="line">                <span class="attr">manager</span>: <span class="string">&#x27;è´Ÿè´£äºº&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¦‚ä½•æŒ‰éœ€å±•ç¤ºæ“ä½œæŒ‰é’®"><a href="#å¦‚ä½•æŒ‰éœ€å±•ç¤ºæ“ä½œæŒ‰é’®" class="headerlink" title="å¦‚ä½•æŒ‰éœ€å±•ç¤ºæ“ä½œæŒ‰é’®"></a>å¦‚ä½•æŒ‰éœ€å±•ç¤ºæ“ä½œæŒ‰é’®</h3><p>æœ€ä¸Šå±‚çš„ç»„ä»¶æ˜¯ä¸éœ€è¦æ˜¾ç¤º <code>åˆ é™¤éƒ¨é—¨</code> å’Œ <code>ç¼–è¾‘éƒ¨é—¨</code> çš„ï¼Œæ‰€ä»¥å¢åŠ ä¸€ä¸ªæ–°çš„å±æ€§ <code>isRootï¼ˆæ˜¯å¦æ ¹èŠ‚ç‚¹ï¼‰</code> è¿›è¡Œæ§åˆ¶ã€‚</p>
<ol>
<li>æ¥æ”¶ isRootï¼Œ<code>views/departments/components/tree-tools.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">isRoot</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">            <span class="attr">default</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ ¹æ® isRoot æ§åˆ¶æŒ‰é’®çš„æ˜¾ç¤ºã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">v-if</span>=<span class="string">&quot;!isRoot&quot;</span>&gt;</span>ç¼–è¾‘éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">v-if</span>=<span class="string">&quot;!isRoot&quot;</span>&gt;</span>åˆ é™¤éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¼ é€’ isRoot å±æ€§ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tree-tools</span> <span class="attr">:tree-node</span>=<span class="string">&quot;company&quot;</span> <span class="attr">:is-root</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="é€šè¿‡ä¿®æ”¹æ ·å¼è®¾ç½®å›¾æ ‡"><a href="#é€šè¿‡ä¿®æ”¹æ ·å¼è®¾ç½®å›¾æ ‡" class="headerlink" title="é€šè¿‡ä¿®æ”¹æ ·å¼è®¾ç½®å›¾æ ‡"></a>é€šè¿‡ä¿®æ”¹æ ·å¼è®¾ç½®å›¾æ ‡</h3><p> <code>views/departments/index.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.el-tree</span> &#123;</span></span><br><span class="line"><span class="css">        ::v-deep &#123;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            // æœ‰å­èŠ‚ç‚¹ ä¸”æœªå±•å¼€ +</span></span><br><span class="line"><span class="css">            .el-tree-node__expand-icon.el-icon-caret-right:before &#123;</span></span><br><span class="line"><span class="css">                background: <span class="built_in">url</span>(<span class="string">&#x27;~@/assets/common/add-circle.png&#x27;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">height</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">background-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            // æœ‰å­èŠ‚ç‚¹ ä¸”å·²å±•å¼€ -</span></span><br><span class="line"><span class="css">            <span class="selector-class">.el-tree-node__expand-icon</span><span class="selector-class">.expanded</span><span class="selector-class">.el-icon-caret-right</span>:before &#123;</span></span><br><span class="line"><span class="css">                background: <span class="built_in">url</span>(<span class="string">&#x27;~@/assets/common/minus-circle.png&#x27;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">height</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">background-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            // å°ä¸‰è§’çš„æ ·å¼, å»æ‰é»˜è®¤çš„å°ä¸‰è§’çš„æ—‹è½¬æ•ˆæœ</span></span><br><span class="line"><span class="css">            <span class="selector-class">.el-tree-node__expand-icon</span><span class="selector-class">.expanded</span> &#123;</span></span><br><span class="line"><span class="css">                -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span></span><br><span class="line"><span class="css">                <span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">0deg</span>);</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">            // æ²¡æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="css">            <span class="selector-class">.el-tree-node__expand-icon</span><span class="selector-class">.is-leaf</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">&#x27;~@/assets/common/user-filling.png&#x27;</span>) no-repeat <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">height</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">background-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä»»åŠ¡-1"><a href="#ä»»åŠ¡-1" class="headerlink" title="ä»»åŠ¡"></a>ä»»åŠ¡</h3><p>å°†æ ‘å½¢å†…å®¹å•ç‹¬æŠ½ç¦»å‡ºç»„ä»¶ã€‚</p>
<h2 id="è·å–åŠ å·¥ç»„ç»‡æ¶æ„æ•°æ®"><a href="#è·å–åŠ å·¥ç»„ç»‡æ¶æ„æ•°æ®" class="headerlink" title="è·å–åŠ å·¥ç»„ç»‡æ¶æ„æ•°æ®"></a>è·å–åŠ å·¥ç»„ç»‡æ¶æ„æ•°æ®</h2><h3 id="ç›®æ ‡-1"><a href="#ç›®æ ‡-1" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>è·å–çœŸå®çš„ç»„ç»‡æ¶æ„æ•°æ®ï¼Œå¹¶å°†å…¶è½¬åŒ–æˆæ ‘å½¢æ•°æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p>
<h3 id="å°è£…-API-æ¥å£"><a href="#å°è£…-API-æ¥å£" class="headerlink" title="å°è£… API æ¥å£"></a>å°è£… API æ¥å£</h3><ol>
<li>å°è£…è·å–ç»„ç»‡æ¶æ„çš„è¯·æ±‚ï¼Œ<code>api/departments.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"><span class="comment">// è·å–ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepartments</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/company/department&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨é’©å­å‡½æ•°ä¸­è°ƒç”¨æ¥å£ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> TreeTools <span class="keyword">from</span> <span class="string">&#x27;./components/tree-tools&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getDepartments</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/departments&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        TreeTools,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">company</span>: &#123;&#125;, <span class="comment">// å°±æ˜¯å¤´éƒ¨çš„æ•°æ®ç»“æ„</span></span><br><span class="line">            <span class="comment">// #1</span></span><br><span class="line">            <span class="attr">departs</span>: [],</span><br><span class="line">            <span class="attr">defaultProps</span>: &#123;</span><br><span class="line">                <span class="attr">label</span>: <span class="string">&#x27;name&#x27;</span>, <span class="comment">// è¡¨ç¤ºä»è¿™ä¸ªå±æ€§æ˜¾ç¤ºå†…å®¹</span></span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// #3</span></span><br><span class="line">        <span class="built_in">this</span>.getDepartments() <span class="comment">// è°ƒç”¨è‡ªèº«çš„æ–¹æ³•</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// #2</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">            <span class="built_in">this</span>.company.name = result.companyName</span><br><span class="line">            <span class="built_in">this</span>.departs = result.depts <span class="comment">// éœ€è¦å°†å…¶è½¬åŒ–æˆæ ‘å½¢ç»“æ„</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„"><a href="#å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„" class="headerlink" title="å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„"></a>å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„</h3><p><img src="/resource/images/image-20200721010931214.png" alt="image-20200721010931214"></p>
<p><img src="/resource/images/image-20210319095140197.png" alt="image-20210319095140197.png"></p>
<ol>
<li>å°è£…ä¸€ä¸ªå·¥å…·æ–¹æ³•ï¼Œ<code>utils/index.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">transListToTreeData</span>(<span class="params">list, rootValue</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    list.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.pid === rootValue) &#123;</span><br><span class="line">            <span class="comment">// æ‰¾åˆ°ä¹‹åï¼Œå°±è¦å»æ‰¾ item ä¸‹é¢æœ‰æ²¡æœ‰å­èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">const</span> children = transListToTreeData(list, item.id)</span><br><span class="line">            <span class="keyword">if</span> (children.length) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœ children çš„é•¿åº¦å¤§äº 0ï¼Œè¯´æ˜æ‰¾åˆ°äº†å­èŠ‚ç‚¹</span></span><br><span class="line">                item.children = children</span><br><span class="line">            &#125;</span><br><span class="line">            arr.push(item) <span class="comment">// å°†å†…å®¹åŠ å…¥åˆ°æ•°ç»„ä¸­</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è°ƒç”¨è½¬åŒ–æ–¹æ³•ï¼Œè½¬åŒ–æ ‘å½¢ç»“æ„ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.company.name = result.companyName</span><br><span class="line"><span class="comment">// è¿™é‡Œå®šä¹‰ä¸€ä¸ªç©ºä¸²ï¼Œè¡¨ç¤ºæ˜¯æ ¹</span></span><br><span class="line"><span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">&#x27;&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="array-to-tree"><a href="#array-to-tree" class="headerlink" title="array to tree"></a>array to tree</h3><h4 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŸå§‹æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> list = [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;æ€»è£åŠ&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è¡Œæ”¿éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;d&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è´¢åŠ¡æ ¸ç®—éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ç¨åŠ¡ç®¡ç†éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;f&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ç¨åŠ¡ç®¡ç† A éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;g&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ç¨åŠ¡ç®¡ç† B éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœŸæœ›ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> list = [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;æ€»è£åŠ&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è¡Œæ”¿éƒ¨&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">        <span class="attr">pid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;è´¢åŠ¡éƒ¨&#x27;</span>,</span><br><span class="line">        <span class="attr">children</span>: [&#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="string">&#x27;d&#x27;</span>,</span><br><span class="line">                <span class="attr">pid</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;è´¢åŠ¡æ ¸ç®—éƒ¨&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">                <span class="attr">pid</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">                <span class="attr">name</span>: <span class="string">&#x27;ç¨åŠ¡ç®¡ç†éƒ¨&#x27;</span>,</span><br><span class="line">                <span class="attr">children</span>: [&#123;</span><br><span class="line">                        <span class="attr">id</span>: <span class="string">&#x27;f&#x27;</span>,</span><br><span class="line">                        <span class="attr">pid</span>: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;ç¨åŠ¡ç®¡ç† A éƒ¨&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">id</span>: <span class="string">&#x27;g&#x27;</span>,</span><br><span class="line">                        <span class="attr">pid</span>: <span class="string">&#x27;e&#x27;</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;ç¨åŠ¡ç®¡ç† B éƒ¨&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h4 id="ç¡®å®š-ROOT-ID"><a href="#ç¡®å®š-ROOT-ID" class="headerlink" title="ç¡®å®š ROOT_ID"></a>ç¡®å®š ROOT_ID</h4><p>ğŸœ å…ˆç¡®å®š ROOT_ID ä¸º <code>&#39;&#39;</code> ï¼ŒæŠŠ pid ç­‰äº ROOT_ID çš„æ·»åŠ åˆ°æ–°æ•°ç»„çš„ç¬¬ä¸€å±‚ã€‚</p>
<p>ğŸ¤” æ€è·¯ï¼šå°è£…æ–¹æ³• fn1ï¼Œä» list ä¸­æŸ¥æ‰¾ï¼Œã€è°ã€‘ï¼ˆæ•°ç»„çš„æŸä¸€é¡¹ itemï¼‰çš„ pid ç­‰äºæ ¹ id çš„ï¼ˆæ ¹ id å°±æ˜¯ ROOT_IDï¼‰ï¼Œå°±æŠŠè¿™ä¸ªã€è°ã€‘æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ROOT_ID = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.pid === ROOT_ID) &#123;</span><br><span class="line">            arr.push(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾æ¡ä»¶å¯èƒ½ä¼šå˜åŒ–ï¼Œä¸ºäº†æ–¹ä¾¿åç»­çš„å¤„ç†ï¼Œæ”¹é€ ä¸Šé¢ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ROOT_ID = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">list, id = ROOT_ID</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    <span class="comment">// ä» list ä¸­ç»§ç»­æ‰¾ï¼Œè°çš„ pid ç­‰äºæ ¹ id çš„</span></span><br><span class="line">    list.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.pid === id) &#123;</span><br><span class="line">            arr.push(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> result = fn1(list)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>

<h4 id="æ‰¾-item-çš„-children"><a href="#æ‰¾-item-çš„-children" class="headerlink" title="æ‰¾ item çš„ children"></a>æ‰¾ item çš„ children</h4><p>ğŸ¤” æ·»åŠ è¿›å»çš„ item é¡¹å¯èƒ½è¿˜æœ‰ childrenï¼Œæ‰€ä»¥æ·»åŠ ä¹‹å‰å…ˆæ‰¾æ·»åŠ è¿›å»çš„è¿™ä¸ª item æœ‰æ²¡æœ‰ childrenï¼Œæœ‰ children çš„è¯å°±æŠŠè¿™ä¸ª children æŒ‚åˆ° item ä¸Šä¹‹åå†è¿›è¡Œæ·»åŠ ã€‚</p>
<p>ğŸ¤” é‚£ä¹ˆæ€ä¹ˆæ‰¾ children å‘¢ï¼Ÿ</p>
<p>ğŸ˜€ æ€è·¯ï¼šå°è£…æ–¹æ³• fn2ï¼Œä» list ä¸­æŸ¥æ‰¾ï¼Œã€è°ã€‘çš„ pid ç­‰äº <font color=e32d40><strong>item çš„ id</strong></font> çš„ï¼Œå°±æŠŠè¿™ä¸ªã€è°ã€‘æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œæœ€åæŠŠæ•´ä¸ªæ•°ç»„ä½œä¸ºæ·»åŠ è¿›å»çš„ item çš„ childrenã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ROOT_ID = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params">list, id = ROOT_ID</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    list.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.pid === id) &#123;</span><br><span class="line">            <span class="keyword">const</span> children = fn2(list, item.id)</span><br><span class="line">            <span class="keyword">if</span> (children.length) &#123;</span><br><span class="line">                item.children = children</span><br><span class="line">            &#125;</span><br><span class="line">            arr.push(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params">list, id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    list.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.pid === id) &#123;</span><br><span class="line">            arr.push(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = fn1(list, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result)</span><br></pre></td></tr></table></figure>

<h4 id="æ‰¾-item-çš„-children-1"><a href="#æ‰¾-item-çš„-children-1" class="headerlink" title="æ‰¾ item çš„ children"></a>æ‰¾ item çš„ children</h4><p>æ·»åŠ è¿›å»çš„ item é¡¹å¯èƒ½è¿˜æœ‰ childrenï¼Œæ‰€ä»¥æ·»åŠ ä¹‹å‰å…ˆæ‰¾æœ‰æ²¡æœ‰ childrenï¼Œæ€ä¹ˆæ‰¾ children å‘¢ï¼Ÿ</p>
<p>æ€è·¯ï¼šå°è£…æ–¹æ³• fn3ï¼Œä» list ä¸­æŸ¥æ‰¾ï¼Œã€è°ã€‘çš„ pid ç­‰äº <font color=e32d40><strong>item çš„ id</strong></font> çš„ï¼Œå°±æŠŠè¿™ä¸ªã€è°ã€‘æ·»åŠ åˆ°æ•°ç»„ä¸­ï¼Œæœ€åæŠŠæ•´ä¸ªæ•°ç»„ä½œä¸ºæ·»åŠ è¿›å»çš„ item çš„ childrenã€‚</p>
<h4 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ROOT_ID = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">list, id = ROOT_ID</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> arr = []</span><br><span class="line">    list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.pid === id) &#123;</span><br><span class="line">            <span class="keyword">const</span> children = fn(list, item.id)</span><br><span class="line">            <span class="keyword">if</span> (children.length) &#123;</span><br><span class="line">                item.children = children</span><br><span class="line">            &#125;</span><br><span class="line">            arr.push(item)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> arr = fn(list)</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br></pre></td></tr></table></figure>

<h3 id="performant-array-to-tree"><a href="#performant-array-to-tree" class="headerlink" title="performant-array-to-tree"></a>performant-array-to-tree</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; arrayToTree &#125; <span class="keyword">from</span> <span class="string">&#x27;performant-array-to-tree&#x27;</span></span><br><span class="line">arrayToTree(arr, &#123; <span class="attr">parentId</span>: <span class="string">&#x27;pid&#x27;</span>, <span class="attr">dataField</span>: <span class="literal">null</span> &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="åˆ é™¤éƒ¨é—¨åŠŸèƒ½"><a href="#åˆ é™¤éƒ¨é—¨åŠŸèƒ½" class="headerlink" title="åˆ é™¤éƒ¨é—¨åŠŸèƒ½"></a>åˆ é™¤éƒ¨é—¨åŠŸèƒ½</h2><h3 id="ç›®æ ‡-2"><a href="#ç›®æ ‡-2" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>å®ç°æ“ä½œåŠŸèƒ½çš„åˆ é™¤åŠŸèƒ½ã€‚</p>
<h3 id="å°è£…åˆ é™¤éƒ¨é—¨æ¥å£"><a href="#å°è£…åˆ é™¤éƒ¨é—¨æ¥å£" class="headerlink" title="å°è£…åˆ é™¤éƒ¨é—¨æ¥å£"></a>å°è£…åˆ é™¤éƒ¨é—¨æ¥å£</h3><p>å°è£…åˆ é™¤åŠŸèƒ½æ¨¡å—ï¼Œ <code>api/departments.js</code> ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">delDepartments</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;delete&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶"><a href="#æ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶" class="headerlink" title="æ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶"></a>æ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶</h3><p>åœ¨ tree-tools ç»„ä»¶ä¸­ï¼Œç›‘å¬ä¸‹æ‹‰èœå•çš„ç‚¹å‡»äº‹ä»¶ï¼Œ <code>views/departments/components/tree-tools.vue</code> ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dropdown</span> @<span class="attr">command</span>=<span class="string">&quot;operateDepts&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span> æ“ä½œ<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-arrow-down&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸‹æ‹‰èœå• --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dropdown-menu</span> <span class="attr">slot</span>=<span class="string">&quot;dropdown&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">command</span>=<span class="string">&quot;add&quot;</span>&gt;</span>æ·»åŠ å­éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç¼–è¾‘éƒ¨é—¨å’Œåˆ é™¤éƒ¨é—¨åªä¼šåœ¨å­èŠ‚ç‚¹ä¸Šæ˜¾ç¤º --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">v-if</span>=<span class="string">&quot;!isRoot&quot;</span> <span class="attr">command</span>=<span class="string">&quot;edit&quot;</span>&gt;</span>ç¼–è¾‘éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-dropdown-item</span> <span class="attr">v-if</span>=<span class="string">&quot;!isRoot&quot;</span> <span class="attr">command</span>=<span class="string">&quot;del&quot;</span>&gt;</span>åˆ é™¤éƒ¨é—¨<span class="tag">&lt;/<span class="name">el-dropdown-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dropdown-menu</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dropdown</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;edit&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è°ƒç”¨åˆ é™¤éƒ¨é—¨æ¥å£"><a href="#è°ƒç”¨åˆ é™¤éƒ¨é—¨æ¥å£" class="headerlink" title="è°ƒç”¨åˆ é™¤éƒ¨é—¨æ¥å£"></a>è°ƒç”¨åˆ é™¤éƒ¨é—¨æ¥å£</h3><p>åˆ é™¤ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·æ˜¯å¦åˆ é™¤ï¼Œç„¶åè°ƒç”¨åˆ é™¤æ¥å£ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    delDepartments</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/departments&#x27;</span></span><br><span class="line"><span class="comment">// æ“ä½œèŠ‚ç‚¹è°ƒç”¨çš„æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;edit&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤æ“ä½œ</span></span><br><span class="line">        <span class="built_in">this</span>.$confirm(<span class="string">&#x27;ç¡®å®šè¦åˆ é™¤è¯¥éƒ¨é—¨å—&#x27;</span>).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœç‚¹å‡»äº†ç¡®å®šå°±ä¼šè¿›å…¥then</span></span><br><span class="line">            <span class="keyword">return</span> delDepartments(<span class="built_in">this</span>.treeNode.id) <span class="comment">// è¿”å› promise å¯¹è±¡</span></span><br><span class="line">        &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœåˆ é™¤æˆåŠŸäº†ï¼Œå°±ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€šçŸ¥çˆ¶äº²æ›´æ–°æ•°æ®"><a href="#é€šçŸ¥çˆ¶äº²æ›´æ–°æ•°æ®" class="headerlink" title="é€šçŸ¥çˆ¶äº²æ›´æ–°æ•°æ®"></a>é€šçŸ¥çˆ¶äº²æ›´æ–°æ•°æ®</h3><ol>
<li>å·²ç»æˆåŠŸåˆ é™¤äº†å‘˜å·¥æ•°æ®ï¼Œé€šçŸ¥çˆ¶ç»„ä»¶è¿›è¡Œæ›´æ–°å‘¢ï¼Ÿ</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">operateDepts</span>(<span class="params">type</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ å­éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">&#x27;edit&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">//  ç¼–è¾‘éƒ¨é—¨çš„æ“ä½œ</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//  åˆ é™¤æ“ä½œ</span></span><br><span class="line">        <span class="built_in">this</span>.$confirm(<span class="string">&#x27;ç¡®å®šè¦åˆ é™¤è¯¥éƒ¨é—¨å—&#x27;</span>).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœç‚¹å‡»äº†ç¡®å®šå°±ä¼šè¿›å…¥then</span></span><br><span class="line">            <span class="keyword">return</span> delDepartments(<span class="built_in">this</span>.treeNode.id) <span class="comment">// è¿”å›promiseå¯¹è±¡</span></span><br><span class="line">        &#125;).then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœåˆ é™¤æˆåŠŸäº†å°±ä¼šè¿›å…¥è¿™é‡Œ</span></span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;delDepts&#x27;</span>)</span><br><span class="line">            <span class="built_in">this</span>.$message.success(<span class="string">&#x27;åˆ é™¤éƒ¨é—¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶ï¼Œ<code>views/department/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tree-tools</span> <span class="attr">slot-scope</span>=<span class="string">&quot;obj&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;obj.data&quot;</span> @<span class="attr">delDepts</span>=<span class="string">&quot;getDepartments&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ–°å¢éƒ¨é—¨åŠŸèƒ½"><a href="#æ–°å¢éƒ¨é—¨åŠŸèƒ½" class="headerlink" title="æ–°å¢éƒ¨é—¨åŠŸèƒ½"></a>æ–°å¢éƒ¨é—¨åŠŸèƒ½</h2><h3 id="ç›®æ ‡-3"><a href="#ç›®æ ‡-3" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>å®ç°æ–°å¢éƒ¨é—¨åŠŸèƒ½çš„ç»„ä»¶åˆ›å»ºã€‚</p>
<h3 id="å°è£…æ–°å¢æ¥å£"><a href="#å°è£…æ–°å¢æ¥å£" class="headerlink" title="å°è£…æ–°å¢æ¥å£"></a>å°è£…æ–°å¢æ¥å£</h3><p>å°è£…æ–°å¢éƒ¨é—¨çš„ api æ¨¡å—ï¼Œ <code>api/departments.js</code> ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addDepartments</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/company/department&#x27;</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        data,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–°å»ºæ–°å¢å¼¹å±‚"><a href="#æ–°å»ºæ–°å¢å¼¹å±‚" class="headerlink" title="æ–°å»ºæ–°å¢å¼¹å±‚"></a>æ–°å»ºæ–°å¢å¼¹å±‚</h3><ol>
<li>æ„å»ºä¸€ä¸ªæ–°å¢éƒ¨é—¨çš„çª—ä½“ç»„ä»¶ï¼Œ<code>views/department/components/add-dept.vue</code>ã€‚</li>
</ol>
<p><img src="/resource/images/image-20200828162901390.png" alt="image-20200828162901390"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ–°å¢éƒ¨é—¨çš„å¼¹å±‚ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;æ–°å¢éƒ¨é—¨&quot;</span> <span class="attr">visible</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è¡¨å•ç»„ä»¶ el-formï¼Œé€šè¿‡ label-width è®¾ç½® label çš„å®½åº¦  --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åŒ¿åæ’æ§½ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;éƒ¨é—¨åç§°&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;1-50ä¸ªå­—ç¬¦&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;éƒ¨é—¨ç¼–ç &quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;1-50ä¸ªå­—ç¬¦&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;éƒ¨é—¨è´Ÿè´£äºº&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- &lt;el-select style=&quot;width:80%&quot; placeholder=&quot;è¯·é€‰æ‹©&quot; /&gt; --&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;éƒ¨é—¨ä»‹ç»&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;1-300ä¸ªå­—ç¬¦&quot;</span> <span class="attr">type</span>=<span class="string">&quot;textarea&quot;</span> <span class="attr">:rows</span>=<span class="string">&quot;3&quot;</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- el-dialog æœ‰ä¸“é—¨æ”¾ç½®åº•éƒ¨æ“ä½œæ çš„æ’æ§½ï¼Œå…·åæ’æ§½ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- åˆ—è¢«åˆ†ä¸º 24 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span>&gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span>&gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å¼•å…¥æ–°å¢å¼¹æ¡†ç»„ä»¶ï¼Œ<code>departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AddDept <span class="keyword">from</span> <span class="string">&#x27;./components/add-dept&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        AddDept</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-card</span>&gt;</span><span class="tag">&lt;/<span class="name">el-card</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹å‡»æ˜¾ç¤ºå¼¹å±‚"><a href="#ç‚¹å‡»æ˜¾ç¤ºå¼¹å±‚" class="headerlink" title="ç‚¹å‡»æ˜¾ç¤ºå¼¹å±‚"></a>ç‚¹å‡»æ˜¾ç¤ºå¼¹å±‚</h3><p>ğŸ“ ç›®æ ‡ï¼šç‚¹å‡»æ–°å¢å­éƒ¨é—¨æ—¶æ˜¾ç¤ºå¼¹å±‚ç»„ä»¶ï¼Œ<font color=e32d40><strong>å¹¶è®°å½•å½“å‰ç‚¹å‡»è¡Œçš„æ•°æ®</strong></font>ã€‚</p>
<ol>
<li>ç”¨å¤–ç•Œä¼ é€’è¿‡æ¥çš„ showDialog å±æ€§æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºæˆ–è€…éšè—ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éœ€è¦ä¼ å…¥ä¸€ä¸ª props å˜é‡æ¥æ§åˆ¶æ˜¾ç¤ºæˆ–è€…éšè—</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="attr">showDialog</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">            <span class="attr">default</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;æ–°å¢éƒ¨é—¨&quot;</span> <span class="attr">:visible</span>=<span class="string">&quot;showDialog&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>çˆ¶ç»„ä»¶å®šä¹‰å¹¶ä¼ é€’æ§åˆ¶çª—ä½“æ˜¾ç¤ºçš„å˜é‡ <code>showDialog</code>ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">&quot;showDialog&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">showDialog</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å½“ç‚¹å‡»æ–°å¢éƒ¨é—¨æ—¶ï¼Œå¼¹å‡ºç»„ä»¶ï¼Œ<code>views/departments/tree-tools.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (type === <span class="string">&#x27;add&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// ä¸ºä½•ä¼ å‡º treeNodeï¼Œå› ä¸ºæ˜¯æ·»åŠ å­éƒ¨é—¨æ—¶éœ€è¦å½“å‰éƒ¨é—¨çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;addDepts&#x27;</span>, <span class="built_in">this</span>.treeNode)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tree-tools</span> <span class="attr">slot-scope</span>=<span class="string">&quot;obj&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;obj.data&quot;</span> @<span class="attr">delDepts</span>=<span class="string">&quot;getDepartments&quot;</span> @<span class="attr">addDepts</span>=<span class="string">&quot;addDepts&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">addDepts</span>(<span class="params">node</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ˜¾ç¤ºå¼¹å±‚</span></span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// å› ä¸º node æ˜¯å½“å‰çš„ç‚¹å‡»çš„éƒ¨é—¨ï¼Œæ­¤æ—¶è¿™ä¸ªéƒ¨é—¨åº”è¯¥è®°å½•ä¸‹æ¥</span></span><br><span class="line">    <span class="comment">// åˆ«å¿˜äº†åœ¨ data ä¸­å£°æ˜åˆå§‹çš„ node ä¸º null</span></span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ–°å¢éƒ¨é—¨æ ¡éªŒ"><a href="#æ–°å¢éƒ¨é—¨æ ¡éªŒ" class="headerlink" title="æ–°å¢éƒ¨é—¨æ ¡éªŒ"></a>æ–°å¢éƒ¨é—¨æ ¡éªŒ</h2><h3 id="ç›®æ ‡-4"><a href="#ç›®æ ‡-4" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>å®Œæˆæ–°å¢éƒ¨é—¨åŠŸèƒ½çš„è§„åˆ™æ ¡éªŒå’Œæ•°æ®æäº¤éƒ¨åˆ†ã€‚</p>
<h3 id="æ•°æ®æ”¶é›†å’ŒåŸºç¡€æ ¡éªŒ"><a href="#æ•°æ®æ”¶é›†å’ŒåŸºç¡€æ ¡éªŒ" class="headerlink" title="æ•°æ®æ”¶é›†å’ŒåŸºç¡€æ ¡éªŒ"></a>æ•°æ®æ”¶é›†å’ŒåŸºç¡€æ ¡éªŒ</h3><ol>
<li>å‡†å¤‡å˜é‡å’Œè§„åˆ™ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å®šä¹‰è¡¨å•æ•°æ®</span></span><br><span class="line">        <span class="attr">formData</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// éƒ¨é—¨åç§°ï¼Œå¿…å¡« 1-50 ä¸ªå­—ç¬¦ï¼ŒåŒçº§éƒ¨é—¨ä¸­ç¦æ­¢å‡ºç°é‡å¤éƒ¨é—¨</span></span><br><span class="line">            <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// éƒ¨é—¨ç¼–ç ï¼Œå¿…å¡« 1-50 ä¸ªå­—ç¬¦ï¼Œéƒ¨é—¨ç¼–ç åœ¨æ•´ä¸ªæ¨¡å—ä¸­éƒ½ä¸å…è®¸é‡å¤</span></span><br><span class="line">            <span class="attr">manager</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// éƒ¨é—¨ç®¡ç†è€…ï¼Œå¿…å¡«</span></span><br><span class="line">            <span class="attr">introduce</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// éƒ¨é—¨ä»‹ç»ï¼Œå¿…å¡« 1-300 ä¸ªå­—ç¬¦</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// å®šä¹‰æ ¡éªŒè§„åˆ™</span></span><br><span class="line">        <span class="attr">rules</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: [&#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º&#x27;</span>,</span><br><span class="line">                    <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">min</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">max</span>: <span class="number">50</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨åç§°è¦æ±‚1-50ä¸ªå­—ç¬¦&#x27;</span>,</span><br><span class="line">                    <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">code</span>: [&#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨ç¼–ç ä¸èƒ½ä¸ºç©º&#x27;</span>,</span><br><span class="line">                    <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">min</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">max</span>: <span class="number">50</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨ç¼–ç è¦æ±‚1-50ä¸ªå­—ç¬¦&#x27;</span>,</span><br><span class="line">                    <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">manager</span>: [&#123;</span><br><span class="line">                <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨è´Ÿè´£äººä¸èƒ½ä¸ºç©º&#x27;</span>,</span><br><span class="line">                <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">            &#125;],</span><br><span class="line">            <span class="attr">introduce</span>: [&#123;</span><br><span class="line">                    <span class="attr">required</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨ä»‹ç»ä¸èƒ½ä¸ºç©º&#x27;</span>,</span><br><span class="line">                    <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">                    <span class="attr">min</span>: <span class="number">1</span>,</span><br><span class="line">                    <span class="attr">max</span>: <span class="number">300</span>,</span><br><span class="line">                    <span class="attr">message</span>: <span class="string">&#x27;éƒ¨é—¨ä»‹ç»è¦æ±‚1-50ä¸ªå­—ç¬¦&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æŠŠä¸Šé¢çš„æ•°æ®å’Œè§„åˆ™ä¸è§†å›¾è¿›è¡Œç»‘å®šã€‚</li>
</ol>
<ul>
<li><p>  ç»™ el-form é…ç½® model å’Œ rules å±æ€§ã€‚</p>
</li>
<li><p>  ç»™ el-form-item é…ç½® prop å±æ€§ã€‚</p>
</li>
<li><p>  ç»™è¡¨å•è¿›è¡Œ v-model åŒå‘ç»‘å®šã€‚</p>
</li>
</ul>
<h3 id="éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç "><a href="#éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç " class="headerlink" title="éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç "></a>éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç </h3><p>ğŸ“ ç›®æ ‡ï¼šå®Œæˆéƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç çš„è‡ªå®šä¹‰æ ¡éªŒï¼Œéƒ¨é—¨åç§°ä¸èƒ½å’Œ <code>åŒçº§åˆ«</code> çš„é‡å¤ã€‚</p>
<p>ğŸ¤” æ€è€ƒï¼šæ·»åŠ æ—¶ï¼Œéƒ¨é—¨åç§°çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿéƒ¨é—¨ç¼–ç çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>çˆ¶ç»„ä»¶ä¼ é€’å½“å‰ node åˆ° add-dept ç»„ä»¶ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">&quot;showDialog&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;node&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>add-dept ç»„ä»¶æ¥æ”¶æ•°æ®ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    <span class="attr">showDialog</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å½“å‰æ“ä½œçš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="attr">treeNode</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ ¹æ®å½“å‰éƒ¨é—¨ idï¼Œæ‰¾åˆ°æ‰€æœ‰å­éƒ¨é—¨ç›¸å…³çš„æ•°æ®ï¼Œåˆ¤æ–­æ˜¯å¦é‡å¤ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getDepartments</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/departments&#x27;</span></span><br><span class="line"><span class="keyword">const</span> checkNameRepeat = <span class="keyword">async</span> (rule, value, callback) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 1. å…ˆè·å–æœ€æ–°çš„æ‰€æœ‰ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        depts</span><br><span class="line">    &#125; = <span class="keyword">await</span> getDepartments()</span><br><span class="line">    <span class="comment">// 2. æ‰¾å­èŠ‚ç‚¹ï¼ˆè°çš„ pid ç­‰äº this.treeNode.idï¼Œè°å°±æ˜¯å­èŠ‚ç‚¹ï¼‰</span></span><br><span class="line">    <span class="comment">// 3. æŸ¥é‡ name</span></span><br><span class="line">    <span class="keyword">const</span> isRepeat = depts.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> item.pid === <span class="built_in">this</span>.treeNode.id).some(<span class="function">(<span class="params">item</span>) =&gt;</span> item.name === value)</span><br><span class="line">    <span class="comment">// 4. æ ¹æ® isRepeat å¤„ç†</span></span><br><span class="line">    isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`åŒçº§éƒ¨é—¨ä¸‹å·²ç»æœ‰<span class="subst">$&#123;value&#125;</span>çš„éƒ¨é—¨äº†`</span>)) : callback()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æ£€æŸ¥éƒ¨é—¨ç¼–ç çš„è¿‡ç¨‹åŒç†ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> checkCodeRepeat = <span class="keyword">async</span> (rule, value, callback) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 1. å…ˆè¦è·å–æœ€æ–°çš„ç»„ç»‡æ¶æ„æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        depts</span><br><span class="line">    &#125; = <span class="keyword">await</span> getDepartments()</span><br><span class="line">    <span class="comment">// 2. è¿™é‡ŒåŠ ä¸€ä¸ª value ä¸ä¸ºç©ºï¼Œåç«¯è¿”å›çš„éƒ¨é—¨æ•°æ®æœ‰å¯èƒ½æ²¡æœ‰ codeï¼Œè¿™ç§æƒ…å†µå’±å°±ä¸å¿…å¤„ç†äº†</span></span><br><span class="line">    <span class="keyword">const</span> isRepeat = depts.some(<span class="function">(<span class="params">item</span>) =&gt;</span> item.code === value &amp;&amp; item.code)</span><br><span class="line">    isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`ç»„ç»‡æ¶æ„ä¸­å·²ç»æœ‰éƒ¨é—¨ä½¿ç”¨<span class="subst">$&#123;value&#125;</span>ç¼–ç `</span>)) : callback()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>åœ¨è§„åˆ™ä¸­å®šä¹‰ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: [</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">                <span class="attr">validator</span>: checkNameRepeat, <span class="comment">// è‡ªå®šä¹‰å‡½æ•°çš„å½¢å¼æ ¡éªŒ</span></span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">code</span>: [</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">                <span class="attr">validator</span>: checkCodeRepeat,</span><br><span class="line">            &#125;,</span><br><span class="line">        ],</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¤„ç†é¦–éƒ¨å†…å®¹çš„-pid"><a href="#å¤„ç†é¦–éƒ¨å†…å®¹çš„-pid" class="headerlink" title="å¤„ç†é¦–éƒ¨å†…å®¹çš„ pid"></a>å¤„ç†é¦–éƒ¨å†…å®¹çš„ pid</h3><p>æ³¨æ„ï¼šåœ¨æœ€æ ¹çº§çš„ <code>tree-tools</code> ç»„ä»¶ä¸­ï¼Œç”±äº treenode å±æ€§ä¸­æ²¡æœ‰ idï¼Œid ä¾¿æ˜¯ undefinedï¼Œä½†æ˜¯é€šè¿‡ undefined è¿›è¡Œç­‰å€¼åˆ¤æ–­æ˜¯å¯»æ‰¾ä¸åˆ°å¯¹åº”çš„æ ¹èŠ‚ç‚¹çš„ï¼Œæ‰€ä»¥åœ¨ä¼ å€¼æ—¶ï¼Œéœ€è¦å°† id å±æ€§è®¾ç½®ä¸º <code>&quot;&quot;</code> ã€‚</p>
<p> <code>views/departments/index.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">company</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;æ±Ÿè‹ä¼ æ™ºæ’­å®¢æ•™è‚²ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&#x27;</span>,</span><br><span class="line">            <span class="attr">manager</span>: <span class="string">&#x27;è´Ÿè´£äºº&#x27;</span>,</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·å–éƒ¨é—¨è´Ÿè´£äººæ•°æ®"><a href="#è·å–éƒ¨é—¨è´Ÿè´£äººæ•°æ®" class="headerlink" title="è·å–éƒ¨é—¨è´Ÿè´£äººæ•°æ®"></a>è·å–éƒ¨é—¨è´Ÿè´£äººæ•°æ®</h2><h3 id="ç›®æ ‡-5"><a href="#ç›®æ ‡-5" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>è·å–æ–°å¢è¡¨å•ä¸­çš„éƒ¨é—¨è´Ÿè´£äººä¸‹æ‹‰æ•°æ®ã€‚</p>
<h3 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h3><ol>
<li>å°è£…è·å–éƒ¨é—¨è´Ÿè´£äººçš„æ¥å£ï¼Œ<code>api/employees.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–å‘˜å·¥çš„ç®€å•åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getEmployeeSimple</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/sys/user/simple&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>add-dept.vue</code> ç»„ä»¶å‡†å¤‡è·å–å‘˜å·¥åˆ—è¡¨çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getEmployeeSimple</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/employees&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">            <span class="attr">peoples</span>: [],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// è·å–å‘˜å·¥ç®€å•åˆ—è¡¨æ•°æ®</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">getEmployeeSimple</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.peoples = <span class="keyword">await</span> getEmployeeSimple()</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç›‘å¬ select ç»„ä»¶çš„ <code>focus</code> äº‹ä»¶ï¼Œè°ƒç”¨è¯¥æ¥å£è·å–æ•°æ®ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-select</span> <span class="attr">v-model</span>=<span class="string">&quot;formData.manager&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:80%&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·é€‰æ‹©&quot;</span> @<span class="attr">focus</span>=<span class="string">&quot;getEmployeeSimple&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éœ€è¦å¾ªç¯ç”Ÿæˆé€‰é¡¹ï¼Œæ˜¾ç¤ºçš„æ˜¯ç”¨æˆ·åï¼Œå­˜çš„ä¹Ÿæ˜¯ç”¨æˆ·å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-option</span> <span class="attr">v-for</span>=<span class="string">&quot;item in peoples&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span> <span class="attr">:label</span>=<span class="string">&quot;item.username&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;item.username&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ"><a href="#æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ" class="headerlink" title="æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ"></a>æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ</h2><h3 id="ç›®æ ‡-6"><a href="#ç›®æ ‡-6" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>å®Œæˆæ–°å¢æ¨¡å—çš„æäº¤-å–æ¶ˆ-å…³é—­ç­‰åŠŸèƒ½ã€‚</p>
<h3 id="æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£"><a href="#æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£" class="headerlink" title="æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£"></a>æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£</h3><p>å½“ç‚¹å‡»æ–°å¢é¡µé¢çš„ç¡®å®šæŒ‰é’®æ—¶ï¼Œéœ€è¦å¯¹è¡¨å•çš„æ•´ä½“æ ¡éªŒï¼Œå¦‚æœæ ¡éªŒæˆåŠŸï¼Œè¿›è¡Œæäº¤ã€‚</p>
<ol>
<li>ç»™ el-form å®šä¹‰ä¸€ä¸ª ref å±æ€§ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;deptForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;formData&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;120px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.validate(<span class="function"><span class="params">isOK</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">            <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ ¡éªŒé€šè¿‡æ—¶ï¼Œè°ƒç”¨æ–°å¢æ¥å£ï¼Œå› ä¸ºæ˜¯æ·»åŠ å­éƒ¨é—¨ï¼Œæ‰€ä»¥å­éƒ¨é—¨çš„ pid åº”è¯¥ç­‰äºå½“å‰ç‚¹å‡»éƒ¨é—¨çš„ idã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    addDepartments</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/departments&#x27;</span></span><br><span class="line"><span class="comment">// ç‚¹å‡»ç¡®å®šæ—¶è§¦å‘</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">            <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">            <span class="comment">// è°ƒç”¨æ–°å¢æ¥å£ æ·»åŠ çˆ¶éƒ¨é—¨çš„ id</span></span><br><span class="line">            <span class="keyword">await</span> addDepartments(&#123;</span><br><span class="line">                ...this.formData,</span><br><span class="line">                <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// æ–°å¢æˆåŠŸä¹‹åï¼Œé€šçŸ¥çˆ¶ç»„ä»¶é‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;addDepts&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>çˆ¶ç»„ä»¶ç›‘å¬ addDeptsï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">&quot;showDialog&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;node&quot;</span> @<span class="attr">addDepts</span>=<span class="string">&quot;getDepartments&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>ğŸ¤” åŒå­¦ä»¬å¯èƒ½ä¼šç–‘æƒ‘ï¼Œæˆ‘ä»¬ <code>tree-tools.vue</code> å’Œ <code>add-dept.vue</code> ä¸¤ä¸ªç»„ä»¶éƒ½è§¦å‘äº† addDepts äº‹ä»¶ï¼Œä¸å†²çªå—ï¼Ÿ</p>
<p>ç­”ï¼šæˆ‘ä»¬è§¦å‘çš„è‡ªå®šä¹‰äº‹ä»¶éƒ½æ˜¯ç»„ä»¶è‡ªèº«çš„ï¼Œä»–ä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªæ˜¯åå­—ç›¸åŒè€Œå·²ã€‚</p>
<h3 id="åˆ©ç”¨-sync-ä¿®é¥°ç¬¦å…³é—­å¼¹å±‚"><a href="#åˆ©ç”¨-sync-ä¿®é¥°ç¬¦å…³é—­å¼¹å±‚" class="headerlink" title="åˆ©ç”¨ sync ä¿®é¥°ç¬¦å…³é—­å¼¹å±‚"></a>åˆ©ç”¨ sync ä¿®é¥°ç¬¦å…³é—­å¼¹å±‚</h3><h4 id="å¸¸è§„å†™æ³•"><a href="#å¸¸è§„å†™æ³•" class="headerlink" title="å¸¸è§„å†™æ³•"></a>å¸¸è§„å†™æ³•</h4><ol>
<li>å­ç»„ä»¶è§¦å‘äº‹ä»¶ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">            <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">            <span class="keyword">await</span> addDepartments(&#123;</span><br><span class="line">                ...this.formData,</span><br><span class="line">                <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;addDepts&#x27;</span>)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;changedialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>çˆ¶ç»„ä»¶ç›‘å¬äº‹ä»¶ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog</span>=<span class="string">&quot;showDialog&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;node&quot;</span> @<span class="attr">addDepts</span>=<span class="string">&quot;getDepartments&quot;</span> @<span class="attr">changedialog</span>=<span class="string">&quot;closeDialog&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">closeDialog</span>(<span class="params">value</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.showDialog = value</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="åˆ©ç”¨-sync-ä¿®é¥°ç¬¦"><a href="#åˆ©ç”¨-sync-ä¿®é¥°ç¬¦" class="headerlink" title="åˆ©ç”¨ sync ä¿®é¥°ç¬¦"></a>åˆ©ç”¨ sync ä¿®é¥°ç¬¦</h4><p>å½“ä¸€ä¸ªæ•°æ®å­ç»„ä»¶éœ€è¦ä½¿ç”¨ï¼ˆä¸ä½¿ç”¨ä¹Ÿè¡Œï¼‰åˆè¦ä¿®æ”¹çš„æ—¶å€™ï¼ŒVue ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª sync ä¿®é¥°ç¬¦ç”¨æ¥ç®€åŒ–è¿™ä¸ªæ“ä½œã€‚</p>
<p>ç®€åŒ–äº†å“ªäº›ï¼Ÿçˆ¶ç»„ä»¶ä¸éœ€è¦å†è¿›è¡Œäº‹ä»¶ç›‘å¬å’Œèµ‹å€¼çš„æ“ä½œäº†ã€‚</p>
<ol>
<li>çˆ¶ç»„ä»¶ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">add-dept</span> <span class="attr">:show-dialog.sync</span>=<span class="string">&quot;showDialog&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;node&quot;</span> @<span class="attr">addDepts</span>=<span class="string">&quot;getDepartments&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å­ç»„ä»¶ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">            <span class="comment">// è¡¨ç¤ºå¯ä»¥æäº¤äº†</span></span><br><span class="line">            <span class="keyword">await</span> addDepartments(&#123;</span><br><span class="line">                ...this.formData,</span><br><span class="line">                <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;addDepts&#x27;</span>)</span><br><span class="line">            <span class="comment">// update:propsåç§°</span></span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;update:showDialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ"><a href="#å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ" class="headerlink" title="å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ"></a>å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ</h3><ol>
<li>ç‚¹å‡» x çš„æ—¶å€™ä¹Ÿèƒ½å…³é—­å¼¹æ¡†ï¼Œç›‘å¬ el-dialog çš„ close äº‹ä»¶ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;æ–°å¢éƒ¨é—¨&quot;</span> <span class="attr">:visible</span>=<span class="string">&quot;showDialog&quot;</span> @<span class="attr">close</span>=<span class="string">&quot;btnCancel&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å®šä¹‰ benCancel æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// é‡ç½®å†…å®¹ï¼Œå¹¶æ¸…ç©ºæ ¡éªŒè§„åˆ™</span></span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.resetFields()</span><br><span class="line">    <span class="comment">// å…³é—­</span></span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;update:showDialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™"><a href="#ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™" class="headerlink" title="ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™"></a>ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™</h2><h3 id="ç›®æ ‡-7"><a href="#ç›®æ ‡-7" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>å®ç°ç¼–è¾‘éƒ¨é—¨çš„åŠŸèƒ½ã€‚</p>
<h3 id="ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºç¼–è¾‘å¼¹å‡ºå±‚"><a href="#ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºç¼–è¾‘å¼¹å‡ºå±‚" class="headerlink" title="ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºç¼–è¾‘å¼¹å‡ºå±‚"></a>ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºç¼–è¾‘å¼¹å‡ºå±‚</h3><p>ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®é™…ä¸Šå’Œæ–°å¢çª—ä½“é‡‡ç”¨çš„æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œç‚¹å‡»å¼¹æ¡†ä¸­ç¡®å®šæŒ‰é’®çš„æ—¶å€™æ ¹æ®æœ‰æ—  ID è¿›è¡ŒåŒºåˆ†ã€‚</p>
<p><img src="/resource/images/image-20200831112149246.png" alt="image-20200831112149246"></p>
<ol>
<li>ç‚¹å‡»ç¼–è¾‘éƒ¨é—¨æ—¶ï¼Œè§¦å‘çˆ¶äº²çš„è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¹¶ä¼ é€’å½“å‰èŠ‚ç‚¹æ•°æ® this.treeNodeã€‚</li>
</ol>
<p><code>views/departments/components/tree-tools.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (type === <span class="string">&#x27;edit&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;editDepts&#x27;</span>, <span class="built_in">this</span>.treeNode)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>çˆ¶ç»„ä»¶ç›‘å¬è‡ªå®šä¹‰äº‹ä»¶ï¼Œåœ¨è‡ªå®šä¹‰äº‹ä»¶çš„å›è°ƒä¸­æ˜¾ç¤ºå¼¹å±‚å¹¶è®°å½•æ•°æ®ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tree-tools</span> <span class="attr">slot-scope</span>=<span class="string">&quot;obj&quot;</span> <span class="attr">:tree-node</span>=<span class="string">&quot;obj.data&quot;</span> @<span class="attr">delDepts</span>=<span class="string">&quot;getDepartments&quot;</span> @<span class="attr">editDepts</span>=<span class="string">&quot;editDepts&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">editDepts</span>(<span class="params">node</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// é¦–å…ˆæ‰“å¼€å¼¹å±‚</span></span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// èµ‹å€¼æ“ä½œçš„èŠ‚ç‚¹</span></span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¡«å……æ•°æ®"><a href="#å¡«å……æ•°æ®" class="headerlink" title="å¡«å……æ•°æ®"></a>å¡«å……æ•°æ®</h3><p>ğŸ“ ç›®æ ‡ï¼šç‚¹å‡»ç¼–è¾‘æŒ‰é’®æ—¶ï¼Œçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶è·å–è¯¦æƒ…æ–¹æ³•æ¥å¡«å……æ•°æ®ã€‚</p>
<ol>
<li>å°è£…è·å–éƒ¨é—¨ä¿¡æ¯çš„æ¥å£ï¼Œ<code>api/departments.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–éƒ¨é—¨è¯¦æƒ…</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDepartDetail</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">$&#123;id&#125;</span>`</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å­ç»„ä»¶ä¸­å®šä¹‰æ–¹æ³•è·å–è¯¦æƒ…ï¼Œå¹¶æŠŠç»“æœèµ‹å€¼ç»™ formDataï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getDepartDetail</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/departments&#x27;</span></span><br><span class="line"><span class="comment">// è·å–éƒ¨é—¨è¯¦æƒ…</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getDepartDetail</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.formData = <span class="keyword">await</span> getDepartDetail(id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">editDepts</span>(<span class="params">node</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.showDialog = <span class="literal">true</span></span><br><span class="line">    <span class="built_in">this</span>.node = node</span><br><span class="line">    <span class="comment">// ç›´æ¥è°ƒç”¨å­ç»„ä»¶ä¸­çš„æ–¹æ³•ä¼ å…¥ä¸€ä¸ª id</span></span><br><span class="line">    <span class="built_in">this</span>.$refs.addDept.getDepartDetail(node.id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜"><a href="#æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜" class="headerlink" title="æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜"></a>æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜</h3><ol>
<li>æ ¹æ®æœ‰æ—  IDï¼Œåˆ©ç”¨è®¡ç®—å±æ€§ï¼ŒåŒºåˆ†ç¼–è¾‘å’Œæ·»åŠ çš„å¼¹æ¡†æ ‡é¢˜ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="function"><span class="title">showTitle</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.formData.id ? <span class="string">&#x27;ç¼–è¾‘éƒ¨é—¨&#x27;</span> : <span class="string">&#x27;æ–°å¢å­éƒ¨é—¨&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>el-form ä¸­çš„ resetFields ä¸èƒ½é‡ç½®éè¡¨å•ä¸­çš„æ•°æ®ï¼Œå¯¼è‡´ formData.id æ®‹ç•™ï¼Œæ‰€ä»¥åœ¨å–æ¶ˆçš„æ—¶å€™æ‰‹åŠ¨é‡ç½®æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">btnCancel</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// resetFields åªèƒ½é‡ç½®è¡¨å•ä¸Šçš„æ•°æ®ï¼Œéè¡¨å•ä¸Šçš„æ¯”å¦‚ id åˆ™ä¸èƒ½è¢«é‡ç½®</span></span><br><span class="line">    <span class="built_in">this</span>.formData = &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">manager</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">introduce</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;update:showDialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.resetFields()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å°è£…å¹¶è°ƒç”¨ç¼–è¾‘æ¥å£"><a href="#å°è£…å¹¶è°ƒç”¨ç¼–è¾‘æ¥å£" class="headerlink" title="å°è£…å¹¶è°ƒç”¨ç¼–è¾‘æ¥å£"></a>å°è£…å¹¶è°ƒç”¨ç¼–è¾‘æ¥å£</h2><p>ğŸ¤” æ€è€ƒï¼šç‚¹å‡»ç¡®å®šæŒ‰é’®æ—¶ï¼Œå¦‚ä½•åŒºåˆ†æ˜¯æ–°å¢å’Œç¼–è¾‘ï¼Ÿ</p>
<ol>
<li>å°è£…ç¼–è¾‘éƒ¨é—¨æ¥å£ï¼Œ<code>api/departments.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¼–è¾‘éƒ¨é—¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updateDepartments</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> request(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/company/department/<span class="subst">$&#123;data.id&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;put&#x27;</span>,</span><br><span class="line">        data,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç‚¹å‡»ç¡®å®šæ—¶ï¼Œè¿›è¡Œåœºæ™¯åŒºåˆ†ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    updateDepartments</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api/departments&#x27;</span></span><br><span class="line"><span class="function"><span class="title">btnOK</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$refs.deptForm.validate(<span class="keyword">async</span> isOK =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (isOK) &#123;</span><br><span class="line">            <span class="comment">// è¦åˆ†æ¸…æ¥šç°åœ¨æ˜¯ç¼–è¾‘è¿˜æ˜¯æ–°å¢</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) &#123;</span><br><span class="line">                <span class="comment">// ç¼–è¾‘æ¨¡å¼ï¼Œè°ƒç”¨ç¼–è¾‘æ¥å£</span></span><br><span class="line">                <span class="keyword">await</span> updateDepartments(<span class="built_in">this</span>.formData)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// æ–°å¢æ¨¡å¼</span></span><br><span class="line">                <span class="keyword">await</span> addDepartments(&#123;</span><br><span class="line">                    ...this.formData,</span><br><span class="line">                    <span class="attr">pid</span>: <span class="built_in">this</span>.treeNode.id</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// å‘Šè¯‰çˆ¶ç»„ä»¶æ“ä½œæ•°æ®æˆåŠŸï¼Œé‡æ–°æ‹‰å–æ•°æ®</span></span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;addDepts&#x27;</span>)</span><br><span class="line">            <span class="comment">// å…³é—­å¼¹æ¡†</span></span><br><span class="line">            <span class="built_in">this</span>.$emit(<span class="string">&#x27;update:showDialog&#x27;</span>, <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯çš„æƒ…å†µ"><a href="#æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯çš„æƒ…å†µ" class="headerlink" title="æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯çš„æƒ…å†µ"></a>æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯çš„æƒ…å†µ</h2><p>å‘ç°åŸæ¥çš„æ ¡éªŒè§„åˆ™å’Œç¼–è¾‘éƒ¨é—¨æœ‰äº›å†²çªï¼Œæ‰€ä»¥éœ€è¦è¿›ä¸€æ­¥å¤„ç†ï¼Œ<code>views/departments/components/add-dept.vue</code>ã€‚</p>
<p>ğŸ¤” æ€è€ƒï¼šç¼–è¾‘æ—¶ name å’Œ code çš„æ ¡éªŒè§„åˆ™åº”è¯¥æ˜¯æ€æ ·çš„ï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> checkNameRepeat = <span class="keyword">async</span> (rule, value, callback) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        depts</span><br><span class="line">    &#125; = <span class="keyword">await</span> getDepartments()</span><br><span class="line">    <span class="keyword">let</span> isRepeat = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) &#123;</span><br><span class="line">        <span class="comment">// æ‰¾åŒçº§éƒ¨é—¨ï¼ˆè°çš„ pid å’Œå½“å‰çš„ä¸€æ ·çš„ï¼‰æœ‰æ²¡æœ‰é‡å¤çš„</span></span><br><span class="line">        isRepeat = depts.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> item.id !== <span class="built_in">this</span>.formData.id &amp;&amp; item.pid === <span class="built_in">this</span>.treeNode.pid).some(<span class="function">(<span class="params">item</span>) =&gt;</span> item.name === value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ‰¾å­éƒ¨é—¨ï¼ˆè°çš„ pid æ˜¯å½“å‰çš„ idï¼‰æœ‰æ²¡æœ‰é‡å¤çš„</span></span><br><span class="line">        isRepeat = depts.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> item.pid === <span class="built_in">this</span>.treeNode.id).some(<span class="function">(<span class="params">item</span>) =&gt;</span> item.name === value)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`åŒçº§éƒ¨é—¨ä¸‹å·²ç»æœ‰<span class="subst">$&#123;value&#125;</span>çš„éƒ¨é—¨äº†`</span>)) : callback()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> checkCodeRepeat = <span class="keyword">async</span> (rule, value, callback) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        depts</span><br><span class="line">    &#125; = <span class="keyword">await</span> getDepartments()</span><br><span class="line">    <span class="keyword">let</span> isRepeat = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.formData.id) &#123;</span><br><span class="line">        <span class="comment">// ç¼–è¾‘æ¨¡å¼</span></span><br><span class="line">        <span class="comment">// å› ä¸ºç¼–è¾‘æ¨¡å¼ä¸‹ï¼Œä¸èƒ½ç®—è‡ªå·±</span></span><br><span class="line">        isRepeat = depts.some(<span class="function">(<span class="params">item</span>) =&gt;</span> item.id !== <span class="built_in">this</span>.formData.id &amp;&amp; item.code === value &amp;&amp; value)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// æ–°å¢æ¨¡å¼</span></span><br><span class="line">        <span class="comment">// è¿™é‡ŒåŠ ä¸€ä¸ª value ä¸ä¸ºç©ºï¼Œå› ä¸ºæˆ‘ä»¬çš„éƒ¨é—¨æœ‰å¯èƒ½æ²¡æœ‰ code</span></span><br><span class="line">        isRepeat = depts.some(<span class="function">(<span class="params">item</span>) =&gt;</span> item.code === value &amp;&amp; value)</span><br><span class="line">    &#125;</span><br><span class="line">    isRepeat ? callback(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`ç»„ç»‡æ¶æ„ä¸­å·²ç»æœ‰éƒ¨é—¨ä½¿ç”¨<span class="subst">$&#123;value&#125;</span>ç¼–ç `</span>)) : callback()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œæ•´ä¸ªç»„ç»‡æ¶æ„ï¼Œæˆ‘ä»¬å®Œæˆäº†è¯»å– / æ–°å¢éƒ¨é—¨ / åˆ é™¤éƒ¨é—¨ / ç¼–è¾‘éƒ¨é—¨ï¼Œå¦‚å›¾ã€‚</p>
<p><img src="/resource/images/image-20200722134415195.png" alt="image-20200722134415195"></p>
<h2 id="ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡"><a href="#ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡" class="headerlink" title="ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡"></a>ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡</h2><h3 id="ç›®æ ‡-8"><a href="#ç›®æ ‡-8" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h3><p>ç”±äºè·å–æ•°æ®çš„å»¶è¿Ÿæ€§ï¼Œä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼Œå¯ä»¥åˆ©ç”¨ Element UI æä¾›çš„ v-loading æŒ‡ä»¤ç»™é¡µé¢åŠ ä¸€ä¸ªè¿›åº¦æç¤ºã€‚</p>
<h3 id="å†…å®¹-1"><a href="#å†…å®¹-1" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h3><ol>
<li>å®šä¹‰ loading å˜é‡ï¼Œ<code>views/departments/index.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">loading</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>è·å–æ•°æ®å‰åè®¾ç½®å˜é‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getDepartments</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.loading = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">const</span> result = <span class="keyword">await</span> getDepartments()</span><br><span class="line">    <span class="built_in">this</span>.departs = transListToTreeData(result.depts, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="built_in">this</span>.company = &#123;</span><br><span class="line">        <span class="attr">name</span>: result.companyName,</span><br><span class="line">        <span class="attr">manager</span>: <span class="string">&#x27;è´Ÿè´£äºº&#x27;</span>,</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.loading = <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>èµ‹å€¼å˜é‡ç»™ v-loading æŒ‡ä»¤ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span> <span class="attr">class</span>=<span class="string">&quot;departments-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/08/13/rz-base-course04/" rel="prev" title="04_äººèµ„åå°">
      <i class="fa fa-chevron-left"></i> 04_äººèµ„åå°
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/08/13/rz-base-course06/" rel="next" title="06_äººèµ„åå°">
      06_äººèµ„åå° <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E5%B8%83%E5%B1%80"><span class="nav-number">1.</span> <span class="nav-text">ç»„ç»‡æ¶æ„æ ‘å½¢ç»“æ„å¸ƒå±€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87"><span class="nav-number">1.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A4%E8%AF%86%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84"><span class="nav-number">1.2.</span> <span class="nav-text">è®¤è¯†ç»„ç»‡æ¶æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E7%9A%84%E5%A4%B4%E9%83%A8%E5%86%85%E5%AE%B9"><span class="nav-number">1.3.</span> <span class="nav-text">å®ç°ç»„ç»‡æ¶æ„çš„å¤´éƒ¨å†…å®¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%91%E5%BD%A2%E7%BB%84%E4%BB%B6%E8%AE%A4%E8%AF%86"><span class="nav-number">1.4.</span> <span class="nav-text">æ ‘å½¢ç»„ä»¶è®¤è¯†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%B9%E9%80%A0%E6%A0%91%E5%BD%A2%E7%BB%84%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">1.5.</span> <span class="nav-text">æ”¹é€ æ ‘å½¢ç»„ä»¶çš„æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%B9%E9%80%A0%E6%A0%91%E5%BD%A2%E7%BB%84%E4%BB%B6%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">1.6.</span> <span class="nav-text">æ”¹é€ æ ‘å½¢ç»„ä»¶çš„ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1"><span class="nav-number">1.7.</span> <span class="nav-text">ä»»åŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%86%E6%A0%91%E5%BD%A2%E4%B8%AD%E7%BB%93%E6%9E%84%E6%8A%BD%E7%A6%BB%E7%BB%84%E4%BB%B6"><span class="nav-number">2.</span> <span class="nav-text">å°†æ ‘å½¢ä¸­ç»“æ„æŠ½ç¦»ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E5%8D%95%E7%8B%AC%E7%9A%84%E6%A0%91%E7%BB%93%E6%9E%84%E7%BB%84%E4%BB%B6"><span class="nav-number">2.1.</span> <span class="nav-text">å°è£…å•ç‹¬çš„æ ‘ç»“æ„ç»„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E4%B8%AD%E5%BA%94%E7%94%A8%E7%BB%84%E4%BB%B6"><span class="nav-number">2.2.</span> <span class="nav-text">åœ¨ç»„ç»‡æ¶æ„ä¸­åº”ç”¨ç»„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E6%8C%89%E9%9C%80%E5%B1%95%E7%A4%BA%E6%93%8D%E4%BD%9C%E6%8C%89%E9%92%AE"><span class="nav-number">2.3.</span> <span class="nav-text">å¦‚ä½•æŒ‰éœ€å±•ç¤ºæ“ä½œæŒ‰é’®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E4%BF%AE%E6%94%B9%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE%E5%9B%BE%E6%A0%87"><span class="nav-number">2.4.</span> <span class="nav-text">é€šè¿‡ä¿®æ”¹æ ·å¼è®¾ç½®å›¾æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1-1"><span class="nav-number">2.5.</span> <span class="nav-text">ä»»åŠ¡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%8A%A0%E5%B7%A5%E7%BB%84%E7%BB%87%E6%9E%B6%E6%9E%84%E6%95%B0%E6%8D%AE"><span class="nav-number">3.</span> <span class="nav-text">è·å–åŠ å·¥ç»„ç»‡æ¶æ„æ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-1"><span class="nav-number">3.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85-API-%E6%8E%A5%E5%8F%A3"><span class="nav-number">3.2.</span> <span class="nav-text">å°è£… API æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86%E6%95%B0%E7%BB%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96%E6%88%90%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84"><span class="nav-number">3.3.</span> <span class="nav-text">å°†æ•°ç»„æ•°æ®è½¬åŒ–æˆæ ‘å½¢ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#array-to-tree"><span class="nav-number">3.4.</span> <span class="nav-text">array to tree</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9C%80%E6%B1%82"><span class="nav-number">3.4.1.</span> <span class="nav-text">éœ€æ±‚</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A1%AE%E5%AE%9A-ROOT-ID"><span class="nav-number">3.4.2.</span> <span class="nav-text">ç¡®å®š ROOT_ID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%BE-item-%E7%9A%84-children"><span class="nav-number">3.4.3.</span> <span class="nav-text">æ‰¾ item çš„ children</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%89%BE-item-%E7%9A%84-children-1"><span class="nav-number">3.4.4.</span> <span class="nav-text">æ‰¾ item çš„ children</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%92%E5%BD%92"><span class="nav-number">3.4.5.</span> <span class="nav-text">é€’å½’</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#performant-array-to-tree"><span class="nav-number">3.5.</span> <span class="nav-text">performant-array-to-tree</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD"><span class="nav-number">4.</span> <span class="nav-text">åˆ é™¤éƒ¨é—¨åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-2"><span class="nav-number">4.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.2.</span> <span class="nav-text">å°è£…åˆ é™¤éƒ¨é—¨æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E4%B8%8B%E6%8B%89%E8%8F%9C%E5%8D%95%E4%BA%8B%E4%BB%B6"><span class="nav-number">4.3.</span> <span class="nav-text">æ³¨å†Œä¸‹æ‹‰èœå•äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8%E6%8E%A5%E5%8F%A3"><span class="nav-number">4.4.</span> <span class="nav-text">è°ƒç”¨åˆ é™¤éƒ¨é—¨æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E7%9F%A5%E7%88%B6%E4%BA%B2%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="nav-number">4.5.</span> <span class="nav-text">é€šçŸ¥çˆ¶äº²æ›´æ–°æ•°æ®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD"><span class="nav-number">5.</span> <span class="nav-text">æ–°å¢éƒ¨é—¨åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-3"><span class="nav-number">5.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3"><span class="nav-number">5.2.</span> <span class="nav-text">å°è£…æ–°å¢æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA%E6%96%B0%E5%A2%9E%E5%BC%B9%E5%B1%82"><span class="nav-number">5.3.</span> <span class="nav-text">æ–°å»ºæ–°å¢å¼¹å±‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E6%98%BE%E7%A4%BA%E5%BC%B9%E5%B1%82"><span class="nav-number">5.4.</span> <span class="nav-text">ç‚¹å‡»æ˜¾ç¤ºå¼¹å±‚</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8%E6%A0%A1%E9%AA%8C"><span class="nav-number">6.</span> <span class="nav-text">æ–°å¢éƒ¨é—¨æ ¡éªŒ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-4"><span class="nav-number">6.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E6%94%B6%E9%9B%86%E5%92%8C%E5%9F%BA%E7%A1%80%E6%A0%A1%E9%AA%8C"><span class="nav-number">6.2.</span> <span class="nav-text">æ•°æ®æ”¶é›†å’ŒåŸºç¡€æ ¡éªŒ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E9%97%A8%E5%90%8D%E7%A7%B0%E5%92%8C%E9%83%A8%E9%97%A8%E7%BC%96%E7%A0%81"><span class="nav-number">6.3.</span> <span class="nav-text">éƒ¨é—¨åç§°å’Œéƒ¨é—¨ç¼–ç </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%84%E7%90%86%E9%A6%96%E9%83%A8%E5%86%85%E5%AE%B9%E7%9A%84-pid"><span class="nav-number">6.4.</span> <span class="nav-text">å¤„ç†é¦–éƒ¨å†…å®¹çš„ pid</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E9%83%A8%E9%97%A8%E8%B4%9F%E8%B4%A3%E4%BA%BA%E6%95%B0%E6%8D%AE"><span class="nav-number">7.</span> <span class="nav-text">è·å–éƒ¨é—¨è´Ÿè´£äººæ•°æ®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-5"><span class="nav-number">7.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AE%B9"><span class="nav-number">7.2.</span> <span class="nav-text">å†…å®¹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E5%8A%9F%E8%83%BD-%E6%8F%90%E4%BA%A4-%E5%8F%96%E6%B6%88"><span class="nav-number">8.</span> <span class="nav-text">æ–°å¢åŠŸèƒ½-æäº¤-å–æ¶ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-6"><span class="nav-number">8.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C%E9%80%9A%E8%BF%87%EF%BC%8C%E8%B0%83%E7%94%A8%E6%96%B0%E5%A2%9E%E6%8E%A5%E5%8F%A3"><span class="nav-number">8.2.</span> <span class="nav-text">æ ¡éªŒé€šè¿‡ï¼Œè°ƒç”¨æ–°å¢æ¥å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6%E5%85%B3%E9%97%AD%E5%BC%B9%E5%B1%82"><span class="nav-number">8.3.</span> <span class="nav-text">åˆ©ç”¨ sync ä¿®é¥°ç¬¦å…³é—­å¼¹å±‚</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%84%E5%86%99%E6%B3%95"><span class="nav-number">8.3.1.</span> <span class="nav-text">å¸¸è§„å†™æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A9%E7%94%A8-sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">8.3.2.</span> <span class="nav-text">åˆ©ç”¨ sync ä¿®é¥°ç¬¦</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%96%E6%B6%88%E6%97%B6%E9%87%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%92%8C%E6%A0%A1%E9%AA%8C"><span class="nav-number">8.4.</span> <span class="nav-text">å–æ¶ˆæ—¶é‡ç½®æ•°æ®å’Œæ ¡éªŒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E8%BE%91%E9%83%A8%E9%97%A8%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E5%9B%9E%E5%86%99"><span class="nav-number">9.</span> <span class="nav-text">ç¼–è¾‘éƒ¨é—¨åŠŸèƒ½å®ç°æ•°æ®å›å†™</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-7"><span class="nav-number">9.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE%E6%98%BE%E7%A4%BA%E7%BC%96%E8%BE%91%E5%BC%B9%E5%87%BA%E5%B1%82"><span class="nav-number">9.2.</span> <span class="nav-text">ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºç¼–è¾‘å¼¹å‡ºå±‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A1%AB%E5%85%85%E6%95%B0%E6%8D%AE"><span class="nav-number">9.3.</span> <span class="nav-text">å¡«å……æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E6%98%BE%E7%A4%BA%E6%8E%A7%E5%88%B6%E6%A0%87%E9%A2%98"><span class="nav-number">9.4.</span> <span class="nav-text">æ ¹æ®è®¡ç®—å±æ€§æ˜¾ç¤ºæ§åˆ¶æ ‡é¢˜</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E5%B9%B6%E8%B0%83%E7%94%A8%E7%BC%96%E8%BE%91%E6%8E%A5%E5%8F%A3"><span class="nav-number">10.</span> <span class="nav-text">å°è£…å¹¶è°ƒç”¨ç¼–è¾‘æ¥å£</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99%E6%94%AF%E6%8C%81%E7%BC%96%E8%BE%91%E5%9C%BA%E6%99%AF%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">11.</span> <span class="nav-text">æ ¡éªŒè§„åˆ™æ”¯æŒç¼–è¾‘åœºæ™¯çš„æƒ…å†µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%99%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E6%B7%BB%E5%8A%A0%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6%E6%9D%A1"><span class="nav-number">12.</span> <span class="nav-text">ç»™æ•°æ®è·å–æ·»åŠ åŠ è½½è¿›åº¦æ¡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E6%A0%87-8"><span class="nav-number">12.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E5%AE%B9-1"><span class="nav-number">12.2.</span> <span class="nav-text">å†…å®¹</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ifer"
      src="/images/49337922.png">
  <p class="site-author-name" itemprop="name">Ifer</p>
  <div class="site-description" itemprop="description">React å…¨å®¶æ¡¶ <span style='position:relative;top:-2px;'>âœ</span></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">60</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://www.bilibili.com/video/BV1iW4y1k7Ci?spm_id_from=333.337.search-card.all.click" title="ğŸ˜š â†’ https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1iW4y1k7Ci?spm_id_from&#x3D;333.337.search-card.all.click" rel="noopener" target="_blank"><i class="a fa-fw"></i>ğŸ˜š</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/weixiantx" title="ğŸ˜™ â†’ https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;weixiantx" rel="noopener" target="_blank"><i class="a fa-fw"></i>ğŸ˜™</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ifer</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
