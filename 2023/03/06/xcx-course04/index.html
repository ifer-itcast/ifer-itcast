<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="é¡¹ç›®ç›®æ ‡âœ” æŒæ¡é€šè¿‡ uni-app æŠ€æœ¯æ­å»ºé¡¹ç›®ã€‚ âœ” æŒæ¡é¡¹ç›®é¦–é¡µã€åˆ†ç±»ã€æœç´¢ã€å•†å“åˆ—è¡¨ã€å•†å“è¯¦æƒ…ã€è´­ç‰©è½¦ç­‰å¼€å‘ã€‚ âœ” æŒæ¡ç™»å½•å’Œæ”¯ä»˜çš„å¼€å‘æ€è·¯ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="04_å°ç¨‹åºå“ä¼˜è´­é¡¹ç›®">
<meta property="og:url" content="http://example.com/2023/03/06/xcx-course04/index.html">
<meta property="og:site_name" content="å±é™©">
<meta property="og:description" content="é¡¹ç›®ç›®æ ‡âœ” æŒæ¡é€šè¿‡ uni-app æŠ€æœ¯æ­å»ºé¡¹ç›®ã€‚ âœ” æŒæ¡é¡¹ç›®é¦–é¡µã€åˆ†ç±»ã€æœç´¢ã€å•†å“åˆ—è¡¨ã€å•†å“è¯¦æƒ…ã€è´­ç‰©è½¦ç­‰å¼€å‘ã€‚ âœ” æŒæ¡ç™»å½•å’Œæ”¯ä»˜çš„å¼€å‘æ€è·¯ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/resource/images/1-7.43264ae4.png">
<meta property="og:image" content="http://example.com/resource/images/1-1.74fed64c.png">
<meta property="og:image" content="http://example.com/resource/images/1-2.1c0c98c6.png">
<meta property="og:image" content="http://example.com/resource/images/1-3.b48ee161.png">
<meta property="og:image" content="http://example.com/resource/images/1-4.b7efec14.png">
<meta property="og:image" content="http://example.com/resource/images/Snipaste_2022-08-29_10-00-26.png">
<meta property="og:image" content="http://example.com/resource/images/Snipaste_2022-08-29_10-06-07.png">
<meta property="og:image" content="http://example.com/resource/images/1-8.4c14eb68.png">
<meta property="og:image" content="http://example.com/resource/images/1-9.deca7c09.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(7).png">
<meta property="og:image" content="http://example.com/resource/images/1-11.2637002b.png">
<meta property="og:image" content="http://example.com/resource/images/Snipaste_2022-08-29_10-25-25.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(8).png">
<meta property="og:image" content="http://example.com/resource/images/image%20(9).png">
<meta property="og:image" content="http://example.com/resource/images/xxxs.png">
<meta property="og:image" content="http://example.com/resource/images/title_xxx.png">
<meta property="og:image" content="http://example.com/resource/images/floor_content.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(10).png">
<meta property="og:image" content="http://example.com/resource/images/5-1.25ab714d.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(11).png">
<meta property="og:image" content="http://example.com/resource/images/6-2.6a66124f.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(12).png">
<meta property="og:image" content="http://example.com/resource/images/7-2.82dd8e0f.png">
<meta property="og:image" content="http://example.com/resource/images/gwx_bottom.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(13).png">
<meta property="og:image" content="http://example.com/resource/images/image%20(14).png">
<meta property="og:image" content="http://example.com/resource/images/image%20(15).png">
<meta property="og:image" content="http://example.com/resource/images/9-3.d168684c.png">
<meta property="og:image" content="http://example.com/resource/images/9-4.1739d570.png">
<meta property="og:image" content="http://example.com/resource/images/10-1.46e30c32.png">
<meta property="og:image" content="http://example.com/resource/images/10-2.ace63114.png">
<meta property="og:image" content="http://example.com/resource/images/11-1.9cdf19c7.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(18).png">
<meta property="og:image" content="http://example.com/resource/images/11-3.567c1979.png">
<meta property="og:image" content="http://example.com/resource/images/11-4.9c24f0ee.png">
<meta property="og:image" content="http://example.com/resource/images/image%20(19).png">
<meta property="og:image" content="http://example.com/resource/images/11-6.d5c408c3.png">
<meta property="og:image" content="http://example.com/resource/images/11-7.ec9045bc.png">
<meta property="og:image" content="http://example.com/resource/images/11-8.a251f8b8.png">
<meta property="article:published_time" content="2023-03-06T10:10:09.000Z">
<meta property="article:modified_time" content="2023-05-11T07:42:51.616Z">
<meta property="article:author" content="Ifer">
<meta property="article:tag" content="React,Redux,Mobx,Saga,Dva,Umi,AntD,TS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/resource/images/1-7.43264ae4.png">

<link rel="canonical" href="http://example.com/2023/03/06/xcx-course04/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>04_å°ç¨‹åºå“ä¼˜è´­é¡¹ç›® | å±é™©</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">å±é™©</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">ä¸ºä¹‹åˆ™æ˜“ï¼Œä¸ä¸ºåˆ™éš¾</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/03/06/xcx-course04/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/49337922.png">
      <meta itemprop="name" content="Ifer">
      <meta itemprop="description" content="React å…¨å®¶æ¡¶ <span style='position:relative;top:-2px;'>âœ</span>">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å±é™©">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          04_å°ç¨‹åºå“ä¼˜è´­é¡¹ç›®
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-03-06 18:10:09" itemprop="dateCreated datePublished" datetime="2023-03-06T18:10:09+08:00">2023-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-05-11 15:42:51" itemprop="dateModified" datetime="2023-05-11T15:42:51+08:00">2023-05-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="é¡¹ç›®ç›®æ ‡"><a href="#é¡¹ç›®ç›®æ ‡" class="headerlink" title="é¡¹ç›®ç›®æ ‡"></a>é¡¹ç›®ç›®æ ‡</h1><p>âœ” æŒæ¡é€šè¿‡ uni-app æŠ€æœ¯æ­å»ºé¡¹ç›®ã€‚</p>
<p>âœ” æŒæ¡é¡¹ç›®é¦–é¡µã€åˆ†ç±»ã€æœç´¢ã€å•†å“åˆ—è¡¨ã€å•†å“è¯¦æƒ…ã€è´­ç‰©è½¦ç­‰å¼€å‘ã€‚</p>
<p>âœ” æŒæ¡ç™»å½•å’Œæ”¯ä»˜çš„å¼€å‘æ€è·¯ã€‚</p>
<span id="more"></span>

<h1 id="é¡¹ç›®æ¦‚è¿°"><a href="#é¡¹ç›®æ¦‚è¿°" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h1><h2 id="é¡¹ç›®æ¦‚è¿°-1"><a href="#é¡¹ç›®æ¦‚è¿°-1" class="headerlink" title="é¡¹ç›®æ¦‚è¿°"></a>é¡¹ç›®æ¦‚è¿°</h2><ul>
<li>  åŸºäº uni-app å¼€å‘çš„å¾®ä¿¡å°ç¨‹åºå•†åŸé¡¹ç›®ã€‚</li>
</ul>
<!-- -   åŸç‰ˆæ–‡æ¡£ï¼šhttps://www.escook.cn/docs-uni-shop/ -->

<ul>
<li>  æ¥å£è¯´æ˜ï¼š<a target="_blank" rel="noopener" href="https://www.showdoc.com.cn/128719739414963">https://www.showdoc.com.cn/128719739414963</a></li>
</ul>
<h2 id="é¡¹ç›®æ¦‚è§ˆ"><a href="#é¡¹ç›®æ¦‚è§ˆ" class="headerlink" title="é¡¹ç›®æ¦‚è§ˆ"></a>é¡¹ç›®æ¦‚è§ˆ</h2><p>é¦–é¡µã€åˆ†ç±»ã€è´­ç‰©è½¦ã€æˆ‘çš„ã€æœç´¢ã€å•†å“åˆ—è¡¨ã€å•†å“è¯¦æƒ…ã€å¾®ä¿¡æ”¯ä»˜ã€‚</p>
<p>å›¾ç‰‡å‚è€ƒï¼š<code>xcx_doc =&gt; files =&gt; å°ç¨‹åºé¡¹ç›® =&gt; é¢„è§ˆ</code>ã€‚</p>
<h3 id="æŠ€æœ¯æ ˆ"><a href="#æŠ€æœ¯æ ˆ" class="headerlink" title="æŠ€æœ¯æ ˆ"></a>æŠ€æœ¯æ ˆ</h3><ol>
<li><p>å¼€å‘æ¡†æ¶ï¼šuni-appã€‚</p>
</li>
<li><p>ui ç»„ä»¶åº“ï¼šuni-uiã€‚</p>
</li>
<li><p>ç½‘ç»œè¯·æ±‚ï¼š@escook/request-miniprogramã€‚</p>
</li>
<li><p>çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†ï¼švuexã€‚</p>
</li>
<li><p>å¼€å‘å·¥å…·ï¼šHBuilderXã€‚</p>
</li>
</ol>
<h1 id="é¡¹ç›®èµ·æ­¥"><a href="#é¡¹ç›®èµ·æ­¥" class="headerlink" title="é¡¹ç›®èµ·æ­¥"></a>é¡¹ç›®èµ·æ­¥</h1><h2 id="uni-app-ç®€ä»‹"><a href="#uni-app-ç®€ä»‹" class="headerlink" title="uni-app ç®€ä»‹"></a>uni-app ç®€ä»‹</h2><p>uni-app æ˜¯ä¸€ä¸ªä½¿ç”¨ Vue.js å¼€å‘æ‰€æœ‰å‰ç«¯åº”ç”¨çš„æ¡†æ¶ï¼Œå¼€å‘è€…ç¼–å†™ä¸€å¥—ä»£ç ï¼Œå¯å‘å¸ƒåˆ° iOSã€Androidã€H5ã€ä»¥åŠå„ç§å°ç¨‹åºï¼ˆå¾®ä¿¡/æ”¯ä»˜å®/ç™¾åº¦/å¤´æ¡/QQ/é’‰é’‰/æ·˜å®ï¼‰ã€å¿«åº”ç”¨ç­‰å¤šä¸ªå¹³å°ã€‚</p>
<img src="/resource/images/1-7.43264ae4.png" />

<p>è¯¦ç»†çš„ uni-app å®˜æ–¹æ–‡æ¡£ï¼Œè¯·ç¿»é˜…ï¼Œ<a target="_blank" rel="noopener" href="https://uniapp.dcloud.net.cn/">https://uniapp.dcloud.net.cn/</a></p>
<h2 id="å¼€å‘å·¥å…·ä¸‹è½½"><a href="#å¼€å‘å·¥å…·ä¸‹è½½" class="headerlink" title="å¼€å‘å·¥å…·ä¸‹è½½"></a>å¼€å‘å·¥å…·ä¸‹è½½</h2><p>uni-app å®˜æ–¹æ¨èä½¿ç”¨ HBuilderX æ¥å¼€å‘ uni-app ç±»å‹çš„é¡¹ç›®ï¼Œä¸»è¦å¥½å¤„ï¼šæ¨¡æ¿ä¸°å¯Œã€å®Œå–„çš„æ™ºèƒ½æç¤ºã€ä¸€é”®è¿è¡Œï¼Œå½“ç„¶ï¼Œä½ ä¾ç„¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œé€‰æ‹©ä½¿ç”¨ VS Codeã€Sublime ç­‰è‡ªå·±å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼</p>
<h2 id="ä¸‹è½½-HBuilder"><a href="#ä¸‹è½½-HBuilder" class="headerlink" title="ä¸‹è½½ HBuilder"></a>ä¸‹è½½ HBuilder</h2><p>è®¿é—® HBuilderX çš„å®˜ç½‘é¦–é¡µï¼Œé€‰æ‹©ä¸‹è½½ <a target="_blank" rel="noopener" href="https://www.dcloud.io/hbuilderx.html">æ­£å¼ç‰ˆ</a> ä¸‹è½½å³å¯ã€‚</p>
<h2 id="å®‰è£…-HBuilder"><a href="#å®‰è£…-HBuilder" class="headerlink" title="å®‰è£… HBuilder"></a>å®‰è£… HBuilder</h2><ol>
<li><p>å°†ä¸‹è½½çš„ zip åŒ…è¿›è¡Œè§£å‹ç¼©ã€‚</p>
</li>
<li><p>å°†è§£å‹ä¹‹åçš„æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾åˆ°çº¯è‹±æ–‡çš„ç›®å½•ä¸­ï¼ˆä¸”ä¸èƒ½åŒ…å«æ‹¬å·ç­‰ç‰¹æ®Šå­—ç¬¦ï¼‰ï¼Œæ¯”å¦‚ï¼š<code>D:\Soft\HBuilderX</code>ã€‚</p>
</li>
<li><p>åŒå‡» HBuilderX.exe å³å¯å¯åŠ¨ã€‚</p>
</li>
</ol>
<h2 id="å¼€å‘è€…å·¥å…·çš„é…ç½®"><a href="#å¼€å‘è€…å·¥å…·çš„é…ç½®" class="headerlink" title="å¼€å‘è€…å·¥å…·çš„é…ç½®"></a>å¼€å‘è€…å·¥å…·çš„é…ç½®</h2><h3 id="å®‰è£…-Sass"><a href="#å®‰è£…-Sass" class="headerlink" title="å®‰è£… Sass"></a>å®‰è£… Sass</h3><ol>
<li><p>ä¸ºäº†æ–¹ä¾¿ç¼–å†™æ ·å¼ï¼Œå»ºè®®å®‰è£… scss/sass ç¼–è¯‘ æ’ä»¶ï¼ˆæ–°ç‰ˆæœ¬çš„å¼€å‘å·¥å…·å·²ç»ä¸éœ€è¦æ‰‹åŠ¨å®‰è£…äº†ï¼‰ï¼Œ<a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?name=compile-node-sass">ä¸‹è½½åœ°å€</a>ã€‚</p>
</li>
<li><p>è¿›å…¥æ’ä»¶ä¸‹è½½é¡µé¢ä¹‹åï¼Œç‚¹å‡»å³ä¸Šè§’çš„ ä½¿ç”¨ HBuilderX å¯¼å…¥æ’ä»¶ æŒ‰é’®è¿›è¡Œè‡ªåŠ¨å®‰è£…ï¼Œæˆªå›¾å¦‚ä¸‹ã€‚</p>
</li>
</ol>
<img src="/resource/images/1-1.74fed64c.png"/>

<h3 id="å¿«æ·é”®æ–¹æ¡ˆåˆ‡æ¢"><a href="#å¿«æ·é”®æ–¹æ¡ˆåˆ‡æ¢" class="headerlink" title="å¿«æ·é”®æ–¹æ¡ˆåˆ‡æ¢"></a>å¿«æ·é”®æ–¹æ¡ˆåˆ‡æ¢</h3><p>æ“ä½œæ­¥éª¤ï¼šå·¥å…· -&gt; é¢„è®¾å¿«æ·é”®æ–¹æ¡ˆåˆ‡æ¢ -&gt; VSCodeã€‚</p>
<img src="/resource/images/1-2.1c0c98c6.png"/>

<h3 id="ä¿®æ”¹ç¼–è¾‘å™¨è®¾ç½®"><a href="#ä¿®æ”¹ç¼–è¾‘å™¨è®¾ç½®" class="headerlink" title="ä¿®æ”¹ç¼–è¾‘å™¨è®¾ç½®"></a>ä¿®æ”¹ç¼–è¾‘å™¨è®¾ç½®</h3><p>æ“ä½œæ­¥éª¤ï¼šå·¥å…· -&gt; è®¾ç½® -&gt; æºç è§†å›¾ -&gt; æ‰“å¼€ Settings.json æŒ‰éœ€è¿›è¡Œé…ç½®ã€‚</p>
<img src="/resource/images/1-3.b48ee161.png"/>

<p>å‚è€ƒå¦‚ä¸‹ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;editor.tabSize&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;editor.wordWrap&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;explorer.iconTheme&quot;</span>: <span class="string">&quot;vs-seti&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ–°å»º-uni-app-é¡¹ç›®"><a href="#æ–°å»º-uni-app-é¡¹ç›®" class="headerlink" title="æ–°å»º uni-app é¡¹ç›®"></a>æ–°å»º uni-app é¡¹ç›®</h2><h3 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h3><p>æ–‡ä»¶ -&gt; æ–°å»º -&gt; é¡¹ç›®ã€‚</p>
<img src="/resource/images/1-4.b7efec14.png"/>

<h3 id="å¡«å†™ä¿¡æ¯"><a href="#å¡«å†™ä¿¡æ¯" class="headerlink" title="å¡«å†™ä¿¡æ¯"></a>å¡«å†™ä¿¡æ¯</h3><img src="/resource/images/Snipaste_2022-08-29_10-00-26.png"/>

<h3 id="åˆ›å»ºæˆåŠŸ"><a href="#åˆ›å»ºæˆåŠŸ" class="headerlink" title="åˆ›å»ºæˆåŠŸ"></a>åˆ›å»ºæˆåŠŸ</h3><img src="/resource/images/Snipaste_2022-08-29_10-06-07.png"/>

<h2 id="uni-app-ç›®å½•ç»“æ„"><a href="#uni-app-ç›®å½•ç»“æ„" class="headerlink" title="uni-app ç›®å½•ç»“æ„"></a>uni-app ç›®å½•ç»“æ„</h2><p><a target="_blank" rel="noopener" href="https://uniapp.dcloud.net.cn/tutorial/project.html">å®˜ç½‘è¯´æ˜</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€.hbuilderx <span class="comment"># ç¼–è¾‘å™¨é…ç½®ä¿¡æ¯</span></span><br><span class="line">â”œâ”€App.vue <span class="comment"># æ ¹ç»„ä»¶</span></span><br><span class="line">â”œâ”€index.html <span class="comment"># æ¨¡æ¿æ–‡ä»¶</span></span><br><span class="line">â”œâ”€main.js <span class="comment"># é¡¹ç›®å…¥å£æ–‡ä»¶</span></span><br><span class="line">â”œâ”€manifest.json <span class="comment"># é…ç½®åº”ç”¨åç§°ã€appidã€logoã€ç‰ˆæœ¬ç­‰æ‰“åŒ…ä¿¡æ¯</span></span><br><span class="line">â”œâ”€pages.json <span class="comment"># é…ç½®é¡µé¢è·¯å¾„ã€é¡µé¢çª—å£æ ·å¼ã€tabBarã€navigationBar ç­‰é¡µé¢ç±»ä¿¡æ¯</span></span><br><span class="line">â”œâ”€uni.scss <span class="comment"># uni-app å†…ç½®çš„å¸¸ç”¨æ ·å¼å˜é‡</span></span><br><span class="line">â”œâ”€pages <span class="comment"># ä¸šåŠ¡é¡µé¢æ–‡ä»¶å­˜æ”¾çš„ç›®å½•</span></span><br><span class="line">â”‚  â””â”€index</span><br><span class="line">â”œâ”€static <span class="comment"># å­˜æ”¾åº”ç”¨å¼•ç”¨é™æ€èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰çš„ç›®å½•ï¼Œæ³¨æ„ï¼šé™æ€èµ„æºåªèƒ½å­˜æ”¾äºæ­¤</span></span><br><span class="line">â”œâ”€uni_modules <span class="comment"># uni-ui ç»„ä»¶åº“</span></span><br><span class="line">â””â”€unpackage <span class="comment"># ç¼–è¯‘åçš„ä»£ç </span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>  ç¼–è¯‘åˆ°ä»»æ„å¹³å°æ—¶ï¼Œstatic ç›®å½•ä¸‹çš„æ–‡ä»¶å‡ä¼šè¢«å®Œæ•´æ‰“åŒ…è¿›å»ï¼Œä¸”ä¸ä¼šç¼–è¯‘ï¼Œé static ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆvueã€jsã€css ç­‰ï¼‰åªæœ‰è¢«å¼•ç”¨åˆ°æ‰ä¼šè¢«æ‰“åŒ…ç¼–è¯‘è¿›å»ã€‚</p>
</li>
<li><p>  static ç›®å½•ä¸‹çš„ JS æ–‡ä»¶ä¸ä¼šè¢«ç¼–è¯‘ï¼Œå¦‚æœé‡Œé¢æœ‰ ES6 çš„ä»£ç ï¼Œä¸ä¼šç»è¿‡è½¬æ¢ç›´æ¥è¿è¡Œï¼Œåœ¨æ‰‹æœºè®¾å¤‡ä¸Šå¯èƒ½ä¼šæŠ¥é”™ã€‚</p>
</li>
<li><p>  cssã€less/scss ç­‰èµ„æºä¸è¦æ”¾åœ¨ static ç›®å½•ä¸‹ï¼Œå»ºè®®è¿™äº›å…¬ç”¨çš„èµ„æºæ”¾åœ¨è‡ªå»ºçš„ common ç›®å½•ä¸‹ã€‚</p>
</li>
</ul>
<h2 id="å¾®ä¿¡å·¥å…·é¢„è§ˆé¡¹ç›®"><a href="#å¾®ä¿¡å·¥å…·é¢„è§ˆé¡¹ç›®" class="headerlink" title="å¾®ä¿¡å·¥å…·é¢„è§ˆé¡¹ç›®"></a>å¾®ä¿¡å·¥å…·é¢„è§ˆé¡¹ç›®</h2><h3 id="å¡«å†™-AppID"><a href="#å¡«å†™-AppID" class="headerlink" title="å¡«å†™ AppID"></a>å¡«å†™ AppID</h3><p>å¡«å†™è‡ªå·±çš„å¾®ä¿¡å°ç¨‹åºçš„ AppIDï¼Œ<code>wxfb52f2d7b2f6123a</code>ã€‚</p>
<img src="/resource/images/1-8.4c14eb68.png"/>

<p>å¦‚æœä¸å¡«å†™ AppID ï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·å¯èƒ½ä¼šæŠ¥é”™ï¼šTypeError: Cannot read property â€˜forceUpdateâ€™ of undefinedã€‚</p>
<h3 id="é…ç½®å·¥å…·è·¯å¾„"><a href="#é…ç½®å·¥å…·è·¯å¾„" class="headerlink" title="é…ç½®å·¥å…·è·¯å¾„"></a>é…ç½®å·¥å…·è·¯å¾„</h3><p>åœ¨ HBuilder ä¸­é…ç½®å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„è·¯å¾„åœ°å€ã€‚</p>
<img src="/resource/images/1-9.deca7c09.png"/>

<h3 id="å¼€å¯æœåŠ¡ç«¯å£"><a href="#å¼€å¯æœåŠ¡ç«¯å£" class="headerlink" title="å¼€å¯æœåŠ¡ç«¯å£"></a>å¼€å¯æœåŠ¡ç«¯å£</h3><p>å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œé€šè¿‡ è®¾ç½® -&gt; å®‰å…¨è®¾ç½® é¢æ¿ï¼Œå¼€å¯â€œå¾®ä¿¡å¼€å‘è€…å·¥å…·â€çš„æœåŠ¡ç«¯å£ã€‚</p>
<img src="/resource/images/image (7).png"/>

<h3 id="å¯åŠ¨é¢„è§ˆé¡¹ç›®"><a href="#å¯åŠ¨é¢„è§ˆé¡¹ç›®" class="headerlink" title="å¯åŠ¨é¢„è§ˆé¡¹ç›®"></a>å¯åŠ¨é¢„è§ˆé¡¹ç›®</h3><p>åœ¨ HBuilderX ä¸­ï¼Œç‚¹å‡»èœå•æ ä¸­çš„ è¿è¡Œ -&gt; è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ -&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå°†å½“å‰ uni-app é¡¹ç›®ç¼–è¯‘ä¹‹åï¼Œè‡ªåŠ¨è¿è¡Œåˆ°å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œä»è€Œæ–¹ä¾¿æŸ¥çœ‹é¡¹ç›®æ•ˆæœä¸è°ƒè¯•ã€‚</p>
<img src="/resource/images/1-11.2637002b.png"/>

<h3 id="è¿è¡ŒæˆåŠŸæ•ˆæœ"><a href="#è¿è¡ŒæˆåŠŸæ•ˆæœ" class="headerlink" title="è¿è¡ŒæˆåŠŸæ•ˆæœ"></a>è¿è¡ŒæˆåŠŸæ•ˆæœ</h3><img src="/resource/images/Snipaste_2022-08-29_10-25-25.png"/>

<h2 id="ä½¿ç”¨-Git-ç®¡ç†é¡¹ç›®"><a href="#ä½¿ç”¨-Git-ç®¡ç†é¡¹ç›®" class="headerlink" title="ä½¿ç”¨ Git ç®¡ç†é¡¹ç›®"></a>ä½¿ç”¨ Git ç®¡ç†é¡¹ç›®</h2><h3 id="åˆ›å»º-gitignore"><a href="#åˆ›å»º-gitignore" class="headerlink" title="åˆ›å»º .gitignore"></a>åˆ›å»º .gitignore</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¿½ç•¥ node_modules ç›®å½•</span></span><br><span class="line">/node_modules</span><br><span class="line">/unpackage/dist</span><br><span class="line">/.hbuilderx</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MacOS è¿˜è¦å¿½ç•¥ .DS_Store æ–‡ä»¶</span></span><br><span class="line">.DS_Store</span><br></pre></td></tr></table></figure>

<h3 id="åˆå§‹åŒ–æœ¬åœ°-Git-ä»“åº“"><a href="#åˆå§‹åŒ–æœ¬åœ°-Git-ä»“åº“" class="headerlink" title="åˆå§‹åŒ–æœ¬åœ° Git ä»“åº“"></a>åˆå§‹åŒ–æœ¬åœ° Git ä»“åº“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ åˆ°æš‚å­˜åŒº"><a href="#æ·»åŠ åˆ°æš‚å­˜åŒº" class="headerlink" title="æ·»åŠ åˆ°æš‚å­˜åŒº"></a>æ·»åŠ åˆ°æš‚å­˜åŒº</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br></pre></td></tr></table></figure>

<h3 id="æœ¬åœ°æäº¤é¡¹ç›®"><a href="#æœ¬åœ°æäº¤é¡¹ç›®" class="headerlink" title="æœ¬åœ°æäº¤é¡¹ç›®"></a>æœ¬åœ°æäº¤é¡¹ç›®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -m <span class="string">&quot;init project&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="é¡¹ç›®æ‰˜ç®¡ç äº‘"><a href="#é¡¹ç›®æ‰˜ç®¡ç äº‘" class="headerlink" title="é¡¹ç›®æ‰˜ç®¡ç äº‘"></a>é¡¹ç›®æ‰˜ç®¡ç äº‘</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin https://gitee.com/ifercarly/uni-47.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<!-- 1. æ³¨å†Œå¹¶æ¿€æ´»ç äº‘è´¦å·ï¼ˆæ³¨å†Œé¡µé¢åœ°å€ï¼šhttps://gitee.com/signupï¼‰ã€‚

2. ç”Ÿæˆå¹¶é…ç½® SSH å…¬é’¥(windows ä¸‹ c ç›˜ä¸‹çš„â€œç”¨æˆ·â€æ–‡ä»¶å¤¹ä¸‹.ssh ç›®å½•)ã€‚

   git å¤šè´¦æˆ·è§£å†³åŠæ³•
   1ã€https://www.cnblogs.com/rysinal/p/6381874.html å¤šè´¦æˆ·é…ç½®
   2ã€ä¸»è´¦æˆ·ä½¿ç”¨ sshï¼Œå…¶å®ƒè´¦æˆ·ä½¿ç”¨ https
   git remote add origin git@gitee.com:ycomputer/uni-shop1.git
   git push -u origin master
   ä¿®æ”¹ä¸º
   git remote add origin https://gitee.com/ycomputer/uni-shop1.git
   git push -u origin master
3. åˆ›å»ºç©ºç™½çš„ç äº‘ä»“åº“
4. æŠŠæœ¬åœ°é¡¹ç›®ä¸Šä¼ åˆ°ç äº‘å¯¹åº”çš„ç©ºç™½ä»“åº“ä¸­ -->

<h1 id="TabBar"><a href="#TabBar" class="headerlink" title="TabBar"></a>TabBar</h1><h2 id="åˆ›å»º-TabBar-å¯¹åº”é¡µé¢"><a href="#åˆ›å»º-TabBar-å¯¹åº”é¡µé¢" class="headerlink" title="åˆ›å»º TabBar å¯¹åº”é¡µé¢"></a>åˆ›å»º TabBar å¯¹åº”é¡µé¢</h2><p>åœ¨ pages ç›®å½•ä¸­ï¼Œåˆ›å»ºé¦–é¡µï¼ˆhomeï¼‰ã€åˆ†ç±»ï¼ˆcateï¼‰ã€è´­ç‰©è½¦ï¼ˆcartï¼‰ã€æˆ‘çš„ï¼ˆmyï¼‰ è¿™ 4 ä¸ª tabBar é¡µé¢ã€‚åœ¨ HBuilderX ä¸­ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„ä¸¤ä¸ªæ­¥éª¤ï¼Œå¿«é€Ÿæ–°å»ºé¡µé¢ã€‚</p>
<ol>
<li><p>åœ¨ pages ç›®å½•ä¸Šé¼ æ ‡å³é”®ï¼Œé€‰æ‹©æ–°å»ºé¡µé¢ã€‚</p>
</li>
<li><p>åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå¡«å†™é¡µé¢çš„åç§°ã€å‹¾é€‰ scss æ¨¡æ¿ä¹‹åï¼Œç‚¹å‡»åˆ›å»ºæŒ‰é’®ï¼Œæˆªå›¾å¦‚ä¸‹ã€‚</p>
</li>
</ol>
<img src="/resource/images/image (8).png"/>

<h2 id="åˆ é™¤é»˜è®¤çš„-index-é¦–é¡µ"><a href="#åˆ é™¤é»˜è®¤çš„-index-é¦–é¡µ" class="headerlink" title="åˆ é™¤é»˜è®¤çš„ index é¦–é¡µ"></a>åˆ é™¤é»˜è®¤çš„ index é¦–é¡µ</h2><ol>
<li><p>åœ¨ HBuilderX ä¸­ï¼ŒæŠŠ pages ç›®å½•ä¸‹çš„ index é¦–é¡µæ–‡ä»¶å¤¹åˆ æ‰ï¼ŒåŒæ—¶æŠŠ <code>page.json</code> ä¸­è®°å½•çš„ index è·¯å¾„åˆ é™¤æ‰ã€‚</p>
</li>
<li><p>åœ¨ HBuilderX ä¸­çš„è¿è¡Œ -&gt; å°ç¨‹åºæ¨¡æ‹Ÿå™¨ -&gt; åœæ­¢ï¼Œç„¶åé‡æ–°å¯åŠ¨è¿è¡Œã€‚</p>
</li>
</ol>
<h2 id="é…ç½®-TabBar-å¯¹åº”ä¿¡æ¯"><a href="#é…ç½®-TabBar-å¯¹åº”ä¿¡æ¯" class="headerlink" title="é…ç½® TabBar å¯¹åº”ä¿¡æ¯"></a>é…ç½® TabBar å¯¹åº”ä¿¡æ¯</h2><ol>
<li><p>æ‹·è´ <code>xcx_doc/files/å°ç¨‹åºé¡¹ç›®/ç´ æ</code> ä¸­çš„å†…å®¹åˆ°é¡¹ç›®çš„ static æ–‡ä»¶ä¸­ï¼ŒåŸæ¥ customicons.css customicons.ttf ç»§ç»­ä¿ç•™ã€‚</p>
</li>
<li><p>ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸­çš„ <code>pages.json</code> é…ç½®æ–‡ä»¶ï¼Œæ–°å¢ tabBar çš„é…ç½®èŠ‚ç‚¹å¦‚ä¸‹ï¼ˆæ³¨æ„æ˜¯åœ¨ HBuilder ä¸­çš„é¡¹ç›®ä¸­å†™ä¸‹é¢çš„è¿™äº›é…ç½®ï¼Œä¸æ˜¯åœ¨å°ç¨‹åºå¼€å‘å·¥å…·ä¸­ï¼‰ã€‚</p>
</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;tabBar&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;selectedColor&quot;</span>: <span class="string">&quot;#C00000&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;list&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/home/home&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;é¦–é¡µ&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;iconPath&quot;</span>: <span class="string">&quot;static/tab_icons/home.png&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;static/tab_icons/home-active.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/cate/cate&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;åˆ†ç±»&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;iconPath&quot;</span>: <span class="string">&quot;static/tab_icons/cate.png&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;static/tab_icons/cate-active.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/cart/cart&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;è´­ç‰©è½¦&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;iconPath&quot;</span>: <span class="string">&quot;static/tab_icons/cart.png&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;static/tab_icons/cart-active.png&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;pagePath&quot;</span>: <span class="string">&quot;pages/my/my&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;æˆ‘çš„&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;iconPath&quot;</span>: <span class="string">&quot;static/tab_icons/my.png&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;selectedIconPath&quot;</span>: <span class="string">&quot;static/tab_icons/my-active.png&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹å¯¼èˆªæ¡çš„æ ·å¼æ•ˆæœ"><a href="#ä¿®æ”¹å¯¼èˆªæ¡çš„æ ·å¼æ•ˆæœ" class="headerlink" title="ä¿®æ”¹å¯¼èˆªæ¡çš„æ ·å¼æ•ˆæœ"></a>ä¿®æ”¹å¯¼èˆªæ¡çš„æ ·å¼æ•ˆæœ</h2><ol>
<li><p>æ‰“å¼€ <code>pages.json</code> è¿™ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ã€‚</p>
</li>
<li><p>ä¿®æ”¹ globalStyle èŠ‚ç‚¹å¦‚ä¸‹ã€‚</p>
</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;globalStyle&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;navigationBarTextStyle&quot;</span>: <span class="string">&quot;white&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;navigationBarTitleText&quot;</span>: <span class="string">&quot;é»‘é©¬ä¼˜è´­&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;navigationBarBackgroundColor&quot;</span>: <span class="string">&quot;#C00000&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;backgroundColor&quot;</span>: <span class="string">&quot;#FFFFFF&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><font color=e32d40><strong>3. æ³¨æ„ä¸è¦å¿˜äº†æŠŠ pages é…ç½®é¡¹ä¸­é»˜è®¤çš„ navigationBarTitleText åˆ æ‰ã€‚</strong></font></p>
<h1 id="é¡¹ç›®é¦–é¡µ"><a href="#é¡¹ç›®é¦–é¡µ" class="headerlink" title="é¡¹ç›®é¦–é¡µ"></a>é¡¹ç›®é¦–é¡µ</h1><h2 id="é…ç½®ç½‘ç»œè¯·æ±‚"><a href="#é…ç½®ç½‘ç»œè¯·æ±‚" class="headerlink" title="é…ç½®ç½‘ç»œè¯·æ±‚"></a>é…ç½®ç½‘ç»œè¯·æ±‚</h2><p>ç”±äºå¹³å°çš„é™åˆ¶ï¼Œå°ç¨‹åºé¡¹ç›®ä¸­ä¸æ”¯æŒ axiosï¼Œè€Œä¸”åŸç”Ÿçš„ <code>wx.request()</code> API åŠŸèƒ½è¾ƒä¸ºç®€å•ï¼Œä¸æ”¯æŒæ‹¦æˆªå™¨ç­‰å…¨å±€å®šåˆ¶çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œå»ºè®®åœ¨ uni-app é¡¹ç›®ä¸­ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/@escook/request-miniprogram">@escook/request-miniprogram</a> ç¬¬ä¸‰æ–¹åŒ…å‘èµ·ç½‘ç»œæ•°æ®è¯·æ±‚ã€‚</p>
<ol start="0">
<li>å®‰è£… <code>@escook/request-miniprogram</code>ã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br><span class="line">npm i @escook/request-miniprogram</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º common æ–‡ä»¶å¤¹ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»º <code>request.js</code> æ–‡ä»¶ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†è¯·æ±‚ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; $http &#125; <span class="keyword">from</span> <span class="string">&#x27;@escook/request-miniprogram&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®è¯·æ±‚æ ¹è·¯å¾„</span></span><br><span class="line">$http.baseUrl = <span class="string">&#x27;https://api-hmugo-web.itheima.net/api/public/v1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚å¼€å§‹ä¹‹å‰</span></span><br><span class="line">$http.beforeRequest = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    uni.showLoading(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ•°æ®åŠ è½½ä¸­...&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚å®Œæˆä¹‹å</span></span><br><span class="line">$http.afterRequest = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    uni.hideLoading()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†$httpæŒ‚è½½åˆ°uniå…¨å±€å¯¹è±¡</span></span><br><span class="line">uni.$http = $http</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ main.js ä¸­å¯¼å…¥ request.jsã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥è¯·æ±‚é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./common/request.js&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="é¦–é¡µè½®æ’­åŒºåŸŸ"><a href="#é¦–é¡µè½®æ’­åŒºåŸŸ" class="headerlink" title="é¦–é¡µè½®æ’­åŒºåŸŸ"></a>é¦–é¡µè½®æ’­åŒºåŸŸ</h2><h3 id="è¯·æ±‚è½®æ’­å›¾çš„æ•°æ®"><a href="#è¯·æ±‚è½®æ’­å›¾çš„æ•°æ®" class="headerlink" title="è¯·æ±‚è½®æ’­å›¾çš„æ•°æ®"></a>è¯·æ±‚è½®æ’­å›¾çš„æ•°æ®</h3><p><a target="_blank" rel="noopener" href="https://uniapp.dcloud.net.cn/api/ui/prompt.html#showtoast">uni.showToast(OBJECT)</a></p>
<p><code>pages/home/home.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// 1. è½®æ’­å›¾çš„æ•°æ®åˆ—è¡¨ï¼Œé»˜è®¤ä¸ºç©ºæ•°ç»„</span></span><br><span class="line">            <span class="attr">swiperList</span>: [],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 2. åœ¨å°ç¨‹åºé¡µé¢åˆšåŠ è½½çš„æ—¶å€™ï¼Œè°ƒç”¨è·å–è½®æ’­å›¾æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.getSwiperList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// 3. è·å–è½®æ’­å›¾æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">getSwiperList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// 3.1 å‘èµ·è¯·æ±‚</span></span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/home/swiperdata&#x27;</span>)</span><br><span class="line">            <span class="comment">// 3.2 è¯·æ±‚å¤±è´¥</span></span><br><span class="line">            <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> uni.showToast(&#123;</span><br><span class="line">                    <span class="attr">title</span>: <span class="string">&#x27;æ•°æ®è¯·æ±‚å¤±è´¥ï¼&#x27;</span>,</span><br><span class="line">                    <span class="attr">duration</span>: <span class="number">1500</span>,</span><br><span class="line">                    <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 3.3 è¯·æ±‚æˆåŠŸï¼Œä¸º data ä¸­çš„æ•°æ®èµ‹å€¼</span></span><br><span class="line">            <span class="built_in">this</span>.swiperList = res.message</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“è½®æ’­å›¾çš„ç»“æ„"><a href="#æ¸²æŸ“è½®æ’­å›¾çš„ç»“æ„" class="headerlink" title="æ¸²æŸ“è½®æ’­å›¾çš„ç»“æ„"></a>æ¸²æŸ“è½®æ’­å›¾çš„ç»“æ„</h3><p>ğŸ¤” å¦‚æœå°ç¨‹åºæ¨¡æ‹Ÿå™¨å‡ºä¸æ¥ï¼Œå…³é—­é‡æ–°æ‰“å¼€ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è½®æ’­å›¾åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">swiper</span> <span class="attr">:indicator-dots</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:autoplay</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:interval</span>=<span class="string">&quot;3000&quot;</span> <span class="attr">:duration</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">:circular</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å¾ªç¯æ¸²æŸ“è½®æ’­å›¾çš„ item é¡¹ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in swiperList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;swiper-item&quot;</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- åŠ¨æ€ç»‘å®šå›¾ç‰‡çš„ src å±æ€§ --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    swiper &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">330</span>rpx;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.swiper-item</span>,</span></span><br><span class="line"><span class="css">        image &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">            <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®å°ç¨‹åºçš„åˆ†åŒ…"><a href="#é…ç½®å°ç¨‹åºçš„åˆ†åŒ…" class="headerlink" title="é…ç½®å°ç¨‹åºçš„åˆ†åŒ…"></a>é…ç½®å°ç¨‹åºçš„åˆ†åŒ…</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">å…³äºåˆ†åŒ…</a>ï¼šåˆ†åŒ…æ˜¯å°ç¨‹åºæä¾›çš„ä¸€ç§é¡¹ç›®ä¼˜åŒ–æ‰‹æ®µï¼Œç±»ä¼¼äºè·¯ç”±æ‡’åŠ è½½ï¼Œåªæœ‰ç”¨åˆ°æ—¶æ‰ä¼šåŠ è½½å¯¹åº”çš„ä»£ç ï¼Œå¯ä»¥å‡å°‘å°ç¨‹åºé¦–æ¬¡å¯åŠ¨æ—¶çš„åŠ è½½æ—¶é—´ã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ï¼ŒæŠŠ tabBar ç›¸å…³çš„ 4 ä¸ªé¡µé¢æ”¾åˆ°<font color=e32d40><strong>ä¸»åŒ…</strong></font>ä¸­ï¼Œå…¶å®ƒé¡µé¢ï¼ˆä¾‹å¦‚ï¼šå•†å“è¯¦æƒ…é¡µã€å•†å“åˆ—è¡¨é¡µï¼‰æ”¾åˆ°<font color=e32d40><strong>åˆ†åŒ…</strong></font>ä¸­ï¼Œuni-app ä¸­é…ç½®åˆ†åŒ…çš„æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ol>
<li><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œåˆ›å»ºåˆ†åŒ…çš„æ ¹ç›®å½•ï¼Œå‘½åä¸º subpkgã€‚</p>
</li>
<li><p>åœ¨ <code>pages.json</code> ä¸­ï¼Œå’Œ pages å­—æ®µå¹³çº§çš„ä½ç½®å£°æ˜ subPackages æ•°æ®èŠ‚ç‚¹ï¼Œç”¨æ¥å®šä¹‰åˆ†åŒ…ç›¸å…³çš„ç»“æ„ã€‚</p>
</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;pages&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;pages/home/home&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;pages/cate/cate&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;pages/cart/cart&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;pages/my/my&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;subPackages&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;root&quot;</span>: <span class="string">&quot;subpkg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;pages&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ subpkg ç›®å½•ä¸Šé¼ æ ‡å³é”®ï¼Œç‚¹å‡»ã€æ–°å»ºé¡µé¢ã€‘é€‰é¡¹ï¼Œå¹¶å¡«å†™é¡µé¢çš„ç›¸å…³ä¿¡æ¯ã€‚</p>
<img src="/resource/images/image (9).png"/>

<p>åˆ›å»ºæˆåŠŸåå¼€å‘å·¥å…·ä¼šè‡ªåŠ¨åœ¨ <code>pages.json</code> ä¸‹çš„ <code>subPackages.pages</code> ä¸­ç”Ÿæˆå¯¹åº”åˆ†åŒ…çš„é…ç½®ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;pages&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;goods_detail/goods_detail&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;style&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;navigationBarTitleText&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;enablePullDownRefresh&quot;</span>: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹å‡»è½®æ’­è·³è½¬è¯¦æƒ…"><a href="#ç‚¹å‡»è½®æ’­è·³è½¬è¯¦æƒ…" class="headerlink" title="ç‚¹å‡»è½®æ’­è·³è½¬è¯¦æƒ…"></a>ç‚¹å‡»è½®æ’­è·³è½¬è¯¦æƒ…</h3><p>å°† <code>pages/home/home.vue</code> ä¸­ <code>&lt;swiper-item&gt;</code> èŠ‚ç‚¹å†…çš„ view ç»„ä»¶ï¼Œæ”¹é€ ä¸º navigator å¯¼èˆªç»„ä»¶ï¼Œå¹¶åŠ¨æ€ç»‘å®š url å±æ€§ çš„å€¼ï¼Œæ”¹é€ ä¹‹å‰çš„ UI ç»“æ„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in swiperList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;swiper-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åŠ¨æ€ç»‘å®šå›¾ç‰‡çš„ src å±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>url çš„æ¨¡ç‰ˆå­—ç¬¦ä¸²å†™æ³•ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in swiperList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;swiper-item&quot;</span> <span class="attr">:url</span>=<span class="string">&quot;`/subpkg/goods_detail/goods_detail?goods_id=$&#123;item.goods_id&#125;`&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åŠ¨æ€ç»‘å®šå›¾ç‰‡çš„ src å±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å°è£…-uni-showMsg"><a href="#å°è£…-uni-showMsg" class="headerlink" title="å°è£… uni.$showMsg()"></a>å°è£… uni.$showMsg()</h3><ul>
<li><p>  é—®é¢˜ï¼šå½“æ•°æ®è¯·æ±‚å¤±è´¥ä¹‹åï¼Œç»å¸¸éœ€è¦è°ƒç”¨ <code>uni.showToast(&#123; /* é…ç½®å¯¹è±¡ */ &#125;)</code> æ–¹æ³•æ¥æç¤ºç”¨æˆ·ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚</p>
</li>
<li><p>  è§£å†³ï¼šåœ¨å…¨å±€å°è£…ä¸€ä¸ª <code>uni.$showMsg()</code> æ–¹æ³•ï¼Œæ¥ç®€åŒ– <code>uni.showToast()</code> æ–¹æ³•çš„è°ƒç”¨ï¼Œå…·ä½“çš„æ”¹é€ æ­¥éª¤å¦‚ä¸‹ã€‚</p>
</li>
</ul>
<ol>
<li>åœ¨ <code>common/request.js</code> ä¸­ï¼Œä¸º uni å¯¹è±¡æŒ‚è½½è‡ªå®šä¹‰çš„ <code>$showMsg()</code> æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°è£…çš„å±•ç¤ºæ¶ˆæ¯æç¤ºçš„æ–¹æ³•</span></span><br><span class="line">uni.$showMsg = <span class="function"><span class="keyword">function</span> (<span class="params">title = <span class="string">&#x27;æ•°æ®åŠ è½½å¤±è´¥ï¼&#x27;</span>, duration = <span class="number">1500</span></span>) </span>&#123;</span><br><span class="line">    uni.showToast(&#123;</span><br><span class="line">        title,</span><br><span class="line">        duration,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä»Šååœ¨éœ€è¦æç¤ºæ¶ˆæ¯çš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨ <code>uni.$showMsg()</code> æ–¹æ³•å³å¯ï¼Œ<code>pages/home/home.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getSwiperList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/home/swiperdata&#x27;</span>)</span><br><span class="line">   <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">   <span class="built_in">this</span>.swiperList = res.message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åˆ†ç±»å¯¼èˆªåŒºåŸŸ"><a href="#åˆ†ç±»å¯¼èˆªåŒºåŸŸ" class="headerlink" title="åˆ†ç±»å¯¼èˆªåŒºåŸŸ"></a>åˆ†ç±»å¯¼èˆªåŒºåŸŸ</h2><img src="/resource/images/xxxs.png"/>

<h3 id="è·å–åˆ†ç±»å¯¼èˆªçš„æ•°æ®"><a href="#è·å–åˆ†ç±»å¯¼èˆªçš„æ•°æ®" class="headerlink" title="è·å–åˆ†ç±»å¯¼èˆªçš„æ•°æ®"></a>è·å–åˆ†ç±»å¯¼èˆªçš„æ•°æ®</h3><ol>
<li><p>å®šä¹‰ data æ•°æ®ã€‚</p>
</li>
<li><p>åœ¨ methods ä¸­<font color=e32d40><strong>å®šä¹‰</strong></font>è·å–æ•°æ®çš„æ–¹æ³•ã€‚</p>
</li>
<li><p>åœ¨ onLoad ä¸­<font color=e32d40><strong>è°ƒç”¨</strong></font>è·å–æ•°æ®çš„æ–¹æ³•ã€‚</p>
</li>
</ol>
<p><code>pages/home/home.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// 1. åˆ†ç±»å¯¼èˆªçš„æ•°æ®åˆ—è¡¨</span></span><br><span class="line">            <span class="attr">navList</span>: [],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 3. åœ¨ onLoad ä¸­è°ƒç”¨è·å–æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.getNavList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// 2. åœ¨ methods ä¸­å®šä¹‰è·å–æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">getNavList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/home/catitems&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">            <span class="built_in">this</span>.navList = res.message</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“åˆ†ç±»å¯¼èˆªçš„ç»“æ„"><a href="#æ¸²æŸ“åˆ†ç±»å¯¼èˆªçš„ç»“æ„" class="headerlink" title="æ¸²æŸ“åˆ†ç±»å¯¼èˆªçš„ç»“æ„"></a>æ¸²æŸ“åˆ†ç±»å¯¼èˆªçš„ç»“æ„</h3><p>å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†ç±»å¯¼èˆªåŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in navList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;nav-img&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å¦‚ä¸‹çš„æ ·å¼ç¾åŒ–é¡µé¢ç»“æ„ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.nav-list</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">32</span>rpx <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.nav-img</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">128</span>rpx;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">140</span>rpx;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹å‡»ç¬¬ä¸€é¡¹åˆ°åˆ†ç±»é¡µ"><a href="#ç‚¹å‡»ç¬¬ä¸€é¡¹åˆ°åˆ†ç±»é¡µ" class="headerlink" title="ç‚¹å‡»ç¬¬ä¸€é¡¹åˆ°åˆ†ç±»é¡µ"></a>ç‚¹å‡»ç¬¬ä¸€é¡¹åˆ°åˆ†ç±»é¡µ</h3><p>ä¸º nav-item ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆ†ç±»å¯¼èˆªåŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in navList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;navClickHandler(item)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;nav-img&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ navClickHandler äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// nav-item é¡¹è¢«ç‚¹å‡»æ—¶å€™çš„äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">navClickHandler</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å“ªä¸ª nav</span></span><br><span class="line">    <span class="keyword">if</span> (item.name === <span class="string">&#x27;åˆ†ç±»&#x27;</span>) &#123;</span><br><span class="line">        uni.switchTab(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/pages/cate/cate&#x27;</span> <span class="comment">//url: &quot;../cate/cate&quot; //æˆ–è€…æ˜¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„</span></span><br><span class="line">        &#125;)</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é¦–é¡µæ¥¼å±‚åŒºåŸŸ"><a href="#é¦–é¡µæ¥¼å±‚åŒºåŸŸ" class="headerlink" title="é¦–é¡µæ¥¼å±‚åŒºåŸŸ"></a>é¦–é¡µæ¥¼å±‚åŒºåŸŸ</h2><h3 id="è·å–æ¥¼å±‚æ•°æ®"><a href="#è·å–æ¥¼å±‚æ•°æ®" class="headerlink" title="è·å–æ¥¼å±‚æ•°æ®"></a>è·å–æ¥¼å±‚æ•°æ®</h3><ol>
<li><p>å®šä¹‰ data æ•°æ®ã€‚</p>
</li>
<li><p>åœ¨ methods ä¸­<font color=e32d40><strong>å®šä¹‰</strong></font>è·å–æ•°æ®çš„æ–¹æ³•ã€‚</p>
</li>
<li><p>åœ¨ onLoad ä¸­<font color=e32d40><strong>è°ƒç”¨</strong></font>è·å–æ•°æ®çš„æ–¹æ³•ã€‚</p>
</li>
</ol>
<p><code>pages/home/home.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// 1. æ¥¼å±‚çš„æ•°æ®åˆ—è¡¨</span></span><br><span class="line">            <span class="attr">floorList</span>: [],</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 3. åœ¨ onLoad ä¸­è°ƒç”¨è·å–æ¥¼å±‚æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">this</span>.getFloorList()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// 2. å®šä¹‰è·å–æ¥¼å±‚åˆ—è¡¨æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">getFloorList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/home/floordata&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">            <span class="built_in">this</span>.floorList = res.message</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“æ¥¼å±‚æ ‡é¢˜"><a href="#æ¸²æŸ“æ¥¼å±‚æ ‡é¢˜" class="headerlink" title="æ¸²æŸ“æ¥¼å±‚æ ‡é¢˜"></a>æ¸²æŸ“æ¥¼å±‚æ ‡é¢˜</h3><img src="/resource/images/title_xxx.png"/>

<p>å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¥¼å±‚åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;floor-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¥¼å±‚ item é¡¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;floor-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in floorList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ¥¼å±‚æ ‡é¢˜ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;floor-title&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.floor_title.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¾åŒ–æ¥¼å±‚æ ‡é¢˜çš„æ ·å¼ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.floor-title</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">60</span>rpx;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“æ¥¼å±‚å†…å®¹"><a href="#æ¸²æŸ“æ¥¼å±‚å†…å®¹" class="headerlink" title="æ¸²æŸ“æ¥¼å±‚å†…å®¹"></a>æ¸²æŸ“æ¥¼å±‚å†…å®¹</h3><img src="/resource/images/floor_content.png"/>

<p>å®šä¹‰æ¥¼å±‚å›¾ç‰‡åŒºåŸŸçš„ UI ç»“æ„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¥¼å±‚æ ‡é¢˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;floor-title&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.floor_title.image_src&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ¥¼å±‚å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;floor-img-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å·¦ä¾§å¤§å›¾ç‰‡çš„ç›’å­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;left-img-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.product_list[0].image_src&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;width: item.product_list[0].image_width + &#x27;rpx&#x27;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å³ä¾§ 4 ä¸ªå°å›¾ç‰‡çš„ç›’å­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right-img-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right-img-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item2, i2) in item.product_list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i2&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;i2 !== 0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item2.image_src&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;width: item2.image_width + &#x27;rpx&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¾åŒ–æ¥¼å±‚å›¾ç‰‡åŒºåŸŸçš„æ ·å¼ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.floor-img-box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10</span>rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right-img-box</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹å‡»æ¥¼å±‚è·³è½¬"><a href="#ç‚¹å‡»æ¥¼å±‚è·³è½¬" class="headerlink" title="ç‚¹å‡»æ¥¼å±‚è·³è½¬"></a>ç‚¹å‡»æ¥¼å±‚è·³è½¬</h3><p>ç‚¹å‡»æ¥¼å±‚å›¾ç‰‡è·³è½¬åˆ°å•†å“åˆ—è¡¨é¡µï¼Œåœ¨ subpkg åˆ†åŒ…ä¸­ï¼Œæ–°å»º goods_list é¡µé¢ã€‚</p>
<img src="/resource/images/image (10).png"/>

<p>é—®é¢˜ï¼šæ¥¼å±‚æ•°æ®è¯·æ±‚æˆåŠŸä¹‹åï¼Œåç«¯è¿”å›çš„ navigator_url å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åç«¯è¿”å›çš„</span></span><br><span class="line"><span class="attr">navigator_url</span>: <span class="string">&#x27;/pages/goods_list?query=æœé¥°&#x27;</span></span><br></pre></td></tr></table></figure>

<p>è§£å†³ï¼šé€šè¿‡åŒå±‚ forEach å¾ªç¯ï¼Œå¤„ç†åç«¯è¿”å›çš„ URL åœ°å€ä¸ºå®é™…éœ€è¦çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–æ¥¼å±‚åˆ—è¡¨æ•°æ®</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getFloorList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/home/floordata&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="comment">// é€šè¿‡åŒå±‚ forEach å¾ªç¯ï¼Œå¤„ç† URL åœ°å€</span></span><br><span class="line">    res.message.forEach(<span class="function"><span class="params">floor</span> =&gt;</span> &#123;</span><br><span class="line">        floor.product_list.forEach(<span class="function"><span class="params">prod</span> =&gt;</span> &#123;</span><br><span class="line">            prod.url = <span class="string">&#x27;/subpkg/goods_list/goods_list?&#x27;</span> + prod.navigator_url.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">            <span class="comment">// prod.url = `/subpkg/goods_list/goods_list?$&#123;prod.navigator_url.split(&#x27;?&#x27;)[1]&#125;` // æ¨¡ç‰ˆå­—ç¬¦ä¸²å†™æ³•</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.floorList = res.message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ï¼šæŠŠå›¾ç‰‡å¤–å±‚çš„ view ç»„ä»¶ï¼Œæ”¹é€ ä¸º navigator ç»„ä»¶ï¼Œå¹¶åŠ¨æ€ç»‘å®š url å±æ€§ çš„å€¼ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¥¼å±‚å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;floor-img-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å·¦ä¾§å¤§å›¾ç‰‡çš„ç›’å­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;left-img-box&quot;</span> <span class="attr">:url</span>=<span class="string">&quot;item.product_list[0].url&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.product_list[0].image_src&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;width: item.product_list[0].image_width + &#x27;rpx&#x27;&#125;&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å³ä¾§ 4 ä¸ªå°å›¾ç‰‡çš„ç›’å­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;right-img-box&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">navigator</span> <span class="attr">class</span>=<span class="string">&quot;right-img-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item2, i2) in item.product_list&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i2&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;i2 !== 0&quot;</span> <span class="attr">:url</span>=<span class="string">&quot;item2.url&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item2.image_src&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;width: item2.image_width + &#x27;rpx&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="åˆ†ç±»é¡µé¢"><a href="#åˆ†ç±»é¡µé¢" class="headerlink" title="åˆ†ç±»é¡µé¢"></a>åˆ†ç±»é¡µé¢</h1><h2 id="åŸºæœ¬ç»“æ„å’Œæ ·å¼"><a href="#åŸºæœ¬ç»“æ„å’Œæ ·å¼" class="headerlink" title="åŸºæœ¬ç»“æ„å’Œæ ·å¼"></a>åŸºæœ¬ç»“æ„å’Œæ ·å¼</h2><ol>
<li>å‡†å¤‡ç»“æ„ï¼Œ<code>pages/cate/cate.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æœç´¢æ¡† --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åˆ†ç±»é€‰æ‹© --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-container&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å·¦ä¾§ä¸€çº§åˆ†ç±» --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left&quot;</span> <span class="attr">scroll-y</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item active&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span>&gt;</span>ä¸€çº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å³ä¾§äºŒçº§åˆ†ç±» --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right&quot;</span> <span class="attr">scroll-y</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span>&gt;</span>äºŒçº§åˆ†ç±»<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å‡†å¤‡é¡µé¢æ ·å¼ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.cate-container</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.cate-left</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">width</span>: <span class="number">240</span>rpx;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.cate-left-item</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">                <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="css">                <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="css">                <span class="attribute">height</span>: <span class="number">120</span>rpx;</span></span><br><span class="line"><span class="css">                <span class="attribute">background-color</span>: <span class="number">#efefef</span>;</span></span><br><span class="line"><span class="css">                <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="css">                // é€‰ä¸­æ ·å¼</span></span><br><span class="line"><span class="css">                &amp;<span class="selector-class">.active</span> &#123;</span></span><br><span class="line"><span class="css">                    <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">                    <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">                    <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span></span><br><span class="line"><span class="css">                    // å·¦è¾¹çº¢çº¿</span></span><br><span class="line"><span class="css">                    &amp;<span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line"><span class="css">                        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css">                        <span class="attribute">width</span>: <span class="number">6</span>rpx;</span></span><br><span class="line"><span class="css">                        <span class="attribute">height</span>: <span class="number">60</span>rpx;</span></span><br><span class="line"><span class="css">                        <span class="attribute">background-color</span>: <span class="number">#c00000</span>;</span></span><br><span class="line"><span class="css">                    &#125;</span></span><br><span class="line"><span class="css">                    // å³è¾¹ç™½çº¿å’ŒèƒŒæ™¯ç›¸åŒ</span></span><br><span class="line"><span class="css">                    &amp;<span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line"><span class="css">                        <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="css">                        <span class="attribute">width</span>: <span class="number">6</span>rpx;</span></span><br><span class="line"><span class="css">                        <span class="attribute">height</span>: <span class="number">60</span>rpx;</span></span><br><span class="line"><span class="css">                        <span class="attribute">background-color</span>: <span class="number">#fff</span>ff;</span></span><br><span class="line"><span class="css">                    &#125;</span></span><br><span class="line"><span class="css">                &#125;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åŠ¨æ€è®¡ç®—çª—å£çš„å‰©ä½™é«˜åº¦å¹¶èµ‹å€¼ç»™ scroll-view ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// çª—å£çš„å¯ç”¨é«˜åº¦ = å±å¹•é«˜åº¦ - navigationBaré«˜åº¦ - tabBar é«˜åº¦</span></span></span><br><span class="line"><span class="javascript">                <span class="attr">wh</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// è·å–é¡µé¢å¯ç”¨é«˜åº¦</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">// https://uniapp.dcloud.io/api/system/info?id=getsysteminfosync</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">const</span> sysInfo = uni.getSystemInfoSync()</span></span><br><span class="line"><span class="javascript">            <span class="comment">// ä¸º wh èµ‹å€¼ï¼ˆwindowHeightï¼Œå¯ä½¿ç”¨çª—å£é«˜åº¦ï¼‰</span></span></span><br><span class="line"><span class="javascript">            <span class="built_in">this</span>.wh = sysInfo.windowHeight</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="è·å–åˆ†ç±»çš„æ•°æ®"><a href="#è·å–åˆ†ç±»çš„æ•°æ®" class="headerlink" title="è·å–åˆ†ç±»çš„æ•°æ®"></a>è·å–åˆ†ç±»çš„æ•°æ®</h2><ol>
<li>åœ¨ data ä¸­å®šä¹‰åˆ†ç±»æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ†ç±»æ•°æ®åˆ—è¡¨</span></span><br><span class="line">        <span class="attr">cateList</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å®šä¹‰è·å–åˆ†ç±»åˆ—è¡¨æ•°æ®çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// è·å–åˆ†ç±»æ•°æ®</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getCateList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// å‘èµ·è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/categories&#x27;</span>)</span><br><span class="line">        <span class="comment">// æ•°æ®è·å–å¼‚å¸¸åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">        <span class="comment">// ä¿å­˜æ•°æ®åˆ°dataä¸­</span></span><br><span class="line">        <span class="built_in">this</span>.cateList = res.message</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>è°ƒç”¨è·å–åˆ†ç±»åˆ—è¡¨æ•°æ®çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–åˆ†ç±»æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getCateList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å·¦ä¾§çš„ä¸€çº§åˆ†ç±»"><a href="#å·¦ä¾§çš„ä¸€çº§åˆ†ç±»" class="headerlink" title="å·¦ä¾§çš„ä¸€çº§åˆ†ç±»"></a>å·¦ä¾§çš„ä¸€çº§åˆ†ç±»</h2><ol>
<li>å¾ªç¯æ¸²æŸ“åˆ—è¡¨ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å·¦ä¾§ä¸€çº§åˆ†ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left&quot;</span> <span class="attr">scroll-y</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in cateList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span> &#123;&#123;item.cat_name&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ data ä¸­å®šä¹‰é»˜è®¤é€‰ä¸­é¡¹çš„ç´¢å¼•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å·¦ä¾§ä¸€çº§åˆ†ç±»é€‰ä¸­ç´¢å¼•</span></span><br><span class="line">        <span class="attr">active</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å¾ªç¯æ¸²æŸ“ç»“æ„æ—¶ï¼Œä¸ºé€‰ä¸­é¡¹åŠ¨æ€æ·»åŠ  .active ç±»åã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å·¦ä¾§ä¸€çº§åˆ†ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;cate-left-item&#x27;, i===active ? &#x27;active&#x27;:&#x27;&#x27;]&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in cateList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span> &#123;&#123;item.cat_name&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ä¸ºä¸€çº§åˆ†ç±»çš„ Item é¡¹ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•° changeActiveã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å·¦ä¾§ä¸€çº§åˆ†ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-left&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;cate-left-item&#x27;, i===active ? &#x27;active&#x27;:&#x27;&#x27;]&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in cateList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeActive(i)&quot;</span>&gt;</span> &#123;&#123;item.cat_name&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>å®šä¹‰ changeActive äº‹ä»¶å¤„ç†å‡½æ•°ï¼ŒåŠ¨æ€ä¿®æ”¹é€‰ä¸­é¡¹çš„ç´¢å¼•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// æ”¹å˜ä¸€çº§åˆ†ç±»ç´¢å¼•</span></span><br><span class="line">    <span class="function"><span class="title">changeActive</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.active = i</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒçº§åˆ†ç±»çš„æ ‡é¢˜"><a href="#äºŒçº§åˆ†ç±»çš„æ ‡é¢˜" class="headerlink" title="äºŒçº§åˆ†ç±»çš„æ ‡é¢˜"></a>äºŒçº§åˆ†ç±»çš„æ ‡é¢˜</h2><ol>
<li>äºŒçº§åˆ†ç±»ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å³ä¾§äºŒçº§åˆ†ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»item --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»title --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-title&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»å†…å®¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-content&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ data ä¸­å®šä¹‰äºŒçº§åˆ†ç±»åˆ—è¡¨çš„æ•°æ®èŠ‚ç‚¹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// äºŒçº§åˆ†ç±»åˆ—è¡¨</span></span><br><span class="line">        <span class="attr">cateLevel2</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¿®æ”¹ getCateList æ–¹æ³•ï¼Œåœ¨è¯·æ±‚åˆ°æ•°æ®ä¹‹åï¼Œä¸ºäºŒçº§åˆ†ç±»åˆ—è¡¨æ•°æ®èµ‹å€¼ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getCateList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/categories&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="built_in">this</span>.cateList = res.message</span><br><span class="line">    <span class="comment">// ä¸ºäºŒçº§åˆ†ç±»èµ‹å€¼</span></span><br><span class="line">    <span class="built_in">this</span>.cateLevel2 = res.message[<span class="number">0</span>].children</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ä¿®æ”¹ changeActive æ–¹æ³•ï¼Œåœ¨ä¸€çº§åˆ†ç±»é€‰ä¸­é¡¹æ”¹å˜ä¹‹åï¼Œä¸ºäºŒçº§åˆ†ç±»åˆ—è¡¨æ•°æ®é‡æ–°èµ‹å€¼ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">changeActive</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.active = i</span><br><span class="line">    <span class="comment">// æ›´æ–°äºŒçº§åˆ†ç±»åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.cateLevel2 = <span class="built_in">this</span>.cateList[i].children</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>å¾ªç¯æ¸²æŸ“å³ä¾§äºŒçº§åˆ†ç±»åˆ—è¡¨çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å³ä¾§äºŒçº§åˆ†ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»item --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in cateLevel2&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»title --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-title&quot;</span>&gt;</span> /&#123;&#123;item.cat_name&#125;&#125;/ <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»å†…å®¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-content&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>ç¾åŒ–äºŒçº§åˆ†ç±»çš„æ ‡é¢˜æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cate-right</span> &#123;</span><br><span class="line">    <span class="selector-class">.cate-right-item</span> &#123;</span><br><span class="line">        <span class="selector-class">.cate-right-item-title</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">justify-content</span>: center;</span><br><span class="line">            <span class="attribute">font-weight</span>: bold;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒçº§åˆ†ç±»çš„å†…å®¹"><a href="#äºŒçº§åˆ†ç±»çš„å†…å®¹" class="headerlink" title="äºŒçº§åˆ†ç±»çš„å†…å®¹"></a>äºŒçº§åˆ†ç±»çš„å†…å®¹</h2><ol>
<li>åœ¨äºŒçº§åˆ†ç±»çš„ <code>&lt;view&gt;</code> ç»„ä»¶ä¸­ï¼Œå¾ªç¯æ¸²æŸ“äºŒçº§åˆ†ç±»è¯¦æƒ…ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å³ä¾§äºŒçº§åˆ†ç±» --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh+&#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»item --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in cateLevel2&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»title --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-title&quot;</span>&gt;</span> /&#123;&#123;item.cat_name&#125;&#125;/ <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»å†…å®¹å®¹å™¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»æ¯ä¸€é¡¹å†…å®¹ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-content-box&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item2, i2) in item.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i2&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»å›¾ç‰‡ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item2.cat_icon&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»åç§° --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item2.cat_name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–äºŒçº§åˆ†ç±»è¯¦æƒ…æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cate-right</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: white;</span><br><span class="line">    <span class="selector-class">.cate-right-item</span> &#123;</span><br><span class="line">        <span class="selector-class">.cate-right-item-title</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">justify-content</span>: center;</span><br><span class="line">            <span class="attribute">font-weight</span>: bold;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.cate-right-item-content</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">            <span class="selector-class">.cate-right-item-content-box</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: flex;</span><br><span class="line">                <span class="attribute">flex-direction</span>: column;</span><br><span class="line">                <span class="attribute">justify-content</span>: center;</span><br><span class="line">                <span class="attribute">align-items</span>: center;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">33.33%</span>;</span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">20</span>rpx;</span><br><span class="line">                <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">                image &#123;</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                text &#123;</span><br><span class="line">                    <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é‡ç½®æ»šåŠ¨æ¡ä½ç½®"><a href="#é‡ç½®æ»šåŠ¨æ¡ä½ç½®" class="headerlink" title="é‡ç½®æ»šåŠ¨æ¡ä½ç½®"></a>é‡ç½®æ»šåŠ¨æ¡ä½ç½®</h2><p>ç›®æ ‡ï¼šåˆ‡æ¢ä¸€çº§åˆ†ç±»åé‡ç½®äºŒçº§åˆ†ç±»æ»šåŠ¨æ¡çš„ä½ç½®ã€‚</p>
<ol>
<li>åœ¨ data ä¸­å®šä¹‰ æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨çš„è·ç¦»ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// æ»šåŠ¨æ¡è·ç¦»é¡¶éƒ¨çš„è·ç¦»</span></span><br><span class="line">        <span class="attr">scrollTop</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åŠ¨æ€ä¸ºå³ä¾§çš„ <code>&lt;scroll-view&gt;</code> ç»„ä»¶ç»‘å®š scroll-top å±æ€§çš„å€¼ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å³ä¾§çš„æ»šåŠ¨è§†å›¾åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">scroll-view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right&quot;</span> <span class="attr">scroll-y</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;height: wh + &#x27;px&#x27;&#125;&quot;</span> <span class="attr">:scroll-top</span>=<span class="string">&quot;scrollTop&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">scroll-view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åˆ‡æ¢ä¸€çº§åˆ†ç±»æ—¶ï¼ŒåŠ¨æ€è®¾ç½® scrollTop çš„å€¼ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ”¹å˜ä¸€çº§åˆ†ç±»ç´¢å¼•</span></span><br><span class="line"><span class="function"><span class="title">changeActive</span>(<span class="params">i</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°é€‰ä¸­ç´¢å¼•</span></span><br><span class="line">    <span class="built_in">this</span>.active = i</span><br><span class="line">    <span class="comment">// æ›´æ–°äºŒçº§åˆ†ç±»æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.cateLevel2 = <span class="built_in">this</span>.cateList[i].children</span><br><span class="line">    <span class="comment">// æ›´æ–°å³ä¾§äºŒçº§åˆ†ç±»è·ç¦»é¡¶éƒ¨è·ç¦»</span></span><br><span class="line">    <span class="built_in">this</span>.scrollTop = <span class="built_in">Math</span>.random()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·³è½¬åˆ°å•†å“åˆ—è¡¨"><a href="#è·³è½¬åˆ°å•†å“åˆ—è¡¨" class="headerlink" title="è·³è½¬åˆ°å•†å“åˆ—è¡¨"></a>è·³è½¬åˆ°å•†å“åˆ—è¡¨</h2><ol>
<li>ä¸ºäºŒçº§åˆ†ç±»è¯¦æƒ…çš„ Item é¡¹ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- äºŒçº§åˆ†ç±»æ¯ä¸€é¡¹å†…å®¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cate-right-item-content-box&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item2, i2) in item.children&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i2&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;gotoGoodsList(item2)&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»å›¾ç‰‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item2.cat_icon&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- äºŒçº§åˆ†ç±»åç§° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;item2.cat_name&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»äºŒçº§åˆ†ç±»è¯¦æƒ…è·³è½¬åˆ°å•†å“åˆ—è¡¨é¡µ</span></span><br><span class="line"><span class="function"><span class="title">gotoGoodsList</span>(<span class="params">goods</span>)</span>&#123;</span><br><span class="line">    uni.navigateTo(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">`/subpkg/goods_list/goods_list?cid=<span class="subst">$&#123;goods.cat_id&#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æœç´¢åŠŸèƒ½"><a href="#æœç´¢åŠŸèƒ½" class="headerlink" title="æœç´¢åŠŸèƒ½"></a>æœç´¢åŠŸèƒ½</h1><h2 id="æœç´¢ç»„ä»¶"><a href="#æœç´¢ç»„ä»¶" class="headerlink" title="æœç´¢ç»„ä»¶"></a>æœç´¢ç»„ä»¶</h2><h3 id="è‡ªå®šä¹‰-my-search-ç»„ä»¶"><a href="#è‡ªå®šä¹‰-my-search-ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ my-search ç»„ä»¶"></a>è‡ªå®šä¹‰ my-search ç»„ä»¶</h3><ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ components ç›®å½•ä¸Šï¼Œé¼ æ ‡å³é”®ï¼Œé€‰æ‹©ã€æ–°å»ºç»„ä»¶ã€‘ï¼Œå¡«å†™ç»„ä»¶ä¿¡æ¯ï¼Œæœ€åç‚¹å‡»åˆ›å»ºæŒ‰é’®ã€‚</li>
</ol>
<img src="/resource/images/5-1.25ab714d.png"/>

<ol start="2">
<li>åœ¨åˆ†ç±»é¡µé¢ <code>pages/cate/cate.vue</code>ï¼Œç›´æ¥ä»¥æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨ my-search è‡ªå®šä¹‰ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨è‡ªå®šä¹‰çš„æœç´¢ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-search</span>&gt;</span><span class="tag">&lt;/<span class="name">my-search</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li><a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=2">uni-icons</a>ï¼Œå®šä¹‰ my-search ç»„ä»¶çš„ UI ç»“æ„å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ³¨æ„ï¼Œåœ¨å½“å‰ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ view ç»„ä»¶æ¨¡æ‹Ÿ input è¾“å…¥æ¡†çš„æ•ˆæœï¼Œå¹¶ä¸ä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“çœŸæ­£çš„ input è¾“å…¥æ¡† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-search-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-search-box&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;search&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;my-search-text&quot;</span>&gt;</span>æœç´¢<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ç¾åŒ–è‡ªå®šä¹‰ search ç»„ä»¶çš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my-search-container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#c00000</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="selector-class">.my-search-box</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">justify-content</span>: center;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">        <span class="selector-class">.my-search-text</span> &#123;</span><br><span class="line">            <span class="attribute">margin-left</span>: <span class="number">6px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>ç”±äºè‡ªå®šä¹‰çš„ my-search ç»„ä»¶é«˜åº¦ä¸º 50pxï¼Œå› æ­¤ï¼Œéœ€è¦é‡æ–°è®¡ç®—åˆ†ç±»é¡µé¢çª—å£çš„å¯ç”¨é«˜åº¦ã€‚</li>
</ol>
<p><code>pages/cate/cate.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> sysInfo = uni.getSystemInfoSync()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯ç”¨é«˜åº¦ = å±å¹•é«˜åº¦ - navigationBaré«˜åº¦ - tabBaré«˜åº¦ - è‡ªå®šä¹‰çš„searchç»„ä»¶é«˜åº¦</span></span><br><span class="line">    <span class="built_in">this</span>.wh = sysInfo.windowHeight - <span class="number">50</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>è‡ªå®šä¹‰ç»„ä»¶æ ·å¼<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/wxml-wxss.html">æ³¨æ„ç‚¹</a>ï¼Œç»„ä»¶å’Œå¼•ç”¨ç»„ä»¶çš„é¡µé¢ä¸èƒ½ä½¿ç”¨ id é€‰æ‹©å™¨ï¼ˆ#aï¼‰ã€å±æ€§é€‰æ‹©å™¨ï¼ˆ[a]ï¼‰å’Œæ ‡ç­¾åé€‰æ‹©å™¨ï¼Œè¯·æ”¹ç”¨ class é€‰æ‹©å™¨ï¼Œ<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/000caa250fc8301d9658e091359c00">é—®é¢˜æ¡ˆä¾‹</a>ã€‚</li>
</ol>
<h3 id="é€šè¿‡ä¼ å€¼å¢å¼ºç»„ä»¶é€šç”¨æ€§"><a href="#é€šè¿‡ä¼ å€¼å¢å¼ºç»„ä»¶é€šç”¨æ€§" class="headerlink" title="é€šè¿‡ä¼ å€¼å¢å¼ºç»„ä»¶é€šç”¨æ€§"></a>é€šè¿‡ä¼ å€¼å¢å¼ºç»„ä»¶é€šç”¨æ€§</h3><ol>
<li>æ”¯æŒè‡ªå®šä¹‰æœç´¢ç»„ä»¶çš„èƒŒæ™¯é¢œè‰²å’Œåœ†è§’å°ºå¯¸ï¼Œé€šè¿‡ props æ¥æ”¶ bgcolor å’Œ radius ä¸¤ä¸ªå±æ€§ï¼Œå¹¶æŒ‡å®šå€¼ç±»å‹å’Œå±æ€§é»˜è®¤å€¼ï¼Œ<code>components/my-search/my-search.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">    <span class="comment">// èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">    <span class="attr">bgcolor</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;#C00000&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// åœ†è§’å°ºå¯¸</span></span><br><span class="line">    <span class="attr">radius</span>: &#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="built_in">Number</span>,</span><br><span class="line">        <span class="comment">// å•ä½æ˜¯ px</span></span><br><span class="line">        <span class="attr">default</span>: <span class="number">18</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>é€šè¿‡è¡Œå†…æ ·å¼ä¸º .my-search-container ç›’å­å’Œ .my-search-box ç›’å­åŠ¨æ€ç»‘å®š style å±æ€§ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-search-container&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;&#x27;background-color&#x27;: bgcolor&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-search-box&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;&#x27;border-radius&#x27;: radius + &#x27;px&#x27;&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;search&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;my-search-text&quot;</span>&gt;</span>æœç´¢<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç§»é™¤å¯¹åº” scss æ ·å¼ä¸­çš„èƒŒæ™¯é¢œè‰²å’Œåœ†è§’å°ºå¯¸ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my-search-container</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    // ç§»é™¤èƒŒæ™¯é¢œè‰²ï¼Œæ”¹ç”± props å±æ€§æ§åˆ¶</span><br><span class="line">    // <span class="attribute">background-color</span>: <span class="number">#C00000</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="selector-class">.my-search-box</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">justify-content</span>: center;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        // ç§»é™¤åœ†è§’å°ºå¯¸ï¼Œæ”¹ç”± props å±æ€§æ§åˆ¶</span><br><span class="line">        // <span class="attribute">border-radius</span>: <span class="number">18px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">        <span class="selector-class">.my-search-text</span> &#123;</span><br><span class="line">            <span class="attribute">margin-left</span>: <span class="number">6px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ”¯æŒå¤–ç•Œ-click-ç‚¹å‡»äº‹ä»¶"><a href="#æ”¯æŒå¤–ç•Œ-click-ç‚¹å‡»äº‹ä»¶" class="headerlink" title="æ”¯æŒå¤–ç•Œ click ç‚¹å‡»äº‹ä»¶"></a>æ”¯æŒå¤–ç•Œ click ç‚¹å‡»äº‹ä»¶</h3><ol>
<li><p>å…ˆåˆ›å»ºåˆ†åŒ…é¡µé¢ searchï¼Œä¸ºäº†å¾…ä¼šç‚¹å‡»æ—¶è·³è½¬åˆ°æ­¤é¡µé¢ã€‚</p>
</li>
<li><p>åœ¨ my-search è‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨ï¼Œç»™ç±»åä¸º .my-search-box çš„ view ç»‘å®š click äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-search-box&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;&#x27;border-radius&#x27;: radius + &#x27;px&#x27;&#125;&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;searchBoxHandler&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;search&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;my-search-text&quot;</span>&gt;</span>æœç´¢<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ my-search è‡ªå®šä¹‰ç»„ä»¶çš„ methods èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// å­ç»„ä»¶è¾“å…¥æ¡†äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="title">searchBoxHandler</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨çˆ¶ç»„ä»¶ç»‘å®šçš„äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;click&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åœ¨åˆ†ç±»é¡µé¢ä¸­ä½¿ç”¨ my-search è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå³å¯é€šè¿‡ @click ä¸ºå…¶ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<p><code>pages/cate/cate.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åœ¨çˆ¶ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰ç»„ä»¶çš„clickäº‹ä»¶å¤„ç†å‡½æ•° --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">my-search</span> @<span class="attr">click</span>=<span class="string">&quot;gotoSearch&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-search</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>åŒæ—¶åœ¨åˆ†ç±»é¡µé¢ä¸­ï¼Œå®šä¹‰ gotoSearch äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// è·³è½¬åˆ°åˆ†åŒ…ä¸­çš„æœç´¢é¡µé¢</span></span><br><span class="line">    <span class="function"><span class="title">gotoSearch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        uni.navigateTo(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/subpkg/search/search&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°é¦–é¡µæœç´¢çš„å¸é¡¶æ•ˆæœ"><a href="#å®ç°é¦–é¡µæœç´¢çš„å¸é¡¶æ•ˆæœ" class="headerlink" title="å®ç°é¦–é¡µæœç´¢çš„å¸é¡¶æ•ˆæœ"></a>å®ç°é¦–é¡µæœç´¢çš„å¸é¡¶æ•ˆæœ</h3><ol>
<li>åœ¨é¦–é¡µå®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„å¹¶ç»‘å®šç‚¹å‡»äº‹ä»¶ã€‚</li>
</ol>
<p><code>pages/home/home.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨è‡ªå®šä¹‰çš„æœç´¢ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-search</span> @<span class="attr">click</span>=<span class="string">&quot;gotoSearch&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-search</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">gotoSearch</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    uni.navigateTo(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/subpkg/search/search&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>é€šè¿‡å¦‚ä¸‹çš„æ ·å¼å®ç°å¸é¡¶çš„æ•ˆæœã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.search-box</span> &#123;</span><br><span class="line">    // è®¾ç½®å®šä½æ•ˆæœä¸ºâ€œå¸é¡¶â€</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    // å¸é¡¶çš„â€œä½ç½®â€</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    // æé«˜å±‚çº§ï¼Œé˜²æ­¢è¢«è½®æ’­å›¾è¦†ç›–</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æœç´¢å»ºè®®"><a href="#æœç´¢å»ºè®®" class="headerlink" title="æœç´¢å»ºè®®"></a>æœç´¢å»ºè®®</h2><h3 id="æ¸²æŸ“æœç´¢é¡µé¢çš„åŸºæœ¬ç»“æ„"><a href="#æ¸²æŸ“æœç´¢é¡µé¢çš„åŸºæœ¬ç»“æ„" class="headerlink" title="æ¸²æŸ“æœç´¢é¡µé¢çš„åŸºæœ¬ç»“æ„"></a>æ¸²æŸ“æœç´¢é¡µé¢çš„åŸºæœ¬ç»“æ„</h3><ol>
<li>å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ï¼Œ<code>subpkg/search/search.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æœç´¢æ¡† --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-box&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- ä½¿ç”¨ uni-ui æä¾›çš„æœç´¢ç»„ä»¶ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uni-search-bar</span> @<span class="attr">input</span>=<span class="string">&quot;input&quot;</span> <span class="attr">cancelButton</span>=<span class="string">&quot;none&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;20&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-search-bar</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æœç´¢å†å² --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- æœç´¢åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æœç´¢æ¡† UI ç¾åŒ–å’Œå¸é¡¶æ•ˆæœã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.search-box</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#c00000</span>;</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">9</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å®šä¹‰å¦‚ä¸‹çš„ input äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œ<font color=e32d40><strong>çœŸæœºè°ƒè¯•æˆ–åˆ†ç¦»çª—å£æˆ–é‡å¯å¾®ä¿¡å¼€å‘è€…å·¥å…·</strong></font>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">input</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// value æ˜¯ç”¨æˆ·æœ€æ–°çš„è¾“å…¥å†…å®¹</span></span><br><span class="line">        <span class="built_in">console</span>.log(value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ç»„ä»¶å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=866">uni-search-bar</a>ã€‚</li>
</ol>
<h3 id="å®ç°æœç´¢æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹"><a href="#å®ç°æœç´¢æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹" class="headerlink" title="å®ç°æœç´¢æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹"></a>å®ç°æœç´¢æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹</h3><p>ä¸º <code>&lt;uni-search-bar&gt;</code> æ·»åŠ  <code>:focus=&quot;true&quot;</code> å±æ€§å³å¯ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢æ¡† --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨ uni-ui æä¾›çš„æœç´¢ç»„ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-search-bar</span> @<span class="attr">input</span>=<span class="string">&quot;input&quot;</span> <span class="attr">cancelButton</span>=<span class="string">&quot;none&quot;</span> <span class="attr">radius</span>=<span class="string">&quot;20&quot;</span> <span class="attr">:focus</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-search-bar</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ‰‹æœºæ‰«ç é¢„è§ˆï¼Œåœ¨çœŸæœºä¸Šå¯æŸ¥çœ‹åˆ°â€œå…‰æ ‡é—ªçƒâ€æ•ˆæœã€‚</p>
<h3 id="å®ç°è¾“å…¥å†…å®¹çš„é˜²æŠ–å¤„ç†"><a href="#å®ç°è¾“å…¥å†…å®¹çš„é˜²æŠ–å¤„ç†" class="headerlink" title="å®ç°è¾“å…¥å†…å®¹çš„é˜²æŠ–å¤„ç†"></a>å®ç°è¾“å…¥å†…å®¹çš„é˜²æŠ–å¤„ç†</h3><ol>
<li>åœ¨ data ä¸­å®šä¹‰é˜²æŠ–çš„å»¶æ—¶å™¨ timerId å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å»¶æ—¶å™¨çš„ timerId</span></span><br><span class="line">        <span class="attr">timerId</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="comment">// æœç´¢å…³é”®è¯</span></span><br><span class="line">        <span class="attr">kw</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ input äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">input</span>(<span class="params">value</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ç”¨æˆ·æ¯æ¬¡è¾“å…¥ï¼Œæ¸…é™¤ä¸Šæ¬¡è¾“å…¥å¯åŠ¨çš„å»¶æ—¶å™¨</span></span><br><span class="line">    <span class="built_in">clearTimeout</span>(<span class="built_in">this</span>.timerId)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ¯æ¬¡è¾“å…¥ï¼Œåœ¨æ¸…é™¤äº†ä¸Šæ¬¡å»¶æ—¶å™¨åï¼Œå†é‡æ–°å¯åŠ¨ä¸€ä¸ª 500 æ¯«ç§’çš„å»¶æ—¶å™¨</span></span><br><span class="line">    <span class="comment">// å¦‚æœ 500 æ¯«ç§’å†…å®¹ç”¨æˆ·æ²¡æœ‰å†æ¬¡è¾“å…¥ï¼Œåˆ™æ‰§è¡Œæœç´¢</span></span><br><span class="line">    <span class="comment">// å¦‚æœ 500 æ¯«ç§’å†…ç”¨æˆ·å†æ¬¡è¾“å…¥äº†ï¼Œå–æ¶ˆä¸Šæ¬¡çš„å»¶æ—¶å™¨ï¼Œå†é‡æ–°å¯åŠ¨ä¸€ä¸ª 500 æ¯«ç§’çš„å»¶æ—¶å™¨</span></span><br><span class="line">    <span class="built_in">this</span>.timerId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœ 500 æ¯«ç§’å†…ï¼Œæ²¡æœ‰è§¦å‘æ–°çš„è¾“å…¥äº‹ä»¶ï¼Œåˆ™ä¸ºæœç´¢å…³é”®è¯èµ‹å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.kw = value</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.kw)</span><br><span class="line">    &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ ¹æ®å…³é”®è¯æŸ¥è¯¢æœç´¢å»ºè®®"><a href="#æ ¹æ®å…³é”®è¯æŸ¥è¯¢æœç´¢å»ºè®®" class="headerlink" title="æ ¹æ®å…³é”®è¯æŸ¥è¯¢æœç´¢å»ºè®®"></a>æ ¹æ®å…³é”®è¯æŸ¥è¯¢æœç´¢å»ºè®®</h3><ol>
<li>åœ¨ data ä¸­å®šä¹‰å¦‚ä¸‹çš„æ•°æ®èŠ‚ç‚¹ï¼Œç”¨æ¥å­˜æ”¾æœç´¢å»ºè®®çš„åˆ—è¡¨æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// æœç´¢ç»“æœåˆ—è¡¨</span></span><br><span class="line">        <span class="attr">searchResults</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨é˜²æŠ–çš„ setTimeout ä¸­ï¼Œè°ƒç”¨ getSearchList æ–¹æ³•è·å–æœç´¢å»ºè®®åˆ—è¡¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.timerId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.kw = value</span><br><span class="line">    <span class="comment">// æ ¹æ®å…³é”®è¯ï¼ŒæŸ¥è¯¢æœç´¢å»ºè®®åˆ—è¡¨</span></span><br><span class="line">    <span class="built_in">this</span>.getSearchResults()</span><br><span class="line">&#125;, <span class="number">500</span>)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ methods ä¸­å®šä¹‰ getSearchList æ–¹æ³•å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®æœç´¢å…³é”®è¯ï¼Œæœç´¢å•†å“å»ºè®®åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getSearchResults</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å…³é”®è¯æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.kw.trim().length === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.searchResults = []</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å‘èµ·è¯·æ±‚ï¼Œè·å–æœç´¢å»ºè®®åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/qsearch&#x27;</span>, &#123; <span class="attr">query</span>: <span class="built_in">this</span>.kw &#125;)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="built_in">this</span>.searchResults = res.message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“åç«¯è¿”å›çš„æœç´¢å»ºè®®"><a href="#æ¸²æŸ“åç«¯è¿”å›çš„æœç´¢å»ºè®®" class="headerlink" title="æ¸²æŸ“åç«¯è¿”å›çš„æœç´¢å»ºè®®"></a>æ¸²æŸ“åç«¯è¿”å›çš„æœç´¢å»ºè®®</h3><ol>
<li>å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢ç»“æœåˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-results-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-results-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in searchResults&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;gotoDetail(item.goods_id)&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-results-item-name&quot;</span>&gt;</span> &#123;&#123;item.goods_name&#125;&#125; <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–æœç´¢å»ºè®®åˆ—è¡¨ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.search-results-list</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">    <span class="selector-class">.search-results-item</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">90</span>rpx;</span><br><span class="line">        <span class="selector-class">.search-results-item-name</span> &#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">            // æ–‡å­—ä¸å…è®¸æ¢è¡Œï¼ˆå•è¡Œæ–‡æœ¬ï¼‰</span><br><span class="line">            <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">            // æº¢å‡ºéƒ¨åˆ†éšè—</span><br><span class="line">            <span class="attribute">overflow</span>: hidden;</span><br><span class="line">            // æ–‡æœ¬æº¢å‡ºåï¼Œä½¿ç”¨ ... ä»£æ›¿</span><br><span class="line">            <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">3px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç‚¹å‡»æœç´¢å»ºè®®çš„ Item é¡¹ï¼Œè·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µé¢ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">gotoDetail</span>(<span class="params">goods_id</span>)</span> &#123;</span><br><span class="line">    uni.navigateTo(&#123;</span><br><span class="line">        <span class="comment">// æŒ‡å®šè¯¦æƒ…é¡µé¢çš„ URL åœ°å€ï¼Œå¹¶ä¼ é€’ goods_id å‚æ•°</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/subpkg/goods_detail/goods_detail?goods_id=&#x27;</span> + goods_id</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æœç´¢å†å²"><a href="#æœç´¢å†å²" class="headerlink" title="æœç´¢å†å²"></a>æœç´¢å†å²</h2><h3 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h3><ol>
<li>åœ¨ data ä¸­å®šä¹‰æœç´¢å†å²çš„å‡æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// æœç´¢å…³é”®è¯çš„å†å²è®°å½•</span></span><br><span class="line">        <span class="attr">historyKeywords</span>: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;app&#x27;</span>, <span class="string">&#x27;apple&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ¸²æŸ“æœç´¢å†å²åŒºåŸŸçš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢å†å² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœç´¢title --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history-title&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>æœç´¢å†å²<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;trash&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å†å²æœç´¢å…³é”®è¯ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history-keywords&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-tag</span> <span class="attr">:text</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in historyKeywords&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-tag</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç¾åŒ–æœç´¢å†å²åŒºåŸŸçš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.history-container</span> &#123;</span><br><span class="line">    <span class="selector-class">.history-title</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">        <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.history-keywords</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">        <span class="selector-class">.uni-tag</span> &#123;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">10</span>rpx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æŒ‰éœ€å±•ç¤º"><a href="#æŒ‰éœ€å±•ç¤º" class="headerlink" title="æŒ‰éœ€å±•ç¤º"></a>æŒ‰éœ€å±•ç¤º</h3><p>ğŸ¤” å®ç°æœç´¢å»ºè®®å’Œæœç´¢å†å²çš„æŒ‰éœ€å±•ç¤ºã€‚</p>
<ol>
<li><p>å½“æœç´¢ç»“æœçš„é•¿åº¦ç­‰äº 0 çš„æ—¶å€™ï¼ˆsearchResults.length === 0ï¼‰ï¼Œéœ€è¦å±•ç¤ºæœç´¢å†å²åŒºåŸŸï¼Œéšè—æœç´¢å»ºè®®åŒºåŸŸã€‚</p>
</li>
<li><p>å¦åˆ™ï¼Œéœ€è¦å±•ç¤ºæœç´¢å»ºè®®åŒºåŸŸï¼Œéšè—æœç´¢å†å²åŒºåŸŸã€‚</p>
</li>
<li><p>ä½¿ç”¨ v-if å’Œ v-else æ§åˆ¶è¿™ä¸¤ä¸ªåŒºåŸŸçš„æ˜¾ç¤ºå’Œéšè—ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ã€‚</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æœç´¢å†å² --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;history-container&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;searchResults.length === 0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- çœç•¥å…¶å®ƒä»£ç ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æœç´¢åˆ—è¡¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;search-results-list&quot;</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- çœç•¥å…¶å®ƒä»£ç ... --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="è®°å½•å…³é”®è¯"><a href="#è®°å½•å…³é”®è¯" class="headerlink" title="è®°å½•å…³é”®è¯"></a>è®°å½•å…³é”®è¯</h3><p>å°†æœç´¢å…³é”®è¯è¿½åŠ åˆ° historyKeywords æ•°ç»„å¤´éƒ¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®æœç´¢å…³é”®è¯ï¼Œæœç´¢å•†å“å»ºè®®åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getSearchResults</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// çœç•¥å…¶å®ƒä¸å¿…è¦çš„ä»£ç ...</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1. æŸ¥è¯¢åˆ°æœç´¢å»ºè®®ä¹‹åï¼Œè°ƒç”¨ saveSearchHistory() æ–¹æ³•ä¿å­˜æœç´¢å…³é”®è¯</span></span><br><span class="line">        <span class="built_in">this</span>.saveSearchHistory()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 2. æŠŠæœç´¢å…³é”®è¯è¿½åŠ åˆ° historyKeywords æ•°ç»„å¤´éƒ¨</span></span><br><span class="line">    <span class="function"><span class="title">saveSearchHistory</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.historyKeywords = [<span class="built_in">this</span>.kw, ...this.historyKeywords]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è§£å†³å…³é”®è¯é‡å¤çš„é—®é¢˜"><a href="#è§£å†³å…³é”®è¯é‡å¤çš„é—®é¢˜" class="headerlink" title="è§£å†³å…³é”®è¯é‡å¤çš„é—®é¢˜"></a>è§£å†³å…³é”®è¯é‡å¤çš„é—®é¢˜</h3><p>ä¿®æ”¹ saveSearchHistory æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">saveSearchHistory</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­å…³é”®è¯æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">    <span class="keyword">const</span> index = <span class="built_in">this</span>.historyKeywords.indexOf(<span class="built_in">this</span>.kw)</span><br><span class="line">    <span class="keyword">if</span>(index &lt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">// å…³é”®è¯ä¸å­˜åœ¨,ç›´æ¥æ”¾åˆ°å¼€å¤´</span></span><br><span class="line">        <span class="built_in">this</span>.historyKeywords = [<span class="built_in">this</span>.kw, ...this.historyKeywords]</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">// å…³é”®è¯å­˜åœ¨ï¼Œå…ˆåˆ é™¤å­˜åœ¨å…ƒç´ </span></span><br><span class="line">        <span class="built_in">this</span>.historyKeywords.splice(index, <span class="number">1</span>)</span><br><span class="line">        <span class="comment">// å†å°†æ–°è®°å½•æ”¾åˆ°é¦–ä½</span></span><br><span class="line">        <span class="built_in">this</span>.historyKeywords = [<span class="built_in">this</span>.kw, ...this.historyKeywords]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// index &lt; 0 æ²¡æ‰¾åˆ°</span></span><br><span class="line"><span class="comment">// index &gt; -1 æ‰¾åˆ°äº†</span></span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒç§æ–¹æ³•ï¼Œä¿®æ”¹ saveSearchHistory æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿å­˜æœç´¢å…³é”®è¯ä¸ºå†å²è®°å½•</span></span><br><span class="line"><span class="function"><span class="title">saveSearchHistory</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. å°† Array æ•°ç»„è½¬åŒ–ä¸º Set å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>(<span class="built_in">this</span>.historyKeywords)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è°ƒç”¨ Set å¯¹è±¡çš„ delete æ–¹æ³•ï¼Œç§»é™¤å¯¹åº”çš„å…ƒç´ </span></span><br><span class="line">    set.delete(<span class="built_in">this</span>.kw)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. è°ƒç”¨ Set å¯¹è±¡çš„ add æ–¹æ³•ï¼Œå‘ Set ä¸­æ·»åŠ å…ƒç´ </span></span><br><span class="line">    set.add(<span class="built_in">this</span>.kw)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. å°† Set å¯¹è±¡è½¬åŒ–ä¸º Array æ•°ç»„</span></span><br><span class="line">    <span class="built_in">this</span>.historyKeywords = <span class="built_in">Array</span>.from(set)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å°†æœç´¢å†å²è®°å½•æŒä¹…åŒ–"><a href="#å°†æœç´¢å†å²è®°å½•æŒä¹…åŒ–" class="headerlink" title="å°†æœç´¢å†å²è®°å½•æŒä¹…åŒ–"></a>å°†æœç´¢å†å²è®°å½•æŒä¹…åŒ–</h3><ol>
<li>ä¿®æ”¹ saveSearchHistory æ–¹æ³•å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿å­˜æœç´¢å…³é”®è¯ä¸ºå†å²è®°å½•</span></span><br><span class="line"><span class="function"><span class="title">saveSearchHistory</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ...çœç•¥éƒ¨åˆ†ä»£ç </span></span><br><span class="line">    <span class="comment">// è°ƒç”¨ uni.setStorageSync(key, value) å°†æœç´¢å†å²è®°å½•æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">    uni.setStorageSync(<span class="string">&#x27;kw&#x27;</span>, <span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.historyKeywords))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ onLoad ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼ŒåŠ è½½æœ¬åœ°å­˜å‚¨çš„æœç´¢å†å²è®°å½•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.historyKeywords = <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;kw&#x27;</span>) || <span class="string">&#x27;[]&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸…ç©ºæœç´¢å†å²è®°å½•åŠŸèƒ½"><a href="#æ¸…ç©ºæœç´¢å†å²è®°å½•åŠŸèƒ½" class="headerlink" title="æ¸…ç©ºæœç´¢å†å²è®°å½•åŠŸèƒ½"></a>æ¸…ç©ºæœç´¢å†å²è®°å½•åŠŸèƒ½</h3><ol>
<li>ä¸ºæ¸…ç©ºçš„å›¾æ ‡æŒ‰é’®ç»‘å®š click äº‹ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;trash&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;cleanHistory&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ methods ä¸­å®šä¹‰ cleanHistory å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¸…ç©ºæœç´¢å†å²è®°å½•</span></span><br><span class="line"><span class="function"><span class="title">cleanHistory</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ¸…ç©º data ä¸­ä¿å­˜çš„æœç´¢å†å²</span></span><br><span class="line">    <span class="built_in">this</span>.historyKeywords = []</span><br><span class="line">    <span class="comment">// æ¸…ç©ºæœ¬åœ°å­˜å‚¨ä¸­è®°å½•çš„æœç´¢å†å²</span></span><br><span class="line">    uni.setStorageSync(<span class="string">&#x27;kw&#x27;</span>, <span class="string">&#x27;[]&#x27;</span>)</span><br><span class="line">    <span class="comment">// æˆ–è€…</span></span><br><span class="line">    <span class="comment">// uni.removeStorageSync(&#x27;kw&#x27;)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç‚¹å‡»å†å²è·³è½¬åˆ°åˆ—è¡¨é¡µ"><a href="#ç‚¹å‡»å†å²è·³è½¬åˆ°åˆ—è¡¨é¡µ" class="headerlink" title="ç‚¹å‡»å†å²è·³è½¬åˆ°åˆ—è¡¨é¡µ"></a>ç‚¹å‡»å†å²è·³è½¬åˆ°åˆ—è¡¨é¡µ</h3><ol>
<li>ä¸ºæœç´¢å†å²çš„ Item é¡¹ç»‘å®š click äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uni-tag</span> <span class="attr">:text</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in historyKeywords&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;gotoGoodsList(item)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-tag</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ methods ä¸­å®šä¹‰ gotoGoodsList å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»è·³è½¬åˆ°å•†å“åˆ—è¡¨é¡µé¢</span></span><br><span class="line"><span class="function"><span class="title">gotoGoodsList</span>(<span class="params">kw</span>)</span> &#123;</span><br><span class="line">    uni.navigateTo(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/subpkg/goods_list/goods_list?query=&#x27;</span> + kw</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å•†å“åˆ—è¡¨"><a href="#å•†å“åˆ—è¡¨" class="headerlink" title="å•†å“åˆ—è¡¨"></a>å•†å“åˆ—è¡¨</h1><p>ğŸ˜€ ä»é¦–é¡µå„æ¥¼å±‚å¯ä»¥è·³è½¬åˆ°å•†å“åˆ—è¡¨ï¼Œä¼ é€’çš„æ˜¯ queryï¼›ä»åˆ†ç±»é¡µä¹Ÿå¯ä»¥è·³è½¬åˆ°å•†å“åˆ—è¡¨ï¼Œä¼ é€’çš„æ˜¯ cidã€‚</p>
<h2 id="éœ€æ±‚åˆ†ææ€»ç»“"><a href="#éœ€æ±‚åˆ†ææ€»ç»“" class="headerlink" title="éœ€æ±‚åˆ†ææ€»ç»“"></a>éœ€æ±‚åˆ†ææ€»ç»“</h2><ul>
<li><p>  ä¸åŒé¡µé¢è¿›å…¥ï¼Œå¯¹åº”ç€ä¸åŒçš„æŸ¥è¯¢å‚æ•°ã€‚</p>
</li>
<li><p>  ä¸Šæ‹‰åŠ è½½æ›´å¤šï¼ŒèŠ‚æµæ§åˆ¶ä»¥åŠåˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•ã€‚</p>
</li>
<li><p>  ä¸‹æ‹‰åˆ·æ–°ã€‚</p>
</li>
<li><p>  ç‚¹å‡»å•†å“ item è·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µã€‚</p>
</li>
</ul>
<h2 id="å¼€å‘å‰å‡†å¤‡å·¥ä½œ"><a href="#å¼€å‘å‰å‡†å¤‡å·¥ä½œ" class="headerlink" title="å¼€å‘å‰å‡†å¤‡å·¥ä½œ"></a>å¼€å‘å‰å‡†å¤‡å·¥ä½œ</h2><h3 id="è®¾ç½®åˆ—è¡¨é¡µçš„ç¼–è¯‘æ¨¡å¼"><a href="#è®¾ç½®åˆ—è¡¨é¡µçš„ç¼–è¯‘æ¨¡å¼" class="headerlink" title="è®¾ç½®åˆ—è¡¨é¡µçš„ç¼–è¯‘æ¨¡å¼"></a>è®¾ç½®åˆ—è¡¨é¡µçš„ç¼–è¯‘æ¨¡å¼</h3><img src="/resource/images/image (11).png"/>

<h3 id="é¡µé¢æ•´ä½“ç»“æ„åˆ†ææ­å»º"><a href="#é¡µé¢æ•´ä½“ç»“æ„åˆ†ææ­å»º" class="headerlink" title="é¡µé¢æ•´ä½“ç»“æ„åˆ†ææ­å»º"></a>é¡µé¢æ•´ä½“ç»“æ„åˆ†ææ­å»º</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;goods-image&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å•†å“å³ä¾§ä¿¡æ¯åŒºåŸŸ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å•†å“æ ‡é¢˜ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="å®šä¹‰è¯·æ±‚å‚æ•°å¯¹è±¡"><a href="#å®šä¹‰è¯·æ±‚å‚æ•°å¯¹è±¡" class="headerlink" title="å®šä¹‰è¯·æ±‚å‚æ•°å¯¹è±¡"></a>å®šä¹‰è¯·æ±‚å‚æ•°å¯¹è±¡</h2><p>ä¸ºäº†æ–¹ä¾¿å‘èµ·è¯·æ±‚è·å–å•†å“åˆ—è¡¨çš„æ•°æ®ï¼Œæˆ‘ä»¬è¦æ ¹æ®æ¥å£çš„è¦æ±‚ï¼Œäº‹å…ˆå®šä¹‰ä¸€ä¸ªè¯·æ±‚å‚æ•°å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚å‚æ•°å¯¹è±¡</span></span><br><span class="line">        <span class="attr">queryObj</span>: &#123;</span><br><span class="line">            <span class="comment">// æŸ¥è¯¢å…³é”®è¯</span></span><br><span class="line">            <span class="attr">query</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="comment">// å•†å“åˆ†ç±»Id</span></span><br><span class="line">            <span class="attr">cid</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="comment">// é¡µç å€¼</span></span><br><span class="line">            <span class="attr">pagenum</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="comment">// æ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡æ•°æ®</span></span><br><span class="line">            <span class="attr">pagesize</span>: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°†é¡µé¢è·³è½¬æ—¶æºå¸¦çš„å‚æ•°ï¼Œè½¬å­˜åˆ° queryObj å¯¹è±¡ä¸­ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å°†é¡µé¢å‚æ•°ä¿å­˜åˆ° this.queryObj å¯¹è±¡ä¸­</span></span><br><span class="line">    <span class="built_in">this</span>.queryObj.query = options.query || <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.queryObj.cid = options.cid || <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦å†™æ³•</span></span><br><span class="line">    <span class="comment">// this.queryObj.query = options.query ?? &#x27;&#x27;</span></span><br><span class="line">    <span class="comment">// this.queryObj.cid = options.cid ?? &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦å°å‘</span></span><br><span class="line">    <span class="comment">// 0 ?? &#x27;abc&#x27; // è¿”å›å€¼ï¼š0</span></span><br><span class="line">    <span class="comment">// 0 || &#x27;abc&#x27; // è¿”å›å€¼ï¼š&#x27;abc&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·å–å•†å“åˆ—è¡¨æ•°æ®"><a href="#è·å–å•†å“åˆ—è¡¨æ•°æ®" class="headerlink" title="è·å–å•†å“åˆ—è¡¨æ•°æ®"></a>è·å–å•†å“åˆ—è¡¨æ•°æ®</h2><ol>
<li>åœ¨ data ä¸­æ–°å¢å¦‚ä¸‹çš„æ•°æ®èŠ‚ç‚¹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å•†å“åˆ—è¡¨çš„æ•°æ®</span></span><br><span class="line">        <span class="attr">goodsList</span>: [],</span><br><span class="line">        <span class="comment">// æ€»æ•°é‡ï¼Œç”¨æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦è¯·æ±‚å®Œæ¯•</span></span><br><span class="line">        <span class="attr">total</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ onLoad ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œè°ƒç”¨ getGoodsList æ–¹æ³•è·å–å•†å“åˆ—è¡¨æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨è·å–å•†å“åˆ—è¡¨æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ methods èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜ getGoodsList æ–¹æ³•å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// è·å–å•†å“åˆ—è¡¨æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getGoodsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// å‘èµ·è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/search&#x27;</span>, <span class="built_in">this</span>.queryObj)</span><br><span class="line">        <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">        <span class="comment">// ä¸ºæ•°æ®èµ‹å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.goodsList = res.message.goods</span><br><span class="line">        <span class="built_in">this</span>.total = res.message.total</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¸²æŸ“å•†å“åˆ—è¡¨ç»“æ„"><a href="#æ¸²æŸ“å•†å“åˆ—è¡¨ç»“æ„" class="headerlink" title="æ¸²æŸ“å•†å“åˆ—è¡¨ç»“æ„"></a>æ¸²æŸ“å•†å“åˆ—è¡¨ç»“æ„</h2><ol>
<li>åœ¨é¡µé¢ä¸­ï¼Œé€šè¿‡ v-for æŒ‡ä»¤ï¼Œå¾ªç¯æ¸²æŸ“å‡ºå•†å“çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;goods-image&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;item.goods_small_logo || defaultPic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å•†å“å³ä¾§ä¿¡æ¯åŒºåŸŸ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å•†å“æ ‡é¢˜ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-name&quot;</span>&gt;</span>&#123;&#123;item.goods_name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>&#123;&#123;item.goods_price&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¸ºäº†é˜²æ­¢æŸäº›å•†å“çš„å›¾ç‰‡ä¸å­˜åœ¨ï¼Œéœ€è¦åœ¨ data ä¸­å®šä¹‰ä¸€ä¸ªé»˜è®¤çš„å›¾ç‰‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// é»˜è®¤çš„ç©ºå›¾ç‰‡</span></span><br><span class="line">        <span class="attr">defaultPic</span>: <span class="string">&#x27;https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å¹¶åœ¨é¡µé¢æ¸²æŸ“æ—¶æŒ‰éœ€ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;goods.goods_small_logo || defaultPic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-image&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ç¾åŒ–å•†å“åˆ—è¡¨çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods-list</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#efefef</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">8</span>rpx;</span><br><span class="line">    <span class="selector-class">.goods-item</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#efefef</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">8</span>rpx;</span><br><span class="line">        <span class="selector-class">.goods-item-left</span> &#123;</span><br><span class="line">            <span class="selector-class">.goods-image</span> &#123;</span><br><span class="line">                <span class="attribute">width</span>: <span class="number">200</span>rpx;</span><br><span class="line">                <span class="attribute">height</span>: <span class="number">200</span>rpx;</span><br><span class="line">                <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.goods-item-right</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">flex-direction</span>: column;</span><br><span class="line">            <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">            <span class="selector-class">.goods-name</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="selector-class">.goods-price</span> &#123;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">                <span class="attribute">color</span>: <span class="number">#c00000</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å°è£…å•†å“-item-ç»„ä»¶"><a href="#å°è£…å•†å“-item-ç»„ä»¶" class="headerlink" title="å°è£…å•†å“ item ç»„ä»¶"></a>å°è£…å•†å“ item ç»„ä»¶</h2><ol>
<li>åœ¨ components ç›®å½•ä¸Šé¼ æ ‡å³é”®ï¼Œé€‰æ‹© æ–°å»ºç»„ä»¶ã€‚</li>
</ol>
<img src="/resource/images/6-2.6a66124f.png"/>

<ol start="2">
<li>å°† goods_list é¡µé¢ä¸­ï¼Œå…³äºå•†å“ item é¡¹ç›¸å…³çš„ UI ç»“æ„ã€æ ·å¼ã€data æ•°æ®ï¼Œè¿ç§»åˆ° my-goods ç»„ä»¶ä¸­ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">&quot;goods-image&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;goods.goods_small_logo || defaultPic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“å³ä¾§ä¿¡æ¯åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å•†å“æ ‡é¢˜ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-name&quot;</span>&gt;</span>&#123;&#123;goods.goods_name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>&#123;&#123;goods.goods_price&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">name</span>: <span class="string">&#x27;my-goods&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="comment">// å®šä¹‰ props å±æ€§ï¼Œç”¨æ¥æ¥æ”¶å¤–ç•Œä¼ é€’åˆ°å½“å‰ç»„ä»¶çš„æ•°æ®</span></span></span><br><span class="line"><span class="javascript">        <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">            <span class="comment">// å•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">            <span class="attr">goods</span>: &#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">                <span class="attr">defaul</span>: &#123;&#125;,</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="comment">// é»˜è®¤çš„ç©ºå›¾ç‰‡</span></span></span><br><span class="line"><span class="javascript">                <span class="attr">defaultPic</span>: <span class="string">&#x27;https://img3.doubanio.com/f/movie/8dd0c794499fe925ae2ae89ee30cd225750457b4/pics/movie/celebrity-default-medium.png&#x27;</span>,</span></span><br><span class="line"><span class="javascript">            &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.goods-item</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">        <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#efefef</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding</span>: <span class="number">8</span>rpx;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.goods-item-left</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.goods-image</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="attribute">width</span>: <span class="number">200</span>rpx;</span></span><br><span class="line"><span class="css">                <span class="attribute">height</span>: <span class="number">200</span>rpx;</span></span><br><span class="line"><span class="css">                <span class="attribute">vertical-align</span>: middle;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.goods-item-right</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="css">            <span class="attribute">flex-direction</span>: column;</span></span><br><span class="line"><span class="css">            <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.goods-title</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.goods-price</span> &#123;</span></span><br><span class="line"><span class="css">                <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span></span><br><span class="line"><span class="css">                <span class="attribute">color</span>: <span class="number">#c00000</span>;</span></span><br><span class="line"><span class="css">            &#125;</span></span><br><span class="line"><span class="css">        &#125;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ goods_list ç»„ä»¶ä¸­ï¼Œå¾ªç¯æ¸²æŸ“ my-goods ç»„ä»¶å³å¯ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¸º my-goods ç»„ä»¶åŠ¨æ€ç»‘å®š goods å±æ€§çš„å€¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;item&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><font color=e32d40><strong>4. ä½¿ç”¨ç»„ä»¶å¦‚æœæ²¡ååº”çš„è¯ï¼Œå°è¯•é‡æ–°ç¼–è¯‘ HBuilder æˆ–é‡å¯å¾®ä¿¡å¼€å‘è€…å·¥å…·ã€‚</strong></font></p>
<h2 id="ä½¿ç”¨è¿‡æ»¤å™¨å¤„ç†ä»·æ ¼"><a href="#ä½¿ç”¨è¿‡æ»¤å™¨å¤„ç†ä»·æ ¼" class="headerlink" title="ä½¿ç”¨è¿‡æ»¤å™¨å¤„ç†ä»·æ ¼"></a>ä½¿ç”¨è¿‡æ»¤å™¨å¤„ç†ä»·æ ¼</h2><ol>
<li>åœ¨ my-goods ç»„ä»¶ä¸­ï¼Œå’Œ data å­—æ®µå¹³çº§ï¼Œå£°æ˜ filters è¿‡æ»¤å™¨èŠ‚ç‚¹å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">filters: &#123;</span><br><span class="line">    <span class="comment">// æŠŠæ•°å­—å¤„ç†ä¸ºå¸¦ä¸¤ä½å°æ•°ç‚¹çš„æ•°å­—</span></span><br><span class="line">    <span class="function"><span class="title">tofixed</span>(<span class="params">num</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Number</span>(num).toFixed(<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨æ¸²æŸ“å•†å“ä»·æ ¼çš„æ—¶å€™ï¼Œé€šè¿‡ç®¡é“ç¬¦ | è°ƒç”¨è¿‡æ»¤å™¨ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>ï¿¥&#123;&#123;goods.goods_price | tofixed&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>Vue3 ä¸­å·²ç»ç§»é™¤äº†è¿‡æ»¤å™¨ï¼Œæ¨èä½¿ç”¨ methods æˆ–è®¡ç®—å±æ€§ã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1ã€ç›´æ¥åœ¨é¡µé¢ä¸­çš„æ’å€¼è¡¨è¾¾å¼ä¸­ä½¿ç”¨ Number æ–¹æ³•ï¼š&#123;&#123;Number(goods.goods_price).toFixed(2)&#125;</span><br><span class="line"></span><br><span class="line">2ã€åœ¨methodså¯¹è±¡ä¸­å®šä¹‰æ–¹æ³•ï¼Œåœ¨æ’å€¼è¡¨è¾¾å¼ä¸­è°ƒç”¨</span><br><span class="line">methods: &#123;</span><br><span class="line">    tofixed(num) &#123;</span><br><span class="line">        <span class="built_in">return</span> Number(num).toFixed(2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;&#123;tofixed(goods.goods_price)&#125;&#125;</span><br><span class="line"></span><br><span class="line">3ã€ä½¿ç”¨ computed è®¡ç®—å±æ€§</span><br><span class="line">computed:&#123;</span><br><span class="line">    <span class="function"><span class="title">tofixed</span></span>()&#123;</span><br><span class="line">        <span class="built_in">return</span> Number(this.goods.goods_price).toFixed(2)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;&#123;tofixed&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ•ˆæœ"><a href="#ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ•ˆæœ" class="headerlink" title="ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ•ˆæœ"></a>ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ•ˆæœ</h2><h3 id="åˆæ­¥å®ç°ä¸Šæ‹‰åŠ è½½æ›´å¤š"><a href="#åˆæ­¥å®ç°ä¸Šæ‹‰åŠ è½½æ›´å¤š" class="headerlink" title="åˆæ­¥å®ç°ä¸Šæ‹‰åŠ è½½æ›´å¤š"></a>åˆæ­¥å®ç°ä¸Šæ‹‰åŠ è½½æ›´å¤š</h3><ol>
<li>æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸­çš„ pages.json é…ç½®æ–‡ä»¶ï¼Œä¸º subPackages åˆ†åŒ…ä¸­çš„ goods_list é¡µé¢é…ç½®ä¸Šæ‹‰è§¦åº•çš„è·ç¦»ã€‚</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;subPackages&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;root&quot;</span>: <span class="string">&quot;subpkg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;pages&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;goods_detail/goods_detail&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;goods_list/goods_list&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;style&quot;</span>: &#123;</span><br><span class="line">                        <span class="attr">&quot;onReachBottomDistance&quot;</span>: <span class="number">150</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;search/search&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ goods_list é¡µé¢ä¸­ï¼Œå’Œ methods å¹³çº§ï¼Œå£°æ˜ onReachBottom äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç”¨æ¥ç›‘å¬é¡µé¢çš„ä¸Šæ‹‰è§¦åº•è¡Œä¸ºã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§¦åº•çš„äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="title">onReachBottom</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è®©é¡µç å€¼è‡ªå¢ +1</span></span><br><span class="line">    <span class="built_in">this</span>.queryObj.pagenum += <span class="number">1</span></span><br><span class="line">    <span class="comment">// è·å–åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ”¹é€  methods ä¸­çš„ getGoodsList å‡½æ•°ï¼Œå½“åˆ—è¡¨æ•°æ®è¯·æ±‚æˆåŠŸä¹‹åï¼Œè¿›è¡Œæ–°æ—§æ•°æ®çš„æ‹¼æ¥å¤„ç†ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å•†å“åˆ—è¡¨æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getGoodsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å‘èµ·è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/search&#x27;</span>, <span class="built_in">this</span>.queryObj)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="comment">// ä¸ºæ•°æ®èµ‹å€¼ï¼šé€šè¿‡å±•å¼€è¿ç®—ç¬¦çš„å½¢å¼ï¼Œè¿›è¡Œæ–°æ—§æ•°æ®çš„æ‹¼æ¥</span></span><br><span class="line">    <span class="built_in">this</span>.goodsList = [...this.goodsList, ...res.message.goods]</span><br><span class="line">    <span class="built_in">this</span>.total = res.message.total</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€šè¿‡èŠ‚æµé˜€æ§åˆ¶è¯·æ±‚"><a href="#é€šè¿‡èŠ‚æµé˜€æ§åˆ¶è¯·æ±‚" class="headerlink" title="é€šè¿‡èŠ‚æµé˜€æ§åˆ¶è¯·æ±‚"></a>é€šè¿‡èŠ‚æµé˜€æ§åˆ¶è¯·æ±‚</h3><ol>
<li>åœ¨ data ä¸­å®šä¹‰ isloading èŠ‚æµé˜€å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// #1 æ˜¯å¦æ­£åœ¨è¯·æ±‚æ•°æ®</span></span><br><span class="line">        <span class="attr">isloading</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ getGoodsList æ–¹æ³•ï¼Œåœ¨è¯·æ±‚æ•°æ®å‰åï¼Œåˆ†åˆ«æ‰“å¼€å’Œå…³é—­èŠ‚æµé˜€ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å•†å“åˆ—è¡¨æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getGoodsList</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// #2 æ‰“å¼€èŠ‚æµé˜€</span></span><br><span class="line">    <span class="built_in">this</span>.isloading = <span class="literal">true</span></span><br><span class="line">    <span class="comment">// å‘èµ·è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/search&#x27;</span>, <span class="built_in">this</span>.queryObj)</span><br><span class="line">    <span class="comment">// #3 å…³é—­èŠ‚æµé˜€</span></span><br><span class="line">    <span class="built_in">this</span>.isloading = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// çœç•¥å…¶å®ƒä»£ç ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ onReachBottom è§¦åº•äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œæ ¹æ®èŠ‚æµé˜€çš„çŠ¶æ€ï¼Œæ¥å†³å®šæ˜¯å¦å‘èµ·è¯·æ±‚ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§¦åº•çš„äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="title">onReachBottom</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// #4 åˆ¤æ–­æ˜¯å¦æ­£åœ¨è¯·æ±‚å…¶å®ƒæ•°æ®ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸å‘èµ·é¢å¤–çš„è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.isloading) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// è®©é¡µç å€¼è‡ªå¢ +1</span></span><br><span class="line">    <span class="built_in">this</span>.queryObj.pagenum += <span class="number">1</span></span><br><span class="line">    <span class="comment">// è·å–åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•"><a href="#åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•" class="headerlink" title="åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•"></a>åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</h3><ol>
<li>å¦‚æœä¸‹é¢çš„å…¬å¼æˆç«‹ï¼Œåˆ™è¯æ˜æ²¡æœ‰ä¸‹ä¸€é¡µæ•°æ®äº†ã€‚</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å½“å‰çš„é¡µç å€¼ * æ¯é¡µæ˜¾ç¤ºå¤šå°‘æ¡æ•°æ® &gt;= æ€»æ•°æ¡æ•°</span><br><span class="line">pagenum * pagesize &gt;= total</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ onReachBottom äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§¦åº•çš„äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="title">onReachBottom</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€é¡µæ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.queryObj.pagenum * <span class="built_in">this</span>.queryObj.pagesize &gt;= <span class="built_in">this</span>.total) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;æ•°æ®åŠ è½½å®Œæ¯•ï¼&#x27;</span>)</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦æ­£åœ¨è¯·æ±‚å…¶å®ƒæ•°æ®ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸å‘èµ·é¢å¤–çš„è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.isloading) <span class="keyword">return</span></span><br><span class="line">    <span class="comment">// è®©é¡µç å€¼è‡ªå¢ +1</span></span><br><span class="line">    <span class="built_in">this</span>.queryObj.pagenum += <span class="number">1</span></span><br><span class="line">    <span class="comment">// è·å–åˆ—è¡¨æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsList()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å•†å“åˆ—è¡¨çš„ä¸‹æ‹‰åˆ·æ–°"><a href="#å•†å“åˆ—è¡¨çš„ä¸‹æ‹‰åˆ·æ–°" class="headerlink" title="å•†å“åˆ—è¡¨çš„ä¸‹æ‹‰åˆ·æ–°"></a>å•†å“åˆ—è¡¨çš„ä¸‹æ‹‰åˆ·æ–°</h2><ol>
<li>åœ¨ <code>pages.json</code> é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸ºå½“å‰çš„ goods_list é¡µé¢å•ç‹¬å¼€å¯ä¸‹æ‹‰åˆ·æ–°æ•ˆæœã€‚</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;subPackages&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;root&quot;</span>: <span class="string">&quot;subpkg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;pages&quot;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;goods_detail/goods_detail&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;goods_list/goods_list&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;style&quot;</span>: &#123;</span><br><span class="line">                        <span class="attr">&quot;onReachBottomDistance&quot;</span>: <span class="number">150</span>,</span><br><span class="line">                        <span class="attr">&quot;enablePullDownRefresh&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">&quot;backgroundColor&quot;</span>: <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;path&quot;</span>: <span class="string">&quot;search/search&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;style&quot;</span>: &#123;&#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç›‘å¬é¡µé¢çš„ onPullDownRefresh äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸‹æ‹‰åˆ·æ–°çš„äº‹ä»¶</span></span><br><span class="line"><span class="function"><span class="title">onPullDownRefresh</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. é‡ç½®å…³é”®æ•°æ®</span></span><br><span class="line">    <span class="built_in">this</span>.queryObj.pagenum = <span class="number">1</span></span><br><span class="line">    <span class="built_in">this</span>.total = <span class="number">0</span></span><br><span class="line">    <span class="built_in">this</span>.isloading = <span class="literal">false</span></span><br><span class="line">    <span class="built_in">this</span>.goodsList = []</span><br><span class="line">    <span class="comment">// 2. é‡æ–°å‘èµ·è¯·æ±‚</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsList(<span class="function">() =&gt;</span> uni.stopPullDownRefresh())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¿®æ”¹ getGoodsList å‡½æ•°ï¼Œæ¥æ”¶ cb å›è°ƒå‡½æ•°å¹¶æŒ‰éœ€è¿›è¡Œè°ƒç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å•†å“åˆ—è¡¨æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getGoodsList</span>(<span class="params">cb</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.isloading = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/search&#x27;</span>, <span class="built_in">this</span>.queryObj)</span><br><span class="line">    <span class="built_in">this</span>.isloading = <span class="literal">false</span></span><br><span class="line">    <span class="comment">// åªè¦æ•°æ®è¯·æ±‚å®Œæ¯•ï¼Œå°±ç«‹å³æŒ‰éœ€è°ƒç”¨ cb å›è°ƒå‡½æ•°</span></span><br><span class="line">    cb &amp;&amp; cb()</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="built_in">this</span>.goodsList = [...this.goodsList, ...res.message.goods]</span><br><span class="line">    <span class="built_in">this</span>.total = res.message.total</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç‚¹å‡»åˆ—è¡¨é¡¹è·³è½¬è¯¦æƒ…"><a href="#ç‚¹å‡»åˆ—è¡¨é¡¹è·³è½¬è¯¦æƒ…" class="headerlink" title="ç‚¹å‡»åˆ—è¡¨é¡¹è·³è½¬è¯¦æƒ…"></a>ç‚¹å‡»åˆ—è¡¨é¡¹è·³è½¬è¯¦æƒ…</h2><ol>
<li>åœ¨ goods_list ç»„ä»¶ä¸­ä¸º <code>&lt;my-goods/&gt;</code> ç»„ä»¶åŒ…è£¹ä¸€å±‚ä¿® view ç»„ä»¶ï¼Œå¹¶ç»‘å®š click ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in goodsList&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;gotoDetail(item)&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸º my-goods ç»„ä»¶åŠ¨æ€ç»‘å®š goods å±æ€§çš„å€¼ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ methods å­—æ®µä¸­ï¼Œå®šä¹‰ gotoDetail äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»è·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µé¢</span></span><br><span class="line"><span class="function"><span class="title">gotoDetail</span>(<span class="params">goods</span>)</span> &#123;</span><br><span class="line">    uni.navigateTo(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/subpkg/goods_detail/goods_detail?goods_id=&#x27;</span> + goods.goods_id</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å•†å“è¯¦æƒ…"><a href="#å•†å“è¯¦æƒ…" class="headerlink" title="å•†å“è¯¦æƒ…"></a>å•†å“è¯¦æƒ…</h1><h2 id="å•†å“éœ€æ±‚åˆ†æ"><a href="#å•†å“éœ€æ±‚åˆ†æ" class="headerlink" title="å•†å“éœ€æ±‚åˆ†æ"></a>å•†å“éœ€æ±‚åˆ†æ</h2><ol>
<li><p>é¡µé¢ä¼ å…¥çš„å‚æ•°æ˜¯å•†å“ idã€‚</p>
</li>
<li><p>è½®æ’­å›¾ç»„ä»¶ <code>&lt;swiper/&gt;</code>ï¼ˆå°ç¨‹åºåŸç”Ÿï¼‰ã€‚</p>
</li>
<li><p>å•†å“è¯¦æƒ…æ¸²æŸ“ä½¿ç”¨çš„æ˜¯ <code>&lt;rich-text/&gt;</code> ç»„ä»¶ï¼ˆå°ç¨‹åºåŸç”Ÿï¼‰ã€‚</p>
</li>
<li><p>å•†å“å¯¼èˆªç»„ä»¶ <code>&lt;uni-goods-nav/&gt;</code>ï¼ˆuni-uiï¼‰ã€‚</p>
</li>
</ol>
<h2 id="å¼€å‘å‡†å¤‡å·¥ä½œ"><a href="#å¼€å‘å‡†å¤‡å·¥ä½œ" class="headerlink" title="å¼€å‘å‡†å¤‡å·¥ä½œ"></a>å¼€å‘å‡†å¤‡å·¥ä½œ</h2><p>æ·»åŠ å•†å“è¯¦æƒ…é¡µçš„ç¼–è¯‘æ¨¡å¼ï¼Œåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œç‚¹å‡»å·¥å…·æ ä¸Šçš„ç¼–è¯‘æ¨¡å¼ä¸‹æ‹‰èœå•ï¼Œé€‰æ‹©æ·»åŠ ç¼–è¯‘æ¨¡å¼é€‰é¡¹ã€‚</p>
<img src="/resource/images/image (12).png"/>

<p>å‹¾é€‰ å¯åŠ¨é¡µé¢ çš„è·¯å¾„ï¼Œå¹¶å¡«å†™äº† å¯åŠ¨å‚æ•° ä¹‹åï¼Œç‚¹å‡» ç¡®å®š æŒ‰é’®ï¼Œæ·»åŠ è¯¦æƒ…é¡µé¢çš„ç¼–è¯‘æ¨¡å¼ã€‚</p>
<img src="/resource/images/7-2.82dd8e0f.png"/>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“å›¾ç‰‡è½®æ’­å›¾ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">swiper</span>&gt;</span> <span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span> å•†å“ä¿¡æ¯ <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“è¯¦ç»†ä»‹ç» --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rich-text</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“å¯¼èˆª --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span> ä½¿ç”¨uni-uiç»„ä»¶åº“ <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="è·å–å•†å“è¯¦æƒ…"><a href="#è·å–å•†å“è¯¦æƒ…" class="headerlink" title="è·å–å•†å“è¯¦æƒ…"></a>è·å–å•†å“è¯¦æƒ…</h2><p>åœ¨ data ä¸­å®šä¹‰å•†å“è¯¦æƒ…çš„æ•°æ®èŠ‚ç‚¹ï¼Œ<code>subpkg/goods_detail/goods_detail.vue</code>ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å•†å“è¯¦æƒ…å¯¹è±¡</span></span><br><span class="line">        <span class="attr">goodsDetail</span>: &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ onLoad ä¸­è·å–å•†å“çš„ Idï¼Œå¹¶è°ƒç”¨è¯·æ±‚å•†å“è¯¦æƒ…çš„æ–¹æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onLoad</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è·å–å•†å“ Id</span></span><br><span class="line">    <span class="keyword">const</span> goods_id = options.goods_id</span><br><span class="line">    <span class="comment">// è°ƒç”¨è¯·æ±‚å•†å“è¯¦æƒ…æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">this</span>.getGoodsDetail(goods_id)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ methods ä¸­å£°æ˜ getGoodsDetail æ–¹æ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰è¯·æ±‚å•†å“è¯¦æƒ…æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getGoodsDetail</span>(<span class="params">goods_id</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/detail&#x27;</span>, &#123; goods_id &#125;)</span><br><span class="line">        <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">        <span class="comment">// ä¸º data ä¸­çš„æ•°æ®èµ‹å€¼</span></span><br><span class="line">        <span class="built_in">this</span>.goodsDetail = res.message</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¸²æŸ“å•†å“è¯¦æƒ…"><a href="#æ¸²æŸ“å•†å“è¯¦æƒ…" class="headerlink" title="æ¸²æŸ“å•†å“è¯¦æƒ…"></a>æ¸²æŸ“å•†å“è¯¦æƒ…</h2><h3 id="æ¸²æŸ“è½®æ’­å›¾åŒºåŸŸ"><a href="#æ¸²æŸ“è½®æ’­å›¾åŒºåŸŸ" class="headerlink" title="æ¸²æŸ“è½®æ’­å›¾åŒºåŸŸ"></a>æ¸²æŸ“è½®æ’­å›¾åŒºåŸŸ</h3><ol>
<li>ä½¿ç”¨ v-for æŒ‡ä»¤ï¼Œå¾ªç¯æ¸²æŸ“å¦‚ä¸‹çš„è½®æ’­å›¾ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è½®æ’­å›¾åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">:indicator-dots</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:autoplay</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:interval</span>=<span class="string">&quot;3000&quot;</span> <span class="attr">:duration</span>=<span class="string">&quot;1000&quot;</span> <span class="attr">:circular</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in goodsDetail.pics&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.pics_big&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–è½®æ’­å›¾çš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">swiper &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">750</span>rpx;</span><br><span class="line">    image &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ç°è½®æ’­å›¾é¢„è§ˆ"><a href="#å®ç°è½®æ’­å›¾é¢„è§ˆ" class="headerlink" title="å®ç°è½®æ’­å›¾é¢„è§ˆ"></a>å®ç°è½®æ’­å›¾é¢„è§ˆ</h3><p><a target="_blank" rel="noopener" href="https://uniapp.dcloud.net.cn/api/media/image.html#unipreviewimageobject">uni.previewImage(OBJECT)</a></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/media/image/wx.previewImage.html">wx.previewImage(Object object)</a></p>
<ol>
<li>ä¸ºè½®æ’­å›¾ä¸­çš„ image å›¾ç‰‡ç»‘å®š click äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, i) in goodsDetail.pics&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æŠŠå½“å‰ç‚¹å‡»çš„å›¾ç‰‡çš„ç´¢å¼•ï¼Œä¼ é€’åˆ° preview() å¤„ç†å‡½æ•°ä¸­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;item.pics_big&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;preview(i)&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ methods ä¸­å®šä¹‰ preview äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°è½®æ’­å›¾çš„é¢„è§ˆæ•ˆæœ</span></span><br><span class="line"><span class="function"><span class="title">preview</span>(<span class="params">i</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨ uni.previewImage() æ–¹æ³•é¢„è§ˆå›¾ç‰‡</span></span><br><span class="line">    uni.previewImage(&#123;</span><br><span class="line">        <span class="comment">// é¢„è§ˆæ—¶ï¼Œé»˜è®¤æ˜¾ç¤ºå›¾ç‰‡çš„ç´¢å¼•</span></span><br><span class="line">        <span class="attr">current</span>: i,</span><br><span class="line">        <span class="comment">// æ‰€æœ‰å›¾ç‰‡ url åœ°å€çš„æ•°ç»„</span></span><br><span class="line">        <span class="attr">urls</span>: <span class="built_in">this</span>.goodsDetail.pics.map(<span class="function"><span class="params">x</span> =&gt;</span> x.pics_big)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“å•†å“çš„ä¿¡æ¯"><a href="#æ¸²æŸ“å•†å“çš„ä¿¡æ¯" class="headerlink" title="æ¸²æŸ“å•†å“çš„ä¿¡æ¯"></a>æ¸²æŸ“å•†å“çš„ä¿¡æ¯</h3><ol>
<li>å®šä¹‰å•†å“ä¿¡æ¯åŒºåŸŸçš„ UI ç»“æ„å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“ä¿¡æ¯åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-info-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;price&quot;</span>&gt;</span>ï¿¥&#123;&#123;goodsDetail.goods_price&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¿¡æ¯ä¸»ä½“åŒºåŸŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-info-body&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“åç§° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-name&quot;</span>&gt;</span>&#123;&#123;goodsDetail.goods_name&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ”¶è— --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;favi&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;star&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span> <span class="attr">color</span>=<span class="string">&quot;gray&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span>&gt;</span>æ”¶è—<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è¿è´¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;yf&quot;</span>&gt;</span>å¿«é€’ï¼šå…è¿è´¹<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–å•†å“ä¿¡æ¯åŒºåŸŸçš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">// å•†å“ä¿¡æ¯åŒºåŸŸçš„æ ·å¼</span><br><span class="line"><span class="selector-class">.goods-info-box</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="selector-class">.price</span> &#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#c00000</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.goods-info-body</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">        <span class="selector-class">.goods-name</span> &#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">            <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        // æ”¶è—åŒºåŸŸ</span><br><span class="line">        <span class="selector-class">.favi</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">120px</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">flex-direction</span>: column;</span><br><span class="line">            <span class="attribute">justify-content</span>: center;</span><br><span class="line">            <span class="attribute">align-items</span>: center;</span><br><span class="line">            <span class="attribute">border-left</span>: <span class="number">1px</span> solid <span class="number">#efefef</span>;</span><br><span class="line">            <span class="attribute">color</span>: gray;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // è¿è´¹</span><br><span class="line">    <span class="selector-class">.yf</span> &#123;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">color</span>: gray;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“å•†å“çš„è¯¦æƒ…"><a href="#æ¸²æŸ“å•†å“çš„è¯¦æƒ…" class="headerlink" title="æ¸²æŸ“å•†å“çš„è¯¦æƒ…"></a>æ¸²æŸ“å•†å“çš„è¯¦æƒ…</h3><ol>
<li>åœ¨é¡µé¢ç»“æ„ä¸­ï¼Œä½¿ç”¨ rich-text ç»„ä»¶ï¼Œå°†å¸¦æœ‰ HTML æ ‡ç­¾çš„å†…å®¹ï¼Œæ¸²æŸ“ä¸ºå°ç¨‹åºçš„é¡µé¢ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“è¯¦æƒ…ä¿¡æ¯ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">:nodes</span>=<span class="string">&quot;goodsDetail.goods_introduce&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ getGoodsDetail æ–¹æ³•ï¼Œä»è€Œè§£å†³å›¾ç‰‡åº•éƒ¨ ç©ºç™½é—´éš™ çš„é—®é¢˜ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰è¯·æ±‚å•†å“è¯¦æƒ…æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getGoodsDetail</span>(<span class="params">goods_id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/detail&#x27;</span>, &#123; goods_id &#125;)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å­—ç¬¦ä¸²çš„ replace() æ–¹æ³•ï¼Œä¸º img æ ‡ç­¾æ·»åŠ è¡Œå†…çš„ style æ ·å¼ï¼Œä»è€Œè§£å†³å›¾ç‰‡åº•éƒ¨ç©ºç™½é—´éš™çš„é—®é¢˜</span></span><br><span class="line">    res.message.goods_introduce = res.message.goods_introduce.replace(<span class="regexp">/&lt;img /g</span>, <span class="string">&#x27;&lt;img style=&quot;display:block;&quot; &#x27;</span>)</span><br><span class="line">    <span class="comment">// æˆ–è€…</span></span><br><span class="line">    <span class="comment">// res.message.goods_introduce = res.message.goods_introduce.replace(/&lt;img /g, &#x27;&lt;img style=&quot;vertical-align: middle;&quot;&#x27;)</span></span><br><span class="line">    <span class="built_in">this</span>.goodsDetail = res.message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>è§£å†³ .webp æ ¼å¼å›¾ç‰‡åœ¨ ios è®¾å¤‡ä¸Šæ— æ³•æ­£å¸¸æ˜¾ç¤ºçš„é—®é¢˜ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰è¯·æ±‚å•†å“è¯¦æƒ…æ•°æ®çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getGoodsDetail</span>(<span class="params">goods_id</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.get(<span class="string">&#x27;/goods/detail&#x27;</span>, &#123; goods_id &#125;)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg()</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å­—ç¬¦ä¸²çš„ replace() æ–¹æ³•ï¼Œå°† webp çš„åç¼€åæ›¿æ¢ä¸º jpg çš„åç¼€å</span></span><br><span class="line">    res.message.goods_introduce = res.message.goods_introduce.replace(<span class="regexp">/&lt;img /g</span>, <span class="string">&#x27;&lt;img style=&quot;display:block;&quot; &#x27;</span>).replace(<span class="regexp">/webp/g</span>, <span class="string">&#x27;jpg&#x27;</span>)</span><br><span class="line">    <span class="built_in">this</span>.goodsDetail = res.message</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è§£å†³ä»·æ ¼çš„é—ªçƒ"><a href="#è§£å†³ä»·æ ¼çš„é—ªçƒ" class="headerlink" title="è§£å†³ä»·æ ¼çš„é—ªçƒ"></a>è§£å†³ä»·æ ¼çš„é—ªçƒ</h3><ol>
<li><p>å¯¼è‡´é—®é¢˜çš„åŸå› ï¼šåœ¨å•†å“è¯¦æƒ…æ•°æ®è¯·æ±‚å›æ¥ä¹‹å‰ï¼Œdata ä¸­ goodsDetail çš„å€¼ä¸º {}ï¼Œå› æ­¤åˆæ¬¡æ¸²æŸ“é¡µé¢æ—¶ï¼Œä¼šå¯¼è‡´ å•†å“ä»·æ ¼ã€å•†å“åç§° ç­‰é—ªçƒçš„é—®é¢˜ã€‚</p>
</li>
<li><p>è§£å†³æ–¹æ¡ˆï¼šåˆ¤æ–­ goodsDetail.goods_name å±æ€§çš„å€¼æ˜¯å¦å­˜åœ¨ï¼Œä»è€Œä½¿ç”¨ v-if æŒ‡ä»¤æ§åˆ¶é¡µé¢çš„æ˜¾ç¤ºä¸éšè—ã€‚</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">v-if</span>=<span class="string">&quot;goodsDetail.goods_name&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- çœç•¥å…¶å®ƒä»£ç  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ¸²æŸ“å•†å“å¯¼èˆª"><a href="#æ¸²æŸ“å•†å“å¯¼èˆª" class="headerlink" title="æ¸²æŸ“å•†å“å¯¼èˆª"></a>æ¸²æŸ“å•†å“å¯¼èˆª</h2><img src="/resource/images/gwx_bottom.png"/>

<h3 id="å‡†å¤‡-UI-ç»“æ„"><a href="#å‡†å¤‡-UI-ç»“æ„" class="headerlink" title="å‡†å¤‡ UI ç»“æ„"></a>å‡†å¤‡ UI ç»“æ„</h3><p>åŸºäº uni-ui æä¾›çš„ GoodsNav ç»„ä»¶æ¥å®ç°å•†å“å¯¼èˆªåŒºåŸŸçš„æ•ˆæœï¼Œåœ¨ data ä¸­ï¼Œé€šè¿‡ options å’Œ buttonGroup ä¸¤ä¸ªæ•°ç»„ï¼Œæ¥å£°æ˜å•†å“å¯¼èˆªç»„ä»¶çš„æŒ‰é’®é…ç½®å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å•†å“è¯¦æƒ…å¯¹è±¡</span></span><br><span class="line">        <span class="attr">goodsDetail</span>: &#123;&#125;,</span><br><span class="line">        <span class="comment">// å·¦ä¾§æŒ‰é’®ç»„çš„é…ç½®å¯¹è±¡</span></span><br><span class="line">        <span class="attr">options</span>: [&#123;</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;shop&#x27;</span>,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;åº—é“º&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;cart&#x27;</span>,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;è´­ç‰©è½¦&#x27;</span>,</span><br><span class="line">            <span class="attr">info</span>: <span class="number">2</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="comment">// å³ä¾§æŒ‰é’®ç»„çš„é…ç½®å¯¹è±¡</span></span><br><span class="line">        <span class="attr">buttonGroup</span>: [&#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;åŠ å…¥è´­ç‰©è½¦&#x27;</span>,</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;#ff0000&#x27;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;ç«‹å³è´­ä¹°&#x27;</span>,</span><br><span class="line">            <span class="attr">backgroundColor</span>: <span class="string">&#x27;#ffa200&#x27;</span>,</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨é¡µé¢ä¸­ä½¿ç”¨ uni-goods-nav å•†å“å¯¼èˆªç»„ä»¶ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“å¯¼èˆªç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-nav&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- fill æ§åˆ¶å³ä¾§æŒ‰é’®çš„æ ·å¼ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- options å·¦ä¾§æŒ‰é’®çš„é…ç½®é¡¹ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- buttonGroup å³ä¾§æŒ‰é’®çš„é…ç½®é¡¹ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- click å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•° --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- buttonClick å³ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•° --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-goods-nav</span> <span class="attr">:fill</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:options</span>=<span class="string">&quot;options&quot;</span> <span class="attr">:buttonGroup</span>=<span class="string">&quot;buttonGroup&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onClick&quot;</span> @<span class="attr">buttonClick</span>=<span class="string">&quot;buttonClick&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç¾åŒ–å•†å“å¯¼èˆªç»„ä»¶ï¼Œä½¿ä¹‹å›ºå®šåœ¨é¡µé¢æœ€åº•éƒ¨ã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// å•†å“å¯¼èˆª</span><br><span class="line"><span class="selector-class">.goods-nav</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: sticky;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">99</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç¬¬äºŒç§å®ç°æ–¹å¼</span><br><span class="line"><span class="selector-class">.goods-detail-container</span> &#123;</span><br><span class="line">    // ç»™é¡µé¢å¤–å±‚çš„å®¹å™¨ï¼Œæ·»åŠ  <span class="number">50px</span> çš„å†…<span class="attribute">padding</span>ï¼Œ</span><br><span class="line">    // é˜²æ­¢é¡µé¢å†…å®¹è¢«åº•éƒ¨çš„å•†å“å¯¼èˆªç»„ä»¶é®ç›–</span><br><span class="line">    <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.goods-nav</span> &#123;</span><br><span class="line">    // ä¸ºå•†å“å¯¼èˆªç»„ä»¶æ·»åŠ å›ºå®šå®šä½</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è·³è½¬åˆ°è´­ç‰©è½¦"><a href="#è·³è½¬åˆ°è´­ç‰©è½¦" class="headerlink" title="è·³è½¬åˆ°è´­ç‰©è½¦"></a>è·³è½¬åˆ°è´­ç‰©è½¦</h3><p>ç‚¹å‡»å•†å“å¯¼èˆªç»„ä»¶å·¦ä¾§çš„æŒ‰é’®ï¼Œä¼šè§¦å‘ uni-goods-nav çš„ @click äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œäº‹ä»¶å¯¹è±¡ e ä¸­ä¼šåŒ…å«å½“å‰ç‚¹å‡»çš„æŒ‰é’®ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">onClick</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰“å°çš„æŒ‰é’®ä¿¡æ¯å¯¹è±¡å¦‚ä¸‹ã€‚</p>
<img src="/resource/images/image (13).png"/>

<p>æ ¹æ® e.content.text çš„å€¼ï¼Œæ¥å†³å®šè¿›ä¸€æ­¥çš„æ“ä½œã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·¦ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">onClick</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.content.text === <span class="string">&#x27;è´­ç‰©è½¦&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// åˆ‡æ¢åˆ°è´­ç‰©è½¦é¡µé¢</span></span><br><span class="line">        uni.switchTab(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/pages/cart/cart&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="åŠ å…¥è´­ç‰©è½¦"><a href="#åŠ å…¥è´­ç‰©è½¦" class="headerlink" title="åŠ å…¥è´­ç‰©è½¦"></a>åŠ å…¥è´­ç‰©è½¦</h1><h2 id="é…ç½®-Vuex"><a href="#é…ç½®-Vuex" class="headerlink" title="é…ç½® Vuex"></a>é…ç½® Vuex</h2><ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»º store æ–‡ä»¶å¤¹ï¼Œåœ¨ store ç›®å½•ä¸Šé¼ æ ‡å³é”®ï¼Œé€‰æ‹© æ–°å»º -&gt; js æ–‡ä»¶ï¼Œæ–°å»º store.js æ–‡ä»¶ã€‚</li>
</ol>
<img src="/resource/images/image (14).png"/>

<p>åœ¨ <code>store.js</code> ä¸­æŒ‰ç…§å¦‚ä¸‹ 4 ä¸ªæ­¥éª¤åˆå§‹åŒ– Store çš„å®ä¾‹å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å¯¼å…¥ Vue å’Œ Vuex</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">// 2. å°† Vuex å®‰è£…ä¸º Vue çš„æ’ä»¶</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="comment">// 3. åˆ›å»º Store çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    <span class="comment">// TODOï¼šæŒ‚è½½ store æ¨¡å—</span></span><br><span class="line">    <span class="attr">modules</span>: &#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 4. å‘å¤–å…±äº« Store çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>main.js</code> ä¸­å¯¼å…¥ store å®ä¾‹å¯¹è±¡å¹¶æŒ‚è½½åˆ° Vue çš„å®ä¾‹ä¸Šã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å¯¼å…¥ store çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/store.js&#x27;</span></span><br><span class="line"><span class="comment">// çœç•¥å…¶å®ƒä»£ç ...</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    ...App,</span><br><span class="line">    <span class="comment">// 2. å°† store æŒ‚è½½åˆ° Vue å®ä¾‹ä¸Š</span></span><br><span class="line">    store,</span><br><span class="line">&#125;)</span><br><span class="line">app.$mount()</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºè´­ç‰©è½¦æ¨¡å—"><a href="#åˆ›å»ºè´­ç‰©è½¦æ¨¡å—" class="headerlink" title="åˆ›å»ºè´­ç‰©è½¦æ¨¡å—"></a>åˆ›å»ºè´­ç‰©è½¦æ¨¡å—</h2><ol>
<li>åœ¨ store ç›®å½•ä¸Šé¼ æ ‡å³é”®ï¼Œé€‰æ‹© æ–°å»º -&gt; js æ–‡ä»¶ï¼Œåˆ›å»ºè´­ç‰©è½¦çš„ store æ¨¡å—ï¼Œå‘½åä¸º cart.jsã€‚</li>
</ol>
<img src="/resource/images/image (15).png"/>

<ol start="2">
<li>åœ¨ <code>cart.js</code> ä¸­ï¼Œåˆå§‹åŒ–å¦‚ä¸‹çš„ vuex æ¨¡å—ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸ºå½“å‰æ¨¡å—å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// æ¨¡å—çš„ state æ•°æ®</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="comment">// è´­ç‰©è½¦æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨è´­ç‰©è½¦ä¸­æ¯ä¸ªå•†å“çš„ä¿¡æ¯</span></span><br><span class="line">        <span class="attr">cart</span>: [],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æ¨¡å—çš„ mutations æ–¹æ³•</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// æ¨¡å—çš„ getters å±æ€§</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>store/store.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥å¹¶æŒ‚è½½è´­ç‰©è½¦çš„ vuex æ¨¡å—ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">// 1. å¯¼å…¥è´­ç‰©è½¦çš„ vuex æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> moduleCart <span class="keyword">from</span> <span class="string">&#x27;./cart.js&#x27;</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    <span class="comment">// TODOï¼šæŒ‚è½½ store æ¨¡å—</span></span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="comment">// 2. æŒ‚è½½è´­ç‰©è½¦çš„ vuex æ¨¡å—ï¼Œæ¨¡å—å†…æˆå‘˜çš„è®¿é—®è·¯å¾„è¢«è°ƒæ•´ä¸º m_cartï¼Œä¾‹å¦‚ï¼šè´­ç‰©è½¦æ¨¡å—ä¸­ cart æ•°ç»„çš„è®¿é—®è·¯å¾„æ˜¯ m_cart/cart</span></span><br><span class="line">        <span class="attr">m_cart</span>: moduleCart,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨è´­ç‰©è½¦æ¨¡å—"><a href="#ä½¿ç”¨è´­ç‰©è½¦æ¨¡å—" class="headerlink" title="ä½¿ç”¨è´­ç‰©è½¦æ¨¡å—"></a>ä½¿ç”¨è´­ç‰©è½¦æ¨¡å—</h2><ol>
<li>åœ¨ <code>subpkg/goods_detail/goods_detail.vue</code>ï¼Œé€šè¿‡ mapState å¯¼å…¥ vuex ä¸­çš„æ•°æ®ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä» vuex ä¸­æŒ‰éœ€å¯¼å‡º mapState è¾…åŠ©æ–¹æ³•</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ mapState æ–¹æ³•ï¼ŒæŠŠ m_cart æ¨¡å—ä¸­çš„ cart æ•°ç»„æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ï¼Œä½œä¸ºè®¡ç®—å±æ€§æ¥ä½¿ç”¨</span></span><br><span class="line">        <span class="comment">// ...mapState(&#x27;æ¨¡å—çš„åç§°&#x27;, [&#x27;è¦æ˜ å°„çš„æ•°æ®åç§°1&#x27;, &#x27;è¦æ˜ å°„çš„æ•°æ®åç§°2&#x27;])</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;cart&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// çœç•¥å…¶å®ƒä»£ç ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨é¡µé¢æ¸²æŸ“æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æ˜ å°„è¿‡æ¥çš„æ•°æ®ï¼Œä¾‹å¦‚ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è¿è´¹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;yf&quot;</span>&gt;</span>å¿«é€’ï¼šå…è¿è´¹ -- &#123;&#123;cart.length&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½"><a href="#åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½" class="headerlink" title="åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½"></a>åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½</h2><ol>
<li>åœ¨ store ç›®å½•ä¸‹çš„ <code>cart.js</code> æ¨¡å—ä¸­ï¼Œå°è£…ä¸€ä¸ªå°†å•†å“ä¿¡æ¯åŠ å…¥è´­ç‰©è½¦çš„ mutations æ–¹æ³•ï¼Œå‘½åä¸º addToCartï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸ºå½“å‰æ¨¡å—å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// æ¨¡å—çš„ state æ•°æ®</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="comment">// è´­ç‰©è½¦çš„æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨è´­ç‰©è½¦ä¸­æ¯ä¸ªå•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">        <span class="comment">// æ¯ä¸ªå•†å“çš„ä¿¡æ¯å¯¹è±¡ï¼Œéƒ½åŒ…å«å¦‚ä¸‹ 6 ä¸ªå±æ€§ï¼š</span></span><br><span class="line">        <span class="comment">// &#123; goods_id, goods_name, goods_price, goods_count, goods_small_logo, goods_state &#125;</span></span><br><span class="line">        <span class="attr">cart</span>: [],</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment">// æ¨¡å—çš„ mutations æ–¹æ³•</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">addToCart</span>(<span class="params">state, goods</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// æ ¹æ®æäº¤çš„å•†å“çš„Idï¼ŒæŸ¥è¯¢è´­ç‰©è½¦ä¸­æ˜¯å¦å­˜åœ¨è¿™ä»¶å•†å“</span></span><br><span class="line">            <span class="comment">// å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ findResult ä¸º undefinedï¼›å¦åˆ™ï¼Œä¸ºæŸ¥æ‰¾åˆ°çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">            <span class="keyword">const</span> result = state.cart.find(<span class="function">(<span class="params">x</span>) =&gt;</span> x.goods_id === goods.goods_id)</span><br><span class="line">            <span class="keyword">if</span> (!result) &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœè´­ç‰©è½¦ä¸­æ²¡æœ‰è¿™ä»¶å•†å“ï¼Œåˆ™ç›´æ¥ push</span></span><br><span class="line">                state.cart.push(goods)</span><br><span class="line">                <span class="comment">// å¦‚æœè¦æ·»åŠ åˆ°é¦–éƒ¨ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•</span></span><br><span class="line">                <span class="comment">// state.cart.unshift(goods)</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å¦‚æœè´­ç‰©è½¦ä¸­æœ‰è¿™ä»¶å•†å“ï¼Œåˆ™åªæ›´æ–°æ•°é‡å³å¯</span></span><br><span class="line">                result.goods_count += <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// æ¨¡å—çš„ getters å±æ€§</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨å•†å“è¯¦æƒ…é¡µé¢ä¸­ï¼Œé€šè¿‡ mapMutations è¿™ä¸ªè¾…åŠ©æ–¹æ³•ï¼ŒæŠŠ vuex ä¸­ m_cart æ¨¡å—ä¸‹çš„ addToCart æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥ mapMutations è¿™ä¸ªè¾…åŠ©æ–¹æ³•</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// æŠŠ m_cart æ¨¡å—ä¸­çš„ addToCart æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ä½¿ç”¨</span></span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;addToCart&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¸ºå•†å“å¯¼èˆªç»„ä»¶ uni-goods-nav ç»‘å®š @buttonClick=â€buttonClickâ€ äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å³ä¾§æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="title">buttonClick</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">   <span class="comment">// 1. åˆ¤æ–­æ˜¯å¦ç‚¹å‡»äº† åŠ å…¥è´­ç‰©è½¦ æŒ‰é’®</span></span><br><span class="line">   <span class="keyword">if</span> (e.content.text === <span class="string">&#x27;åŠ å…¥è´­ç‰©è½¦&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// 2. ç»„ç»‡ä¸€ä¸ªå•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">      <span class="keyword">const</span> goods = &#123;</span><br><span class="line">         <span class="attr">goods_id</span>: <span class="built_in">this</span>.goodsDetail.goods_id,       <span class="comment">// å•†å“çš„Id</span></span><br><span class="line">         <span class="attr">goods_name</span>: <span class="built_in">this</span>.goodsDetail.goods_name,   <span class="comment">// å•†å“çš„åç§°</span></span><br><span class="line">         <span class="attr">goods_price</span>: <span class="built_in">this</span>.goodsDetail.goods_price, <span class="comment">// å•†å“çš„ä»·æ ¼</span></span><br><span class="line">         <span class="attr">goods_count</span>: <span class="number">1</span>,                           <span class="comment">// å•†å“çš„æ•°é‡</span></span><br><span class="line">         <span class="attr">goods_small_logo</span>: <span class="built_in">this</span>.goodsDetail.goods_small_logo, <span class="comment">// å•†å“çš„å›¾ç‰‡</span></span><br><span class="line">         <span class="attr">goods_state</span>: <span class="literal">true</span>                         <span class="comment">// å•†å“çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 3. é€šè¿‡ this è°ƒç”¨æ˜ å°„è¿‡æ¥çš„ addToCart æ–¹æ³•ï¼ŒæŠŠå•†å“ä¿¡æ¯å¯¹è±¡å­˜å‚¨åˆ°è´­ç‰©è½¦ä¸­</span></span><br><span class="line">      <span class="built_in">this</span>.addToCart(goods)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è´­ç‰©è½¦ä¸­æ€»æ•°é‡"><a href="#è´­ç‰©è½¦ä¸­æ€»æ•°é‡" class="headerlink" title="è´­ç‰©è½¦ä¸­æ€»æ•°é‡"></a>è´­ç‰©è½¦ä¸­æ€»æ•°é‡</h2><ol>
<li>åŠ¨æ€ç»Ÿè®¡è´­ç‰©è½¦ä¸­å•†å“çš„æ€»æ•°é‡ï¼Œåœ¨ <code>cart.js</code> æ¨¡å—ä¸­ï¼Œåœ¨ getters å­—æ®µä¸‹å®šä¹‰ä¸€ä¸ª total æ–¹æ³•ï¼Œç”¨æ¥ç»Ÿè®¡è´­ç‰©è½¦ä¸­å•†å“çš„æ€»æ•°é‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡å—çš„ getters å±æ€§</span></span><br><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// ç»Ÿè®¡è´­ç‰©è½¦ä¸­å•†å“çš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="function"><span class="title">total</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> state.cart.reduce( <span class="function">(<span class="params">acc, curr</span>)=&gt;</span> acc+curr.goods_count, <span class="number">0</span> )</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æˆ–è€…ä½¿ç”¨è€åŠæ³•</span></span><br><span class="line">        <span class="comment">// let c = 0</span></span><br><span class="line">        <span class="comment">// å¾ªç¯ç»Ÿè®¡å•†å“çš„æ•°é‡ï¼Œç´¯åŠ åˆ°å˜é‡ c ä¸­</span></span><br><span class="line">        <span class="comment">// state.cart.forEach(goods =&gt; c += goods.goods_count)</span></span><br><span class="line">        <span class="comment">// return c</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨å•†å“è¯¦æƒ…é¡µï¼Œé€šè¿‡ mapGetters æ‹¿åˆ° vuex ä¸­çš„ totalã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥ mapGetters è¿™ä¸ªè¾…åŠ©æ–¹æ³•</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// æŠŠ m_cart æ¨¡å—ä¸­åç§°ä¸º total çš„ getter æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>é€šè¿‡ watch ç›‘å¬ total å€¼çš„å˜åŒ–ï¼Œ<font color=e32d40><strong>ä»è€ŒåŠ¨æ€ä¸ºè´­ç‰©è½¦æŒ‰é’®çš„å¾½æ ‡èµ‹å€¼</strong></font>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ total ä¾¦å¬å™¨ï¼ŒæŒ‡å‘ä¸€ä¸ªé…ç½®å¯¹è±¡</span></span><br><span class="line">    <span class="attr">total</span>: &#123;</span><br><span class="line">        <span class="comment">// handler å±æ€§ç”¨æ¥å®šä¹‰ä¾¦å¬å™¨çš„ function å¤„ç†å‡½æ•°</span></span><br><span class="line">        <span class="function"><span class="title">handler</span>(<span class="params">newTotal</span>)</span> &#123;</span><br><span class="line">            <span class="comment">// ä¸ºè´­ç‰©è½¦æŒ‰é’®çš„ info å±æ€§èµ‹å€¼</span></span><br><span class="line">            <span class="comment">// å¦‚æœä¸ç”¨ immediateï¼Œåœ¨ onLoad ä¸­å†è¿›è¡Œä¸€æ¬¡ä¸‹é¢ä¸€è¡Œæ“ä½œä¹Ÿè¡Œ</span></span><br><span class="line">            <span class="built_in">this</span>.options[<span class="number">1</span>].info = newTotal</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// immediate å±æ€§ç”¨æ¥å£°æ˜æ­¤ä¾¦å¬å™¨ï¼Œæ˜¯å¦åœ¨é¡µé¢åˆæ¬¡åŠ è½½å®Œæ¯•åç«‹å³è°ƒç”¨</span></span><br><span class="line">        <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h2 id="æŒä¹…åŒ–å­˜å‚¨è´­ç‰©è½¦ä¸­å•†å“"><a href="#æŒä¹…åŒ–å­˜å‚¨è´­ç‰©è½¦ä¸­å•†å“" class="headerlink" title="æŒä¹…åŒ–å­˜å‚¨è´­ç‰©è½¦ä¸­å•†å“"></a>æŒä¹…åŒ–å­˜å‚¨è´­ç‰©è½¦ä¸­å•†å“</h2><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—ä¸­ï¼Œå£°æ˜ä¸€ä¸ªå«åš saveToStorage çš„ mutations æ–¹æ³•ï¼Œæ­¤æ–¹æ³•è´Ÿè´£å°†è´­ç‰©è½¦ä¸­çš„æ•°æ®æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†è´­ç‰©è½¦ä¸­çš„æ•°æ®æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line"><span class="function"><span class="title">saveToStorage</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    uni.setStorageSync(<span class="string">&#x27;cart&#x27;</span>, <span class="built_in">JSON</span>.stringify(state.cart))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ mutations èŠ‚ç‚¹ä¸­çš„ addToCart æ–¹æ³•ï¼Œåœ¨å¤„ç†å®Œå•†å“ä¿¡æ¯åï¼Œè°ƒç”¨æ­¥éª¤ 1 ä¸­å®šä¹‰çš„ saveToStorage æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">addToCart</span>(<span class="params">state, goods</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®æäº¤çš„å•†å“çš„Idï¼ŒæŸ¥è¯¢è´­ç‰©è½¦ä¸­æ˜¯å¦å­˜åœ¨è¿™ä»¶å•†å“</span></span><br><span class="line">    <span class="comment">// å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ findResult ä¸º undefinedï¼›å¦åˆ™ï¼Œä¸ºæŸ¥æ‰¾åˆ°çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> result = state.cart.find(<span class="function"><span class="params">x</span> =&gt;</span> x.goods_id === goods.goods_id)</span><br><span class="line">    <span class="keyword">if</span> (!result) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè´­ç‰©è½¦ä¸­æ²¡æœ‰è¿™ä»¶å•†å“ï¼Œåˆ™ç›´æ¥ push</span></span><br><span class="line">        state.cart.push(goods)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè´­ç‰©è½¦ä¸­æœ‰è¿™ä»¶å•†å“ï¼Œåˆ™åªæ›´æ–°æ•°é‡å³å¯</span></span><br><span class="line">        result.goods_count += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é€šè¿‡ commit æ–¹æ³•ï¼Œè°ƒç”¨ m_cart å‘½åç©ºé—´ä¸‹çš„ saveToStorage æ–¹æ³•</span></span><br><span class="line">    <span class="built_in">this</span>.commit(<span class="string">&#x27;m_cart/saveToStorage&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¿®æ”¹ <code>cart.js</code> æ¨¡å—ä¸­çš„ state å‡½æ•°ï¼Œè¯»å–æœ¬åœ°å­˜å‚¨çš„è´­ç‰©è½¦æ•°æ®ï¼Œå¯¹ cart æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡å—çš„ state æ•°æ®</span></span><br><span class="line"><span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// è´­ç‰©è½¦çš„æ•°ç»„ï¼Œç”¨æ¥å­˜å‚¨è´­ç‰©è½¦ä¸­æ¯ä¸ªå•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="comment">// æ¯ä¸ªå•†å“çš„ä¿¡æ¯å¯¹è±¡ï¼Œéƒ½åŒ…å«å¦‚ä¸‹ 6 ä¸ªå±æ€§ï¼š</span></span><br><span class="line">    <span class="comment">// &#123; goods_id, goods_name, goods_price, goods_count, goods_small_logo, goods_state &#125;</span></span><br><span class="line">    <span class="attr">cart</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;cart&#x27;</span>) || <span class="string">&#x27;[]&#x27;</span>)</span><br><span class="line">    <span class="comment">// æ­¤å¤„ä¸å¯ä»¥ç”¨ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼Œå› ä¸ºkeyä¸åŒ¹é…çš„è¯ï¼Œè¿”å› &#x27;&#x27;</span></span><br><span class="line">    <span class="comment">// cart: JSON.parse(uni.getStorageSync(&#x27;cart&#x27;) ?? &#x27;[]&#x27;)</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<h2 id="åŠ¨æ€ä¸º-TabBar-è®¾ç½®å¾½æ ‡"><a href="#åŠ¨æ€ä¸º-TabBar-è®¾ç½®å¾½æ ‡" class="headerlink" title="åŠ¨æ€ä¸º TabBar è®¾ç½®å¾½æ ‡"></a>åŠ¨æ€ä¸º TabBar è®¾ç½®å¾½æ ‡</h2><p>éœ€æ±‚ï¼šä»å•†å“è¯¦æƒ…é¡µè·³è½¬åˆ°è´­ç‰©è½¦é¡µé¢ä¹‹åï¼Œéœ€è¦ä¸º tabBar ä¸­çš„è´­ç‰©è½¦æ åŠ¨æ€è®¾ç½®æ•°å­—å¾½æ ‡ã€‚</p>
<ol>
<li>æŠŠ Store ä¸­çš„ total æ˜ å°„åˆ° <code>pages/cart/cart.vue</code>ï¼Œæ“ä½œå¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥ mapGetters è¿™ä¸ªè¾…åŠ©æ–¹æ³•</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// å°† m_cart æ¨¡å—ä¸­çš„ total æ˜ å°„ä¸ºå½“å‰é¡µé¢çš„è®¡ç®—å±æ€§</span></span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨é¡µé¢ onShow ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è°ƒç”¨ setBadge æ–¹æ³•ï¼Œä¸º tabBar è®¾ç½®æ•°å­—å¾½æ ‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">onShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">   <span class="comment">// åœ¨é¡µé¢åˆšå±•ç¤ºçš„æ—¶å€™ï¼Œè®¾ç½®æ•°å­—å¾½æ ‡</span></span><br><span class="line">   <span class="built_in">this</span>.setBadge()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ methods ä¸­å£°æ˜ setBadge æ–¹æ³•ï¼Œé€šè¿‡ uni.setTabBarBadge() ä¸º tabBar è®¾ç½®æ•°å­—å¾½æ ‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">setBadge</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ uni.setTabBarBadge() æ–¹æ³•ï¼Œè®¾ç½®è´­ç‰©è½¦å³ä¸Šè§’å¾½æ ‡</span></span><br><span class="line">        uni.setTabBarBadge(&#123;</span><br><span class="line">            <span class="attr">index</span>: <span class="number">2</span>, <span class="comment">// tabBar é¡µé¢ç´¢å¼•</span></span><br><span class="line">            <span class="attr">text</span>: <span class="built_in">this</span>.total + <span class="string">&#x27;&#x27;</span> <span class="comment">// æ³¨æ„ï¼štext çš„å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œä¸èƒ½æ˜¯æ•°å­—</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¼˜åŒ–ä¸Šé¢çš„ä»£ç "><a href="#ä¼˜åŒ–ä¸Šé¢çš„ä»£ç " class="headerlink" title="ä¼˜åŒ–ä¸Šé¢çš„ä»£ç "></a>ä¼˜åŒ–ä¸Šé¢çš„ä»£ç </h2><p>é™¤äº†è¦åœ¨ <code>cart.vue</code> é¡µé¢ä¸­è®¾ç½®è´­ç‰©è½¦çš„æ•°å­—å¾½æ ‡ï¼Œè¿˜éœ€è¦åœ¨å…¶å®ƒ 3 ä¸ª tabBar é¡µé¢ä¸­ï¼Œä¸ºè´­ç‰©è½¦è®¾ç½®æ•°å­—å¾½æ ‡ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ Vue æä¾›çš„ mixins ç‰¹æ€§ï¼Œå°†è®¾ç½® tabBar å¾½æ ‡çš„ä»£ç è¿›è¡ŒæŠ½ç¦»ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<ol>
<li>æ–°å»º <code>mixins/tabbar-badge.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å‡ºä¸€ä¸ª mixin å¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨é¡µé¢åˆšå±•ç¤ºçš„æ—¶å€™ï¼Œè®¾ç½®æ•°å­—å¾½æ ‡</span></span><br><span class="line">        <span class="built_in">this</span>.setBadge()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">setBadge</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨ uni.setTabBarBadge() æ–¹æ³•ï¼Œè®¾ç½®è´­ç‰©è½¦å³ä¸Šè§’å¾½æ ‡</span></span><br><span class="line">            uni.setTabBarBadge(&#123;</span><br><span class="line">                <span class="attr">index</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">text</span>: <span class="built_in">this</span>.total + <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ³¨æ„ï¼štext çš„å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œä¸èƒ½æ˜¯æ•°å­—</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ <code>home.vue</code>ï¼Œ<code>cate.vue</code>ï¼Œ<code>cart.vue</code>ï¼Œ<code>my.vue</code> è¿™ 4 ä¸ª tabBar é¡µé¢çš„æºä»£ç ï¼Œåˆ†åˆ«å¯¼å…¥ <code>@/mixins/tabbar-badge.js</code> æ¨¡å—å¹¶è¿›è¡Œä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¼å…¥è‡ªå·±å°è£…çš„ mixin æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> badgeMix <span class="keyword">from</span> <span class="string">&#x27;@/mixins/tabbar-badge.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å°† badgeMix æ··å…¥åˆ°å½“å‰çš„é¡µé¢ä¸­è¿›è¡Œä½¿ç”¨</span></span><br><span class="line">    <span class="attr">mixins</span>: [badgeMix],</span><br><span class="line">    <span class="comment">// çœç•¥å…¶å®ƒä»£ç ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="è´­ç‰©è½¦é¡µé¢"><a href="#è´­ç‰©è½¦é¡µé¢" class="headerlink" title="è´­ç‰©è½¦é¡µé¢"></a>è´­ç‰©è½¦é¡µé¢</h1><h2 id="éœ€æ±‚åˆ†ææ€»ç»“-1"><a href="#éœ€æ±‚åˆ†ææ€»ç»“-1" class="headerlink" title="éœ€æ±‚åˆ†ææ€»ç»“"></a>éœ€æ±‚åˆ†ææ€»ç»“</h2><ol>
<li><p>æ”¶è·åœ°å€æ•°æ®æ˜¯è°ƒç”¨å¾®ä¿¡ API è·å–ã€‚</p>
</li>
<li><p>è´­ç‰©è½¦æ•°æ®æ˜¯ä» vuex ä¸­è·å–ã€‚</p>
</li>
<li><p>å•†å“æ•°é‡æ¸²æŸ“ä½¿ç”¨çš„æ˜¯ <code>&lt;uni-number-box/&gt;</code> ç»„ä»¶ï¼ˆuni-uiï¼‰ã€‚</p>
</li>
<li><p>é€‰ä¸­æ¸²æŸ“ä½¿ç”¨çš„æ˜¯ <code>&lt;radio/&gt;</code> ç»„ä»¶ï¼ˆå°ç¨‹åºåŸç”Ÿï¼‰ã€‚</p>
</li>
<li><p>è´­ç‰©è½¦å•†å“åˆ—è¡¨æ¸²æŸ“ä½¿ç”¨çš„æ˜¯åŸºäº <code>&lt;my-goods/&gt;</code> ç»„ä»¶è¿›è¡Œçš„äºŒæ¬¡æ”¹é€ ã€‚</p>
</li>
</ol>
<h2 id="å¼€å‘å‡†å¤‡å·¥ä½œ-1"><a href="#å¼€å‘å‡†å¤‡å·¥ä½œ-1" class="headerlink" title="å¼€å‘å‡†å¤‡å·¥ä½œ"></a>å¼€å‘å‡†å¤‡å·¥ä½œ</h2><p>æ·»åŠ è´­ç‰©è½¦é¡µé¢çš„ç¼–è¯‘æ¨¡å¼ï¼›é¡µé¢æ•´ä½“ç»“æ„å¦‚ä¸‹ï¼Œ<code>pages/cart/cart.vue</code>ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ”¶è·åœ°å€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>æ”¶è·åœ°å€<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è´­ç‰©è½¦æ ‡é¢˜åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>è´­ç‰©è½¦æ ‡é¢˜åŒºåŸŸ<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è´­ç‰©è½¦åˆ—è¡¨ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>è´­ç‰©è½¦åˆ—è¡¨<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç»“ç®—æ  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>ç»“ç®—æ <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç©ºç™½è´­ç‰©è½¦åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span>&gt;</span>è´­ç‰©è½¦ç©ºç™½åŒº<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ”¶è´§åœ°å€ç»„ä»¶"><a href="#æ”¶è´§åœ°å€ç»„ä»¶" class="headerlink" title="æ”¶è´§åœ°å€ç»„ä»¶"></a>æ”¶è´§åœ°å€ç»„ä»¶</h2><ol>
<li>åœ¨ components ç›®å½•ä¸Šé¼ æ ‡å³é”®ï¼Œé€‰æ‹©ã€æ–°å»ºç»„ä»¶ã€‘ï¼Œå¹¶å¡«å†™ç»„ä»¶ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ol>
<img src="/resource/images/9-3.d168684c.png"/>

<ol start="2">
<li>æ¸²æŸ“æ”¶è´§åœ°å€ç»„ä»¶çš„åŸºæœ¬ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é€‰æ‹©æ”¶è´§åœ°å€çš„ç›’å­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-choose-box&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btnChooseAddress&quot;</span>&gt;</span>è¯·é€‰æ‹©æ”¶è´§åœ°å€+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ¸²æŸ“æ”¶è´§ä¿¡æ¯çš„ç›’å­ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-info-box&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row1&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row1-left&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>æ”¶è´§äººï¼š<span class="tag">&lt;<span class="name">text</span>&gt;</span>ifer<span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row1-right&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;phone&quot;</span>&gt;</span>ç”µè¯ï¼š<span class="tag">&lt;<span class="name">text</span>&gt;</span>185XXXX8888<span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2-left&quot;</span>&gt;</span>æ”¶è´§åœ°å€ï¼š<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2-right&quot;</span>&gt;</span>æ²³å—çœå‘¨å£å¸‚æ·®é˜³åŒºxxx æ²³å—çœå‘¨å£å¸‚æ·®é˜³åŒºxxx æ²³å—çœå‘¨å£å¸‚æ·®é˜³åŒºxxx æ²³å—çœå‘¨å£å¸‚æ·®é˜³åŒºxxx <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åº•éƒ¨çš„è¾¹æ¡†çº¿ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/cart_border@2x.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;address-border&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç¾åŒ–æ”¶è´§åœ°å€ç»„ä»¶çš„æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">// åº•éƒ¨è¾¹æ¡†çº¿çš„æ ·å¼</span><br><span class="line"><span class="selector-class">.address-border</span> &#123;</span><br><span class="line">    // <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line">// é€‰æ‹©æ”¶è´§åœ°å€çš„ç›’å­</span><br><span class="line"><span class="selector-class">.address-choose-box</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line">// æ¸²æŸ“æ”¶è´§ä¿¡æ¯çš„ç›’å­</span><br><span class="line"><span class="selector-class">.address-info-box</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">5px</span>;</span><br><span class="line">    // ç¬¬ä¸€è¡Œ</span><br><span class="line">    <span class="selector-class">.row1</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">        <span class="selector-class">.row1-right</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">align-items</span>: center;</span><br><span class="line">            <span class="selector-class">.phone</span> &#123;</span><br><span class="line">                <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // ç¬¬äºŒè¡Œ</span><br><span class="line">    <span class="selector-class">.row2</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">        <span class="selector-class">.row2-left</span> &#123;</span><br><span class="line">            <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åœ¨ data ä¸­å®šä¹‰æ”¶è´§åœ°å€çš„ä¿¡æ¯å¯¹è±¡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// æ”¶è´§åœ°å€</span></span><br><span class="line">            <span class="attr">address</span>: &#123;&#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>ä½¿ç”¨ v-if å’Œ v-else å®ç°ã€è¯·é€‰æ‹©æ”¶è·åœ°å€ã€‘å’Œã€æ”¶è´§åœ°å€ä¿¡æ¯ã€‘çš„æ¡ä»¶æ¸²æŸ“ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é€‰æ‹©æ”¶è´§åœ°å€çš„ç›’å­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-choose-box&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;JSON.stringify(address) === &#x27;&#123;&#125;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btnChooseAddress&quot;</span>&gt;</span>è¯·é€‰æ‹©æ”¶è´§åœ°å€+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- æ¸²æŸ“æ”¶è´§ä¿¡æ¯çš„ç›’å­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-info-box&quot;</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ...çœç•¥å…¶å®ƒä»£ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="è·å–æ”¶è´§åœ°å€"><a href="#è·å–æ”¶è´§åœ°å€" class="headerlink" title="è·å–æ”¶è´§åœ°å€"></a>è·å–æ”¶è´§åœ°å€</h2><ol>
<li>ä¸º è¯·é€‰æ‹©æ”¶è´§åœ°å€+ button æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é€‰æ‹©æ”¶è´§åœ°å€çš„ç›’å­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-choose-box&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;JSON.stringify(address) === &#x27;&#123;&#125;&#x27;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btnChooseAddress&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;chooseAddress&quot;</span>&gt;</span>è¯·é€‰æ‹©æ”¶è´§åœ°å€+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å®šä¹‰ chooseAddress äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè°ƒç”¨å°ç¨‹åºæä¾›çš„ chooseAddress() API å®ç°é€‰æ‹©æ”¶è´§åœ°å€åŠŸèƒ½ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// é€‰æ‹©æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">chooseAddress</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 1. è°ƒç”¨å°ç¨‹åºæä¾›çš„ chooseAddress() æ–¹æ³•ï¼Œå³å¯ä½¿ç”¨é€‰æ‹©æ”¶è´§åœ°å€çš„åŠŸèƒ½</span></span><br><span class="line">        <span class="comment">//    è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼šç¬¬ 1 é¡¹ä¸ºé”™è¯¯å¯¹è±¡ï¼›ç¬¬ 2 é¡¹ä¸ºæˆåŠŸä¹‹åçš„æ”¶è´§åœ°å€å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">const</span> [err, succ] = <span class="keyword">await</span> uni.chooseAddress()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ³¨æ„ï¼šç‚¹å‡»å¼¹æ¡†ä¸­çš„å–æ¶ˆ/ç¡®è®¤åæ‰ä¼šèµ°åˆ°è¿™å„¿</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. ç”¨æˆ·æˆåŠŸçš„é€‰æ‹©äº†æ”¶è´§åœ°å€</span></span><br><span class="line">        <span class="keyword">if</span> (err === <span class="literal">null</span> &amp;&amp; succ.errMsg === <span class="string">&#x27;chooseAddress:ok&#x27;</span>) &#123;</span><br><span class="line">            <span class="comment">// ä¸º data é‡Œé¢çš„æ”¶è´§åœ°å€å¯¹è±¡èµ‹å€¼</span></span><br><span class="line">            <span class="built_in">this</span>.address = succ</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>manifest.json</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;mp-weixin&quot;</span>: &#123;</span><br><span class="line">        <span class="comment">/* å°ç¨‹åºç‰¹æœ‰ç›¸å…³ */</span></span><br><span class="line">        <span class="attr">&quot;appid&quot;</span>: <span class="string">&quot;wxfb52f2d7b2f6123a&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;requiredPrivateInfos&quot;</span>: [<span class="string">&quot;chooseAddress&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å®šä¹‰è¯¦ç»†æ”¶è´§åœ°å€çš„è®¡ç®—å±æ€§ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="comment">// æ”¶è´§è¯¦ç»†åœ°å€çš„è®¡ç®—å±æ€§</span></span><br><span class="line">    <span class="function"><span class="title">addstr</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ¤æ–­addressæ˜¯å¦å·²ç»è·å–</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">JSON</span>.stringify(<span class="built_in">this</span>.address) ===<span class="string">&#x27;&#123;&#125;&#x27;</span>) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹¼æ¥ çœï¼Œå¸‚ï¼ŒåŒºï¼Œè¯¦ç»†åœ°å€ çš„å­—ç¬¦ä¸²å¹¶è¿”å›ç»™ç”¨æˆ·</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.address.provinceName + <span class="built_in">this</span>.address.cityName + <span class="built_in">this</span>.address.countyName + <span class="built_in">this</span>.address.detailInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æ¸²æŸ“æ”¶è´§åœ°å€åŒºåŸŸçš„æ•°æ®ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¸²æŸ“æ”¶è´§ä¿¡æ¯çš„ç›’å­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-info-box&quot;</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row1-left&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;username&quot;</span>&gt;</span>æ”¶è´§äººï¼š<span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;address.userName&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row1-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;phone&quot;</span>&gt;</span>ç”µè¯ï¼š<span class="tag">&lt;<span class="name">text</span>&gt;</span>&#123;&#123;address.telNumber&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span> <span class="attr">size</span>=<span class="string">&quot;16&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2-left&quot;</span>&gt;</span>æ”¶è´§åœ°å€ï¼š<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;row2-right&quot;</span>&gt;</span>&#123;&#123;addstr&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="å­˜å‚¨-address-åˆ°-Vuex"><a href="#å­˜å‚¨-address-åˆ°-Vuex" class="headerlink" title="å­˜å‚¨ address åˆ° Vuex"></a>å­˜å‚¨ address åˆ° Vuex</h2><h3 id="å°†-address-ä¿¡æ¯å­˜å‚¨åˆ°-vuex-ä¸­"><a href="#å°†-address-ä¿¡æ¯å­˜å‚¨åˆ°-vuex-ä¸­" class="headerlink" title="å°† address ä¿¡æ¯å­˜å‚¨åˆ° vuex ä¸­"></a>å°† address ä¿¡æ¯å­˜å‚¨åˆ° vuex ä¸­</h3><ol>
<li>åœ¨ store ç›®å½•ä¸­ï¼Œåˆ›å»ºç”¨æˆ·ç›¸å…³çš„ vuex æ¨¡å—ï¼Œå‘½åä¸º <code>user.js</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// state æ•°æ®</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="comment">// æ”¶è´§åœ°å€</span></span><br><span class="line">        <span class="attr">address</span>: &#123;&#125;,</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ”¶è´§åœ°å€</span></span><br><span class="line">        <span class="function"><span class="title">updateAddress</span>(<span class="params">state, address</span>)</span> &#123;</span><br><span class="line">            state.address = address</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®åŒ…è£…å™¨</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>store/store.js</code> æ¨¡å—ä¸­ï¼Œå¯¼å…¥å¹¶æŒ‚è½½ <code>user.js</code> æ¨¡å—ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å¯¼å…¥ Vue å’Œ Vuex</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥è´­ç‰©è½¦çš„ vuex æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> moduleCart <span class="keyword">from</span> <span class="string">&#x27;./cart.js&#x27;</span></span><br><span class="line"><span class="comment">// å¯¼å…¥ç”¨æˆ·çš„ vuex æ¨¡å—</span></span><br><span class="line"><span class="keyword">import</span> moduleUser <span class="keyword">from</span> <span class="string">&#x27;./user.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. å°† Vuex å®‰è£…ä¸º Vue çš„æ’ä»¶</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. åˆ›å»º Store çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    <span class="comment">// TODOï¼šæŒ‚è½½ store æ¨¡å—</span></span><br><span class="line">    <span class="attr">modules</span>: &#123;</span><br><span class="line">        <span class="comment">// æŒ‚è½½è´­ç‰©è½¦çš„ vuex æ¨¡å—ï¼Œæ¨¡å—å†…æˆå‘˜çš„è®¿é—®è·¯å¾„è¢«è°ƒæ•´ä¸º m_cartï¼Œä¾‹å¦‚ï¼š</span></span><br><span class="line">        <span class="comment">// è´­ç‰©è½¦æ¨¡å—ä¸­ cart æ•°ç»„çš„è®¿é—®è·¯å¾„æ˜¯ m_cart/cart</span></span><br><span class="line">        <span class="attr">m_cart</span>: moduleCart,</span><br><span class="line">        <span class="comment">// æŒ‚è½½ç”¨æˆ·çš„ vuex æ¨¡å—ï¼Œè®¿é—®è·¯å¾„ä¸º m_user</span></span><br><span class="line">        <span class="attr">m_user</span>: moduleUser,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. å‘å¤–å…±äº« Store çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>æ”¹é€  <code>my-address.vue</code> ç»„ä»¶ä¸­çš„ä»£ç ï¼Œä½¿ç”¨ vuex æä¾›çš„ address è®¡ç®—å±æ€§æ›¿ä»£ data ä¸­å®šä¹‰çš„æœ¬åœ° address å¯¹è±¡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #1 æŒ‰éœ€å¯¼å…¥ mapState å’Œ mapMutations è¿™ä¸¤ä¸ªè¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// #2 æ³¨é‡Šæ‰ä¸‹é¢çš„ address å¯¹è±¡ï¼Œä½¿ç”¨ 2.2 ä¸­çš„ä»£ç æ›¿ä»£ä¹‹</span></span><br><span class="line">            <span class="comment">// address: &#123;&#125;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// #3 æŠŠ m_user æ¨¡å—ä¸­çš„ address å¯¹è±¡æ˜ å°„å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œä»£æ›¿ data ä¸­ address å¯¹è±¡</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;address&#x27;</span>]),</span><br><span class="line">        <span class="comment">// è¯¦ç»†æ”¶è´§åœ°å€çš„è®¡ç®—å±æ€§</span></span><br><span class="line">        <span class="function"><span class="title">addstr</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">this</span>.address.provinceName) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="comment">// æ‹¼æ¥ çœï¼Œå¸‚ï¼ŒåŒºï¼Œè¯¦ç»†åœ°å€ çš„å­—ç¬¦ä¸²å¹¶è¿”å›ç»™ç”¨æˆ·</span></span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.address.provinceName + <span class="built_in">this</span>.address.cityName + <span class="built_in">this</span>.address.countyName + <span class="built_in">this</span>.address.detailInfo</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// #4 æŠŠ m_user æ¨¡å—ä¸­çš„ updateAddress å‡½æ•°æ˜ å°„åˆ°å½“å‰ç»„ä»¶</span></span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;updateAddress&#x27;</span>]),</span><br><span class="line">        <span class="comment">// é€‰æ‹©æ”¶è´§åœ°å€</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">chooseAddress</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> [err, succ] = <span class="keyword">await</span> uni.chooseAddress().catch(<span class="function">(<span class="params">err</span>) =&gt;</span> err)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç”¨æˆ·æˆåŠŸçš„é€‰æ‹©äº†æ”¶è´§åœ°å€</span></span><br><span class="line">            <span class="keyword">if</span> (err === <span class="literal">null</span> &amp;&amp; succ.errMsg === <span class="string">&#x27;chooseAddress:ok&#x27;</span>) &#123;</span><br><span class="line">                <span class="comment">// #5 æŠŠä¸‹é¢è¿™è¡Œä»£ç æ³¨é‡Šæ‰ï¼Œä½¿ç”¨ 3.3 ä¸­çš„ä»£ç æ›¿ä»£ä¹‹</span></span><br><span class="line">                <span class="comment">// this.address = succ</span></span><br><span class="line"></span><br><span class="line">                <span class="comment">// #6 è°ƒç”¨ Store ä¸­æä¾›çš„ updateAddress æ–¹æ³•ï¼Œå°† address ä¿å­˜åˆ° Store é‡Œé¢</span></span><br><span class="line">                <span class="built_in">this</span>.updateAddress(succ)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å°†-Store-ä¸­çš„-address-æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°"><a href="#å°†-Store-ä¸­çš„-address-æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°" class="headerlink" title="å°† Store ä¸­çš„ address æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°"></a>å°† Store ä¸­çš„ address æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</h3><p><code>store/user.js</code> æ¨¡å—ä¸­çš„ä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// state æ•°æ®</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="comment">// #3 è¯»å–æœ¬åœ°çš„æ”¶è´§åœ°å€æ•°æ®ï¼Œåˆå§‹åŒ– address å¯¹è±¡</span></span><br><span class="line">        <span class="attr">address</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;address&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•</span></span><br><span class="line">    <span class="attr">mutations</span>: &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°æ”¶è´§åœ°å€</span></span><br><span class="line">        <span class="function"><span class="title">updateAddress</span>(<span class="params">state, address</span>)</span> &#123;</span><br><span class="line">            state.address = address</span><br><span class="line"></span><br><span class="line">            <span class="comment">// #2 é€šè¿‡ this.commit() æ–¹æ³•ï¼Œè°ƒç”¨ m_user æ¨¡å—çš„ saveAddressToStorage æ–¹æ³•å°† address å¯¹è±¡æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">            <span class="built_in">this</span>.commit(<span class="string">&#x27;m_user/saveAddressToStorage&#x27;</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// #1 å®šä¹‰å°† address æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ° mutations æ–¹æ³•</span></span><br><span class="line">        <span class="function"><span class="title">saveAddressToStorage</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">            uni.setStorageSync(<span class="string">&#x27;address&#x27;</span>, <span class="built_in">JSON</span>.stringify(state.address))</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ•°æ®åŒ…è£…å™¨</span></span><br><span class="line">    <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å°†-addstr-æŠ½ç¦»ä¸º-getters"><a href="#å°†-addstr-æŠ½ç¦»ä¸º-getters" class="headerlink" title="å°† addstr æŠ½ç¦»ä¸º getters"></a>å°† addstr æŠ½ç¦»ä¸º getters</h3><p>ç›®çš„ï¼šä¸ºäº†æé«˜ä»£ç çš„å¤ç”¨æ€§ï¼Œå¯ä»¥æŠŠæ”¶è´§çš„è¯¦ç»†åœ°å€æŠ½ç¦»ä¸º gettersï¼Œæ–¹ä¾¿åœ¨å¤šä¸ªé¡µé¢å’Œç»„ä»¶ä¹‹é—´å®ç°å¤ç”¨ã€‚</p>
<ol>
<li>å‰ªåˆ‡ <code>my-address.vue</code> ç»„ä»¶ä¸­ addstr è®¡ç®—å±æ€§ä»£ç ï¼Œç²˜è´´åˆ° user.js æ¨¡å—ä¸­ï¼Œä½œä¸ºä¸€ä¸ª getters èŠ‚ç‚¹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°æ®åŒ…è£…å™¨</span></span><br><span class="line"><span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="comment">// æ”¶è´§è¯¦ç»†åœ°å€çš„è®¡ç®—å±æ€§</span></span><br><span class="line">    <span class="function"><span class="title">addstr</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!state.address.provinceName) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="comment">// if(JSON.stringify(address) === &#x27;&#123;&#125;&#x27;) return &#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ‹¼æ¥ çœï¼Œå¸‚ï¼ŒåŒºï¼Œè¯¦ç»†åœ°å€ çš„å­—ç¬¦ä¸²å¹¶è¿”å›ç»™ç”¨æˆ·</span></span><br><span class="line">        <span class="keyword">return</span> state.address.provinceName + state.address.cityName + state.address.countyName + state.address.detailInfo</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ”¹é€  <code>my-address.vue</code> ç»„ä»¶ä¸­çš„ä»£ç ï¼Œé€šè¿‡ mapGetters è¾…åŠ©å‡½æ•°ï¼Œå°† m_user æ¨¡å—ä¸­çš„ addstr æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥ mapGetters è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, mapMutations, mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// çœç•¥å…¶å®ƒä»£ç </span></span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapState(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;address&#x27;</span>]),</span><br><span class="line">        <span class="comment">// å°† m_user æ¨¡å—ä¸­çš„ addstr æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;addstr&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é‡æ–°é€‰æ‹©æ”¶è´§åœ°å€"><a href="#é‡æ–°é€‰æ‹©æ”¶è´§åœ°å€" class="headerlink" title="é‡æ–°é€‰æ‹©æ”¶è´§åœ°å€"></a>é‡æ–°é€‰æ‹©æ”¶è´§åœ°å€</h3><p>ä¸º class ç±»åä¸º address-info-box çš„ç›’å­ç»‘å®š click äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</p>
<p><code>components/my-address/my-address.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ¸²æŸ“æ”¶è´§ä¿¡æ¯çš„ç›’å­ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;address-info-box&quot;</span> <span class="attr">v-else</span> @<span class="attr">click</span>=<span class="string">&quot;chooseAddress&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ...çœç•¥å…¶å®ƒä»£ç  --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="è´­ç‰©è½¦åˆ—è¡¨åŒºåŸŸ"><a href="#è´­ç‰©è½¦åˆ—è¡¨åŒºåŸŸ" class="headerlink" title="è´­ç‰©è½¦åˆ—è¡¨åŒºåŸŸ"></a>è´­ç‰©è½¦åˆ—è¡¨åŒºåŸŸ</h2><h3 id="æ¸²æŸ“è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ"><a href="#æ¸²æŸ“è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ" class="headerlink" title="æ¸²æŸ“è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ"></a>æ¸²æŸ“è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ</h3><ol>
<li>å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ï¼Œ<code>pages/cart/cart.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cart-title&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å·¦ä¾§çš„å›¾æ ‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;shop&quot;</span> <span class="attr">size</span>=<span class="string">&quot;18&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æè¿°æ–‡æœ¬ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;cart-title-text&quot;</span>&gt;</span>è´­ç‰©è½¦<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cart-title</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">80</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">12</span>rpx;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#efefef</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.cart-title-text</span> &#123;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“å•†å“åˆ—è¡¨åŒºåŸŸçš„åŸºæœ¬ç»“æ„"><a href="#æ¸²æŸ“å•†å“åˆ—è¡¨åŒºåŸŸçš„åŸºæœ¬ç»“æ„" class="headerlink" title="æ¸²æŸ“å•†å“åˆ—è¡¨åŒºåŸŸçš„åŸºæœ¬ç»“æ„"></a>æ¸²æŸ“å•†å“åˆ—è¡¨åŒºåŸŸçš„åŸºæœ¬ç»“æ„</h3><ol>
<li>é€šè¿‡ mapState è¾…åŠ©å‡½æ•°ï¼Œå°† Store ä¸­çš„ cart æ•°ç»„æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<p><code>pages/cart/cart.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> badgeMix <span class="keyword">from</span> <span class="string">&#x27;@/mixins/tabbar-badge.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// #1 æŒ‰éœ€å¯¼å…¥ mapState è¿™ä¸ªè¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">mixins</span>: [badgeMix],</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// #2 å°† m_cart æ¨¡å—ä¸­çš„ cart æ•°ç»„æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;cart&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ UI ç»“æ„ä¸­ï¼Œé€šè¿‡ v-for æŒ‡ä»¤å¾ªç¯æ¸²æŸ“è‡ªå®šä¹‰çš„ my-goods ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, i) in cart&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;goods&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸º-my-goods-ç»„ä»¶å°è£…-radio-å‹¾é€‰çŠ¶æ€"><a href="#ä¸º-my-goods-ç»„ä»¶å°è£…-radio-å‹¾é€‰çŠ¶æ€" class="headerlink" title="ä¸º my-goods ç»„ä»¶å°è£… radio å‹¾é€‰çŠ¶æ€"></a>ä¸º my-goods ç»„ä»¶å°è£… radio å‹¾é€‰çŠ¶æ€</h3><ol>
<li>æ‰“å¼€ <code>components/my-goods/my-goods.vue</code> ç»„ä»¶çš„ä»£ç ï¼Œä¸ºå•†å“çš„å·¦ä¾§å›¾ç‰‡åŒºåŸŸæ·»åŠ  radio ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">checked</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;goods.goods_small_logo || defaultPic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-pic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç»™ç±»åä¸º goods-item-left çš„ view ç»„ä»¶æ·»åŠ æ ·å¼ï¼Œå®ç° radio ç»„ä»¶å’Œ image ç»„ä»¶çš„å·¦å³å¸ƒå±€ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods-item-left</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é€šè¿‡-props-å±æ€§æ§åˆ¶-radio-çš„æ˜¾ç¤º"><a href="#é€šè¿‡-props-å±æ€§æ§åˆ¶-radio-çš„æ˜¾ç¤º" class="headerlink" title="é€šè¿‡ props å±æ€§æ§åˆ¶ radio çš„æ˜¾ç¤º"></a>é€šè¿‡ props å±æ€§æ§åˆ¶ radio çš„æ˜¾ç¤º</h3><ol>
<li>å°è£…åç§°ä¸º showRadio çš„ props å±æ€§ï¼Œæ¥æ§åˆ¶å½“å‰ç»„ä»¶ä¸­æ˜¯å¦æ˜¾ç¤º radio ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ props å±æ€§ï¼Œç”¨æ¥æ¥æ”¶å¤–ç•Œä¼ é€’åˆ°å½“å‰ç»„ä»¶çš„æ•°æ®</span></span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="comment">// å•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">        <span class="attr">goods</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">            <span class="attr">default</span>: &#123;&#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ˜¯å¦å±•ç¤ºå›¾ç‰‡å·¦ä¾§çš„ radio</span></span><br><span class="line">        <span class="attr">showRadio</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">            <span class="comment">// å¦‚æœå¤–ç•Œæ²¡æœ‰æŒ‡å®š show-radio å±æ€§çš„å€¼ï¼Œåˆ™é»˜è®¤ä¸å±•ç¤º radio ç»„ä»¶</span></span><br><span class="line">            <span class="attr">default</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä½¿ç”¨ v-if æŒ‡ä»¤æ§åˆ¶ radio ç»„ä»¶çš„æŒ‰éœ€å±•ç¤ºã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä½¿ç”¨ v-if æŒ‡ä»¤æ§åˆ¶ radio ç»„ä»¶çš„æ˜¾ç¤ºä¸éšè— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">checked</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;showRadio&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;goods.goods_small_logo || defaultPic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-pic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>cart.vue</code> é¡µé¢ä¸­çš„å•†å“åˆ—è¡¨åŒºåŸŸï¼ŒæŒ‡å®š <code>:showRadio=&quot;true&quot;</code> å±æ€§ï¼Œä»è€Œæ˜¾ç¤º radio ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, i) in cart&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">:showRadio</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€ç»‘å®š-radio-ç»„ä»¶çš„å€¼"><a href="#åŠ¨æ€ç»‘å®š-radio-ç»„ä»¶çš„å€¼" class="headerlink" title="åŠ¨æ€ç»‘å®š radio ç»„ä»¶çš„å€¼"></a>åŠ¨æ€ç»‘å®š radio ç»„ä»¶çš„å€¼</h3><p>ä¿®æ”¹ <code>my-goods.vue</code> ç»„ä»¶ï¼ŒåŠ¨æ€ä¸º radio ç»‘å®šé€‰ä¸­çŠ¶æ€ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å­˜å‚¨åœ¨è´­ç‰©è½¦ä¸­çš„å•†å“ï¼ŒåŒ…å« goods_state å±æ€§ï¼Œè¡¨ç¤ºå•†å“çš„å‹¾é€‰çŠ¶æ€ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">:checked</span>=<span class="string">&quot;goods.goods_state&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;showRadio&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;goods.goods_small_logo || defaultPic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-pic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸º-my-goods-è‡ªå®šä¹‰ç»„ä»¶å°è£…-radio-change-äº‹ä»¶"><a href="#ä¸º-my-goods-è‡ªå®šä¹‰ç»„ä»¶å°è£…-radio-change-äº‹ä»¶" class="headerlink" title="ä¸º my-goods è‡ªå®šä¹‰ç»„ä»¶å°è£… radio-change äº‹ä»¶"></a>ä¸º my-goods è‡ªå®šä¹‰ç»„ä»¶å°è£… radio-change äº‹ä»¶</h3><p>ğŸ“ éœ€æ±‚ï¼šå½“ç”¨æˆ·ç‚¹å‡» radio ç»„ä»¶ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹å½“å‰å•†å“çš„å‹¾é€‰çŠ¶æ€ã€‚</p>
<ol>
<li>åœ¨çˆ¶ç»„ä»¶ <code>cart.vue</code> ä¸­ç»‘å®š <code>@radio-change</code> äº‹ä»¶ï¼Œåœ¨äº‹ä»¶çš„å›è°ƒä¸­å¯ä»¥æ‹¿åˆ°å­ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ä¿¡æ¯ï¼ˆéœ€è¦ goods_id å’Œ goods_stateï¼‰ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, i) in cart&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åœ¨ radioChangeHandler äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œé€šè¿‡äº‹ä»¶å¯¹è±¡ eï¼Œå¾—åˆ°å•†å“çš„ goods_id å’Œ goods_state --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">:showRadio</span>=<span class="string">&quot;true&quot;</span> @<span class="attr">radio-change</span>=<span class="string">&quot;radioChangeHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// å•†å“çš„å‹¾é€‰çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">    <span class="function"><span class="title">radioChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(e) <span class="comment">// è¾“å‡ºå¾—åˆ°çš„æ•°æ® -&gt; &#123;goods_id: 395, goods_state: false&#125;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>my-goods.vue</code> è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œä¸º radio ç»„ä»¶ç»‘å®š @click äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“å·¦ä¾§å›¾ç‰‡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-item-left&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">:checked</span>=<span class="string">&quot;goods.goods_state&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;showRadio&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;radioClickHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;goods.goods_small_logo || defaultPic&quot;</span> <span class="attr">class</span>=<span class="string">&quot;goods-pic&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¤„ç†å‡½æ•°å›è°ƒä¸­é€šè¿‡ this.$emit è§¦å‘çˆ¶äº²çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// radio ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="title">radioClickHandler</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡ this.$emit() è§¦å‘å¤–ç•Œé€šè¿‡ @ ç»‘å®šçš„ radio-change äº‹ä»¶ï¼Œ</span></span><br><span class="line">        <span class="comment">// åŒæ—¶æŠŠå•†å“çš„ Id å’Œ å‹¾é€‰çŠ¶æ€ ä½œä¸ºå‚æ•°ä¼ é€’ç»™ radio-change äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;radio-change&#x27;</span>, &#123;</span><br><span class="line">            <span class="comment">// å•†å“çš„ Id</span></span><br><span class="line">            <span class="attr">goods_id</span>: <span class="built_in">this</span>.goods.goods_id,</span><br><span class="line">            <span class="comment">// å•†å“æœ€æ–°çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line">            <span class="attr">goods_state</span>: !<span class="built_in">this</span>.goods.goods_state</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„å‹¾é€‰çŠ¶æ€"><a href="#ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„å‹¾é€‰çŠ¶æ€" class="headerlink" title="ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„å‹¾é€‰çŠ¶æ€"></a>ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„å‹¾é€‰çŠ¶æ€</h3><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„ mutations æ–¹æ³•ï¼Œç”¨æ¥ä¿®æ”¹å¯¹åº”å•†å“çš„å‹¾é€‰çŠ¶æ€ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°è´­ç‰©è½¦ä¸­å•†å“çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">updateGoodsState</span>(<span class="params">state, goods</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ® goods_id æŸ¥è¯¢è´­ç‰©è½¦ä¸­å¯¹åº”å•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> result = state.cart.find(<span class="function"><span class="params">item</span> =&gt;</span> item.goods_id === goods.goods_id)</span><br><span class="line">    <span class="comment">// æœ‰å¯¹åº”çš„å•†å“ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">if</span> (result) &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°å¯¹åº”å•†å“çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line">        result.goods_state = goods.goods_state</span><br><span class="line">        <span class="comment">// æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">        <span class="built_in">this</span>.commit(<span class="string">&#x27;m_cart/saveToStorage&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>cart.vue</code> é¡µé¢ä¸­ï¼Œå¯¼å…¥ mapMutations è¿™ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå°†éœ€è¦çš„ mutations æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;updateGoodsState&#x27;</span>]),</span><br><span class="line">        <span class="comment">// å•†å“çš„å‹¾é€‰çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">        <span class="function"><span class="title">radioChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.updateGoodsState(e)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸º-my-goods-ç»„ä»¶å°è£…-NumberBox"><a href="#ä¸º-my-goods-ç»„ä»¶å°è£…-NumberBox" class="headerlink" title="ä¸º my-goods ç»„ä»¶å°è£… NumberBox"></a>ä¸º my-goods ç»„ä»¶å°è£… NumberBox</h3><p><a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=31">NumberBox</a> ç»„ä»¶æ˜¯ uni-ui æä¾›çš„ã€‚</p>
<ol>
<li>ä¿®æ”¹ <code>components/my-goods/my-goods.vue</code> ç»„ä»¶ï¼Œåœ¨ç±»åä¸º goods-item-right çš„ view ç»„ä»¶å†…éƒ¨æ¸²æŸ“ NumberBox ç»„ä»¶çš„åŸºæœ¬ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-info-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>ï¿¥&#123;&#123;goods.goods_price | tofixed&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“æ•°é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-number-box</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-number-box</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–é¡µé¢çš„ç»“æ„ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods-item-right</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="selector-class">.goods-name</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.goods-info-box</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-class">.goods-price</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#c00000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>my-goods.vue</code> ç»„ä»¶ä¸­ï¼ŒåŠ¨æ€ä¸º NumberBox ç»„ä»¶ç»‘å®šå•†å“çš„æ•°é‡å€¼ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-info-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>ï¿¥&#123;&#123;goods.goods_price | tofixed&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“æ•°é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-number-box</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;goods.goods_count&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-number-box</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åœ¨ <code>my-goods.vue</code> ç»„ä»¶ä¸­ï¼Œå°è£…åç§°ä¸º showNum çš„ props å±æ€§ï¼Œæ¥æ§åˆ¶å½“å‰ç»„ä»¶ä¸­æ˜¯å¦æ˜¾ç¤º NumberBox ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å®šä¹‰ props å±æ€§ï¼Œç”¨æ¥æ¥æ”¶å¤–ç•Œä¼ é€’åˆ°å½“å‰ç»„ä»¶çš„æ•°æ®</span></span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="comment">// å•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">        <span class="attr">goods</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">            <span class="attr">defaul</span>: &#123;&#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ˜¯å¦å±•ç¤ºå›¾ç‰‡å·¦ä¾§çš„ radio</span></span><br><span class="line">        <span class="attr">showRadio</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">            <span class="comment">// å¦‚æœå¤–ç•Œæ²¡æœ‰æŒ‡å®š show-radio å±æ€§çš„å€¼ï¼Œåˆ™é»˜è®¤ä¸å±•ç¤º radio ç»„ä»¶</span></span><br><span class="line">            <span class="attr">default</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// æ˜¯å¦å±•ç¤ºä»·æ ¼å³ä¾§çš„ NumberBox ç»„ä»¶</span></span><br><span class="line">        <span class="attr">showNum</span>: &#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span><br><span class="line">            <span class="attr">default</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>åœ¨ <code>my-goods.vue</code> ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ v-if æŒ‡ä»¤æ§åˆ¶ NumberBox ç»„ä»¶çš„æŒ‰éœ€å±•ç¤ºã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-info-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>ï¿¥&#123;&#123;goods.goods_price | tofixed&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“æ•°é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-number-box</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;goods.goods_count&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;showNum&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-number-box</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="6">
<li>åœ¨ <code>cart.vue</code> é¡µé¢ä¸­çš„å•†å“åˆ—è¡¨åŒºåŸŸï¼ŒæŒ‡å®š <code>:show-num=&quot;true&quot;</code> å±æ€§ï¼Œä»è€Œæ˜¾ç¤º NumberBox ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, i) in cart&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">:showRadio</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:showNum</span>=<span class="string">&quot;true&quot;</span> @<span class="attr">radio-change</span>=<span class="string">&quot;radioChangeHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸º-my-goods-ç»„ä»¶å°è£…-num-change-äº‹ä»¶"><a href="#ä¸º-my-goods-ç»„ä»¶å°è£…-num-change-äº‹ä»¶" class="headerlink" title="ä¸º my-goods ç»„ä»¶å°è£… num-change äº‹ä»¶"></a>ä¸º my-goods ç»„ä»¶å°è£… num-change äº‹ä»¶</h3><p>ğŸ“ éœ€æ±‚ï¼šå½“ç”¨æˆ·ä¿®æ”¹äº† NumberBox çš„å€¼ä»¥åï¼Œå¸Œæœ›å°†æœ€æ–°çš„å•†å“æ•°é‡æ›´æ–°åˆ°è´­ç‰©è½¦ä¸­ã€‚</p>
<ol>
<li>æ­¤æ—¶æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ <code>cart.vue</code> ä¸­ä¸º my-goods ç»„ä»¶ç»‘å®š @num-change äº‹ä»¶ï¼Œåœ¨äº‹ä»¶å›è°ƒä¸­è·å–å•†å“çš„ goods_id å’Œ goods_countã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">block</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, i) in cart&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">my-goods</span> @<span class="attr">num-change</span>=<span class="string">&quot;numberChangeHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•†å“çš„æ•°é‡å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line"><span class="function"><span class="title">numberChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>components/my-goods/my-goods.vue</code> ç»„ä»¶ä¸­ï¼Œä¸º uni-number-box ç»„ä»¶ç»‘å®š @change äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-info-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“ä»·æ ¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;goods-price&quot;</span>&gt;</span>ï¿¥&#123;&#123;goods.goods_price | tofixed&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å•†å“æ•°é‡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-number-box</span> <span class="attr">:min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;goods.goods_count&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;numChangeHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-number-box</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å®šä¹‰ numChangeHandler äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// NumberBox ç»„ä»¶çš„ change äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="title">numChangeHandler</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// é€šè¿‡ this.$emit() è§¦å‘å¤–ç•Œé€šè¿‡ @ ç»‘å®šçš„ num-change äº‹ä»¶</span></span><br><span class="line">        <span class="built_in">this</span>.$emit(<span class="string">&#x27;num-change&#x27;</span>, &#123;</span><br><span class="line">            <span class="comment">// å•†å“çš„ Id</span></span><br><span class="line">            <span class="attr">goods_id</span>: <span class="built_in">this</span>.goods.goods_id,</span><br><span class="line">            <span class="comment">// å•†å“çš„æœ€æ–°æ•°é‡</span></span><br><span class="line">            <span class="attr">goods_count</span>: +val</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡"><a href="#ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡" class="headerlink" title="ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡"></a>ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡</h3><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„ mutations æ–¹æ³•ï¼Œç”¨æ¥ä¿®æ”¹å¯¹åº”å•†å“çš„æ•°é‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡</span></span><br><span class="line"><span class="function"><span class="title">updateGoodsCount</span>(<span class="params">state, goods</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ ¹æ® goods_id æŸ¥è¯¢è´­ç‰©è½¦ä¸­å¯¹åº”å•†å“çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> result = state.cart.find(<span class="function"><span class="params">item</span> =&gt;</span> item.goods_id === goods.goods_id)</span><br><span class="line">    <span class="keyword">if</span>(result) &#123;</span><br><span class="line">        <span class="comment">// æ›´æ–°å¯¹åº”å•†å“çš„æ•°é‡</span></span><br><span class="line">        result.goods_count = goods.goods_count</span><br><span class="line">        <span class="comment">// æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">        <span class="built_in">this</span>.commit(<span class="string">&#x27;m_cart/saveToStorage&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>cart.vue</code> é¡µé¢ä¸­ï¼Œé€šè¿‡ mapMutations è¿™ä¸ªè¾…åŠ©å‡½æ•°ï¼Œå°†éœ€è¦çš„ mutations æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> badgeMix <span class="keyword">from</span> <span class="string">&#x27;@/mixins/tabbar-badge.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">mixins</span>: [badgeMix],</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapState(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;cart&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;updateGoodsState&#x27;</span>, <span class="string">&#x27;updateGoodsCount&#x27;</span>]),</span><br><span class="line">        <span class="comment">// å•†å“çš„å‹¾é€‰çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">        <span class="function"><span class="title">radioChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.updateGoodsState(e)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// å•†å“çš„æ•°é‡å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">        <span class="function"><span class="title">numberChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.updateGoodsCount(e)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¯ä»¥è§£å†³ï¼šå¯¹è´­ç‰©è½¦æ•°é‡è¿›è¡ŒåŠ å‡æ—¶è´­ç‰©è½¦å¾½æ ‡ä¸æ›´æ–°çš„é—®é¢˜</span></span><br><span class="line">            <span class="comment">// this.setBadge()</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€è®¡ç®—è´­ç‰©è½¦å¾½æ ‡çš„æ•°å€¼"><a href="#åŠ¨æ€è®¡ç®—è´­ç‰©è½¦å¾½æ ‡çš„æ•°å€¼" class="headerlink" title="åŠ¨æ€è®¡ç®—è´­ç‰©è½¦å¾½æ ‡çš„æ•°å€¼"></a>åŠ¨æ€è®¡ç®—è´­ç‰©è½¦å¾½æ ‡çš„æ•°å€¼</h3><ol>
<li><p>é—®é¢˜ï¼šå½“ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡ä¹‹åï¼ŒtabBar ä¸Šçš„æ•°å­—å¾½æ ‡ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</p>
</li>
<li><p>è§£å†³ï¼šæ”¹é€  <code>mixins/tabbar-badge.js</code> ä¸­çš„ä»£ç ï¼Œä½¿ç”¨ watch ä¾¦å¬å™¨ï¼Œç›‘å¬ total æ€»æ•°é‡çš„å˜åŒ–ï¼Œä»è€ŒåŠ¨æ€ä¸º tabBar çš„å¾½æ ‡èµ‹å€¼ã€‚</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¼å‡ºä¸€ä¸ª mixin å¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="comment">// ç›‘å¬ total å€¼çš„å˜åŒ–</span></span><br><span class="line">        <span class="function"><span class="title">total</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨ methods ä¸­çš„ setBadge æ–¹æ³•ï¼Œé‡æ–°ä¸º tabBar çš„æ•°å­—å¾½ç« èµ‹å€¼</span></span><br><span class="line">            <span class="built_in">this</span>.setBadge()</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">onShow</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨é¡µé¢åˆšå±•ç¤ºçš„æ—¶å€™ï¼Œè®¾ç½®æ•°å­—å¾½æ ‡</span></span><br><span class="line">        <span class="built_in">this</span>.setBadge()</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="function"><span class="title">setBadge</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// è°ƒç”¨ uni.setTabBarBadge() æ–¹æ³•ï¼Œä¸ºè´­ç‰©è½¦è®¾ç½®å³ä¸Šè§’çš„å¾½æ ‡</span></span><br><span class="line">            uni.setTabBarBadge(&#123;</span><br><span class="line">                <span class="attr">index</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">text</span>: <span class="built_in">this</span>.total + <span class="string">&#x27;&#x27;</span>, <span class="comment">// æ³¨æ„ï¼štext çš„å€¼å¿…é¡»æ˜¯å­—ç¬¦ä¸²ï¼Œä¸èƒ½æ˜¯æ•°å­—</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“æ»‘åŠ¨åˆ é™¤çš„-UI-æ•ˆæœ"><a href="#æ¸²æŸ“æ»‘åŠ¨åˆ é™¤çš„-UI-æ•ˆæœ" class="headerlink" title="æ¸²æŸ“æ»‘åŠ¨åˆ é™¤çš„ UI æ•ˆæœ"></a>æ¸²æŸ“æ»‘åŠ¨åˆ é™¤çš„ UI æ•ˆæœ</h3><p>ğŸ˜€ æ»‘åŠ¨åˆ é™¤éœ€è¦ç”¨åˆ° uni-ui çš„ uni-swipe-action ç»„ä»¶å’Œ uni-swipe-action-itemï¼Œ<a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=181">è¯¦æƒ…åœ°å€</a>ã€‚</p>
<ol>
<li>æ”¹é€  <code>cart.vue</code> é¡µé¢çš„ UI ç»“æ„ï¼Œå°†å•†å“åˆ—è¡¨åŒºåŸŸçš„ç»“æ„ä¿®æ”¹å¦‚ä¸‹ï¼ˆå¯ä»¥ä½¿ç”¨ uSwipeAction ä»£ç å—å¿«é€Ÿç”ŸæˆåŸºæœ¬çš„ UI ç»“æ„ï¼‰ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- uni-swipe-action æ˜¯æœ€å¤–å±‚åŒ…è£¹æ€§è´¨çš„å®¹å™¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uni-swipe-action</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">block</span> <span class="attr">v-for</span>=<span class="string">&quot;(goods, i) in cart&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- uni-swipe-action-item å¯ä»¥ä¸ºå…¶å­èŠ‚ç‚¹æä¾›æ»‘åŠ¨æ“ä½œçš„æ•ˆæœã€‚éœ€è¦é€šè¿‡ options å±æ€§æ¥æŒ‡å®šæ“ä½œæŒ‰é’®çš„é…ç½®ä¿¡æ¯ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-swipe-action-item</span> <span class="attr">:rightOptions</span>=<span class="string">&quot;rightOptions&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;swipeActionClickHandler(goods)&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">my-goods</span> <span class="attr">:goods</span>=<span class="string">&quot;goods&quot;</span> <span class="attr">:show-radio</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:show-num</span>=<span class="string">&quot;true&quot;</span> @<span class="attr">radio-change</span>=<span class="string">&quot;radioChangeHandler&quot;</span> @<span class="attr">num-change</span>=<span class="string">&quot;numberChangeHandler&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-goods</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">uni-swipe-action-item</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">uni-swipe-action</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ data èŠ‚ç‚¹ä¸­å£°æ˜ options æ•°ç»„ï¼Œç”¨æ¥å®šä¹‰æ“ä½œæŒ‰é’®çš„é…ç½®ä¿¡æ¯ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">rightOptions</span>: [&#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;åˆ é™¤&#x27;</span>, <span class="comment">// æ˜¾ç¤ºçš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line">            <span class="attr">style</span>: &#123;</span><br><span class="line">                <span class="attr">backgroundColor</span>: <span class="string">&#x27;#C00000&#x27;</span> <span class="comment">// æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ methods ä¸­å£°æ˜ uni-swipe-action-item ç»„ä»¶çš„ @click äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»äº†æ»‘åŠ¨æ“ä½œæŒ‰é’®</span></span><br><span class="line"><span class="function"><span class="title">swipeActionClickHandler</span>(<span class="params">goods</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(goods)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>ç¾åŒ– <code>my-goods.vue</code> ç»„ä»¶çš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.goods-item</span> &#123;</span><br><span class="line">    // è®© goods-item é¡¹å æ»¡æ•´ä¸ªå±å¹•çš„å®½åº¦</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">    // è®¾ç½®ç›’æ¨¡å‹ä¸º <span class="attribute">border</span>-box</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#f0f0f0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ğŸ¤” æ³¨æ„ï¼šå¦‚æœä¸èƒ½å‡ºç°æ»‘åŠ¨æ•ˆæœï¼Œé‡æ–°å¯åŠ¨å°ç¨‹åºæ¨¡æ‹Ÿå™¨å°è¯•ã€‚</p>
<h3 id="å®ç°æ»‘åŠ¨åˆ é™¤çš„åŠŸèƒ½"><a href="#å®ç°æ»‘åŠ¨åˆ é™¤çš„åŠŸèƒ½" class="headerlink" title="å®ç°æ»‘åŠ¨åˆ é™¤çš„åŠŸèƒ½"></a>å®ç°æ»‘åŠ¨åˆ é™¤çš„åŠŸèƒ½</h3><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—çš„ mutations èŠ‚ç‚¹ä¸­å£°æ˜å¦‚ä¸‹çš„æ–¹æ³•ï¼Œä»è€Œæ ¹æ®å•†å“çš„ Id ä»è´­ç‰©è½¦ä¸­ç§»é™¤å¯¹åº”çš„å•†å“ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® Id ä»è´­ç‰©è½¦ä¸­åˆ é™¤å¯¹åº”çš„å•†å“ä¿¡æ¯</span></span><br><span class="line"><span class="function"><span class="title">removeGoodsById</span>(<span class="params">state, goods_id</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨æ•°ç»„çš„ filter æ–¹æ³•è¿›è¡Œè¿‡æ»¤</span></span><br><span class="line">    state.cart = state.cart.filter(<span class="function"><span class="params">x</span> =&gt;</span> x.goods_id !== goods_id)</span><br><span class="line">    <span class="comment">// æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">    <span class="built_in">this</span>.commit(<span class="string">&#x27;m_cart/saveToStorage&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>cart.vue</code> é¡µé¢ä¸­ï¼Œä½¿ç”¨ mapMutations è¾…åŠ©å‡½æ•°ï¼ŒæŠŠéœ€è¦çš„æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    ...mapMutations(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;updateGoodsState&#x27;</span>, <span class="string">&#x27;updateGoodsCount&#x27;</span>, <span class="string">&#x27;removeGoodsById&#x27;</span>]),</span><br><span class="line">    <span class="comment">// å•†å“çš„å‹¾é€‰çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">    <span class="function"><span class="title">radioChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.updateGoodsState(e)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å•†å“çš„æ•°é‡å‘ç”Ÿäº†å˜åŒ–</span></span><br><span class="line">    <span class="function"><span class="title">numberChangeHandler</span>(<span class="params">e</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.updateGoodsCount(e)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç‚¹å‡»äº†æ»‘åŠ¨æ“ä½œæŒ‰é’®</span></span><br><span class="line">    <span class="function"><span class="title">swipeActionClickHandler</span>(<span class="params">goods</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.removeGoodsById(goods.goods_id)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç»“ç®—åŒºåŸŸ"><a href="#ç»“ç®—åŒºåŸŸ" class="headerlink" title="ç»“ç®—åŒºåŸŸ"></a>ç»“ç®—åŒºåŸŸ</h2><h3 id="æŠŠç»“ç®—åŒºåŸŸå°è£…ä¸ºç»„ä»¶"><a href="#æŠŠç»“ç®—åŒºåŸŸå°è£…ä¸ºç»„ä»¶" class="headerlink" title="æŠŠç»“ç®—åŒºåŸŸå°è£…ä¸ºç»„ä»¶"></a>æŠŠç»“ç®—åŒºåŸŸå°è£…ä¸ºç»„ä»¶</h3><ol>
<li>åœ¨ components ç›®å½•ä¸­ï¼Œæ–°å»º my-settle ç»“ç®—ç»„ä»¶ã€‚</li>
</ol>
<img src="/resource/images/9-4.1739d570.png"/>

<ol start="2">
<li>åˆå§‹åŒ– my-settle ç»„ä»¶çš„åŸºæœ¬ç»“æ„å’Œæ ·å¼ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœ€å¤–å±‚çš„å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-settle-container&quot;</span>&gt;</span> ç»“ç®—ç»„ä»¶ <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.my-settle-container</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="comment">/* åº•éƒ¨å›ºå®šå®šä½ */</span></span></span><br><span class="line"><span class="css">        <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="css">        <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="css">        <span class="comment">/* è®¾ç½®å®½é«˜å’ŒèƒŒæ™¯è‰² */</span></span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: cyan;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>cart.vue</code> é¡µé¢ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„ my-settle ç»„ä»¶ï¼Œå¹¶ç¾åŒ–é¡µé¢æ ·å¼ï¼Œé˜²æ­¢é¡µé¢åº•éƒ¨è¢«è¦†ç›–ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cart-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨è‡ªå®šä¹‰çš„ address ç»„ä»¶ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»“ç®—åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-settle</span>&gt;</span><span class="tag">&lt;/<span class="name">my-settle</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">    page &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.cart-container</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">background-color</span>: white;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">padding-bottom</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">box-sizing</span>: border-box;</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“ç»“ç®—åŒºåŸŸçš„ç»“æ„å’Œæ ·å¼"><a href="#æ¸²æŸ“ç»“ç®—åŒºåŸŸçš„ç»“æ„å’Œæ ·å¼" class="headerlink" title="æ¸²æŸ“ç»“ç®—åŒºåŸŸçš„ç»“æ„å’Œæ ·å¼"></a>æ¸²æŸ“ç»“ç®—åŒºåŸŸçš„ç»“æ„å’Œæ ·å¼</h3><ol>
<li>å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ï¼Œ<code>components/my-settle/my-settle.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœ€å¤–å±‚çš„å®¹å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-settle-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…¨é€‰åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">radio</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span> <span class="attr">:checked</span>=<span class="string">&quot;true&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">text</span>&gt;</span>å…¨é€‰<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- åˆè®¡åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;amount-box&quot;</span>&gt;</span> åˆè®¡:<span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;amount&quot;</span>&gt;</span>ï¿¥1234.00<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç»“ç®—åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-settle&quot;</span>&gt;</span>ç»“ç®—(0)<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my-settle-container</span> &#123;</span><br><span class="line">    <span class="comment">/* åº•éƒ¨å›ºå®šå®šä½ */</span></span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="comment">/* è®¾ç½®å®½é«˜å’ŒèƒŒæ™¯è‰² */</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: white; // å°†èƒŒæ™¯è‰²ä» cyan æ”¹ä¸º white</span><br><span class="line"></span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.radio</span> &#123;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.amount-box</span> &#123;</span><br><span class="line">        <span class="selector-class">.amount</span> &#123;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#c00000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.btn-settle</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">        <span class="attribute">min-width</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#c00000</span>;</span><br><span class="line">        <span class="attribute">color</span>: white;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">        <span class="attribute">text-align</span>: center;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»æ•°é‡"><a href="#åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»æ•°é‡" class="headerlink" title="åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»æ•°é‡"></a>åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»æ•°é‡</h3><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªåç§°ä¸º checkedCount çš„ gettersï¼Œç”¨æ¥ç»Ÿè®¡å·²å‹¾é€‰å•†å“çš„æ€»æ•°é‡ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‹¾é€‰çš„å•†å“çš„æ€»æ•°é‡</span></span><br><span class="line"><span class="function"><span class="title">checkedCount</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å…ˆä½¿ç”¨ filter æ–¹æ³•ï¼Œä»è´­ç‰©è½¦ä¸­è¿‡æ»¤å‡ºå·²å‹¾é€‰çš„å•†å“</span></span><br><span class="line">    <span class="comment">// å†ä½¿ç”¨ reduce æ–¹æ³•ï¼Œå°†å·²å‹¾é€‰çš„å•†å“æ€»æ•°é‡è¿›è¡Œç´¯åŠ </span></span><br><span class="line">    <span class="comment">// reduce() çš„è¿”å›å€¼å°±æ˜¯å·²å‹¾é€‰çš„å•†å“çš„æ€»æ•°é‡</span></span><br><span class="line">    <span class="keyword">return</span> state.cart.filter(<span class="function"><span class="params">item</span> =&gt;</span> item.goods_state)</span><br><span class="line">        .reduce(<span class="function">(<span class="params">total, item</span>) =&gt;</span> total += item.goods_count, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ my-settle ç»„ä»¶ä¸­ï¼Œé€šè¿‡ mapGetters è¾…åŠ©å‡½æ•°ï¼Œå°†éœ€è¦çš„ getters æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;checkedCount&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å°† checkedCount çš„å€¼æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»“ç®—æŒ‰é’® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-settle&quot;</span>&gt;</span>ç»“ç®—(&#123;&#123;checkedCount&#125;&#125;)<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€æ¸²æŸ“å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€"><a href="#åŠ¨æ€æ¸²æŸ“å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€" class="headerlink" title="åŠ¨æ€æ¸²æŸ“å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€"></a>åŠ¨æ€æ¸²æŸ“å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€</h3><ol>
<li>ä½¿ç”¨ mapGetters è¾…åŠ©å‡½æ•°ï¼Œå°†å•†å“çš„æ€»æ•°é‡æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªå«åš isFullCheck çš„è®¡ç®—å±æ€§ã€‚</li>
</ol>
<p><code>components/my-settle/my-settle.vue</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// 1. å°† total æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­</span></span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;checkedCount&#x27;</span>, <span class="string">&#x27;total&#x27;</span>]),</span><br><span class="line">        <span class="comment">// 2. æ˜¯å¦å…¨é€‰</span></span><br><span class="line">        <span class="function"><span class="title">isFullCheck</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.total === <span class="built_in">this</span>.checkedCount</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¸º radio ç»„ä»¶åŠ¨æ€ç»‘å®š checked å±æ€§çš„å€¼ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å…¨é€‰åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">radio</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span> <span class="attr">:checked</span>=<span class="string">&quot;isFullCheck&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">text</span>&gt;</span>å…¨é€‰<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å®ç°å•†å“çš„å…¨é€‰-åé€‰åŠŸèƒ½"><a href="#å®ç°å•†å“çš„å…¨é€‰-åé€‰åŠŸèƒ½" class="headerlink" title="å®ç°å•†å“çš„å…¨é€‰/åé€‰åŠŸèƒ½"></a>å®ç°å•†å“çš„å…¨é€‰/åé€‰åŠŸèƒ½</h3><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå«åš updateAllGoodsState çš„ mutations æ–¹æ³•ï¼Œç”¨æ¥ä¿®æ”¹æ‰€æœ‰å•†å“çš„å‹¾é€‰çŠ¶æ€ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ›´æ–°æ‰€æœ‰å•†å“çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="title">updateAllGoodsState</span>(<span class="params">state, newState</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å¾ªç¯æ›´æ–°è´­ç‰©è½¦ä¸­æ¯ä»¶å•†å“çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line">    state.cart.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item.goods_state = newState)</span><br><span class="line">    <span class="comment">// æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">    <span class="built_in">this</span>.commit(<span class="string">&#x27;m_cart/saveToStorage&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ my-settle ç»„ä»¶ä¸­ï¼Œé€šè¿‡ mapMutations è¾…åŠ©å‡½æ•°ï¼Œå°†éœ€è¦çš„ mutations æ–¹æ³•æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. æŒ‰éœ€å¯¼å…¥ mapMutations è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// çœç•¥å…¶å®ƒä»£ç </span></span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// 2. ä½¿ç”¨ mapMutations è¾…åŠ©å‡½æ•°ï¼ŒæŠŠ m_cart æ¨¡å—æä¾›çš„ updateAllGoodsState æ–¹æ³•æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;updateAllGoodsState&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä¸º UI ä¸­çš„ label ç»„ä»¶ç»‘å®š click äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å…¨é€‰åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;radio&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeAllState&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">radio</span> <span class="attr">color</span>=<span class="string">&quot;#C00000&quot;</span> <span class="attr">:checked</span>=<span class="string">&quot;isFullCheck&quot;</span> /&gt;</span><span class="tag">&lt;<span class="name">text</span>&gt;</span>å…¨é€‰<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åœ¨ my-settle ç»„ä»¶çš„ methods èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜ changeAllState äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    ...mapMutations(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;updateAllGoodsState&#x27;</span>]),</span><br><span class="line">    <span class="comment">// label çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="title">changeAllState</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// ä¿®æ”¹è´­ç‰©è½¦ä¸­æ‰€æœ‰å•†å“çš„é€‰ä¸­çŠ¶æ€</span></span><br><span class="line">        <span class="comment">// !this.isFullCheck è¡¨ç¤ºï¼šå½“å‰å…¨é€‰æŒ‰é’®çš„çŠ¶æ€å–åä¹‹åï¼Œå°±æ˜¯æœ€æ–°çš„å‹¾é€‰çŠ¶æ€</span></span><br><span class="line">        <span class="built_in">this</span>.updateAllGoodsState(!<span class="built_in">this</span>.isFullCheck)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»ä»·æ ¼"><a href="#åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»ä»·æ ¼" class="headerlink" title="åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»ä»·æ ¼"></a>åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»ä»·æ ¼</h3><ol>
<li>åœ¨ <code>store/cart.js</code> æ¨¡å—ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå«åš checkedGoodsAmount çš„ gettersï¼Œç”¨æ¥ç»Ÿè®¡å·²å‹¾é€‰å•†å“çš„æ€»ä»·æ ¼ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å·²å‹¾é€‰çš„å•†å“çš„æ€»ä»·</span></span><br><span class="line"><span class="function"><span class="title">checkedGoodsAmount</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å…ˆä½¿ç”¨ filter æ–¹æ³•ï¼Œä»è´­ç‰©è½¦ä¸­è¿‡æ»¤å™¨å·²å‹¾é€‰çš„å•†å“</span></span><br><span class="line">    <span class="comment">// å†ä½¿ç”¨ reduce æ–¹æ³•ï¼Œå°†å·²å‹¾é€‰çš„å•†å“æ•°é‡ * å•ä»·ä¹‹åï¼Œè¿›è¡Œç´¯åŠ </span></span><br><span class="line">    <span class="comment">// reduce() çš„è¿”å›å€¼å°±æ˜¯å·²å‹¾é€‰çš„å•†å“çš„æ€»ä»·</span></span><br><span class="line">    <span class="comment">// æœ€åè°ƒç”¨ toFixed(2) æ–¹æ³•ï¼Œä¿ç•™ä¸¤ä½å°æ•°</span></span><br><span class="line">    <span class="keyword">return</span> state.cart.filter(<span class="function"><span class="params">x</span> =&gt;</span> x.goods_state)</span><br><span class="line">        .reduce(<span class="function">(<span class="params">total, item</span>) =&gt;</span> total += item.goods_count * item.goods_price, <span class="number">0</span>)</span><br><span class="line">        .toFixed(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ my-settle ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ mapGetters è¾…åŠ©å‡½æ•°ï¼ŒæŠŠéœ€è¦çš„ checkedGoodsAmount æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>, <span class="string">&#x27;checkedCount&#x27;</span>, <span class="string">&#x27;checkedGoodsAmount&#x27;</span>])</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ç»„ä»¶çš„ UI ç»“æ„ä¸­ï¼Œæ¸²æŸ“å·²å‹¾é€‰çš„å•†å“çš„æ€»ä»·ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åˆè®¡åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;amount-box&quot;</span>&gt;</span> åˆè®¡:<span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;amount&quot;</span>&gt;</span>ï¿¥&#123;&#123;checkedGoodsAmount&#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span> <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“è´­ç‰©è½¦ä¸ºç©ºæ—¶çš„é¡µé¢ç»“æ„"><a href="#æ¸²æŸ“è´­ç‰©è½¦ä¸ºç©ºæ—¶çš„é¡µé¢ç»“æ„" class="headerlink" title="æ¸²æŸ“è´­ç‰©è½¦ä¸ºç©ºæ—¶çš„é¡µé¢ç»“æ„"></a>æ¸²æŸ“è´­ç‰©è½¦ä¸ºç©ºæ—¶çš„é¡µé¢ç»“æ„</h3><ol>
<li><p>å°†èµ„æ–™ä¸­çš„ <a href="mailto:&#99;&#97;&#x72;&#116;&#x5f;&#x65;&#x6d;&#x70;&#116;&#x79;&#64;&#50;&#x78;&#x2e;&#112;&#x6e;&#103;">&#99;&#97;&#x72;&#116;&#x5f;&#x65;&#x6d;&#x70;&#116;&#x79;&#64;&#50;&#x78;&#x2e;&#112;&#x6e;&#103;</a> å›¾ç‰‡å¤åˆ¶åˆ°é¡¹ç›®çš„ /static/ ç›®å½•ä¸­ã€‚</p>
</li>
<li><p>æ”¹é€  cart.vue é¡µé¢çš„ UI ç»“æ„ï¼Œä½¿ç”¨ v-if å’Œ v-else æ§åˆ¶è´­ç‰©è½¦åŒºåŸŸå’Œç©ºç™½è´­ç‰©è½¦åŒºåŸŸçš„æŒ‰éœ€å±•ç¤ºã€‚</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;cart-container&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;cart.length !== 0&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä½¿ç”¨è‡ªå®šä¹‰çš„ address ç»„ä»¶ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- å•†å“åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç»“ç®—åŒºåŸŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- ç©ºç™½è´­ç‰©è½¦åŒºåŸŸ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;empty-cart&quot;</span> <span class="attr">v-else</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/cart_empty@2x.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;empty-img&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">&quot;tip-text&quot;</span>&gt;</span>ç©ºç©ºå¦‚ä¹Ÿ~<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç¾åŒ–ç©ºç™½è´­ç‰©è½¦åŒºåŸŸçš„æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.empty-cart</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">150px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.empty-img</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">90px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.tip-text</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">color</span>: gray;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">15px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="ç™»å½•å’Œæ”¯ä»˜"><a href="#ç™»å½•å’Œæ”¯ä»˜" class="headerlink" title="ç™»å½•å’Œæ”¯ä»˜"></a>ç™»å½•å’Œæ”¯ä»˜</h1><h2 id="ç™»å½•æ”¯ä»˜æ¼”ç¤º"><a href="#ç™»å½•æ”¯ä»˜æ¼”ç¤º" class="headerlink" title="ç™»å½•æ”¯ä»˜æ¼”ç¤º"></a>ç™»å½•æ”¯ä»˜æ¼”ç¤º</h2><h2 id="éœ€æ±‚åˆ†ææ€»ç»“-2"><a href="#éœ€æ±‚åˆ†ææ€»ç»“-2" class="headerlink" title="éœ€æ±‚åˆ†ææ€»ç»“"></a>éœ€æ±‚åˆ†ææ€»ç»“</h2><ol>
<li><p>ç»“ç®—æ¡ä»¶åˆ¤æ–­ã€‚</p>
</li>
<li><p>æœªç™»å½•çŠ¶æ€ä¸‹ç‚¹å‡»ç»“ç®—å¼¹å‡º 3 ç§’å€’è®¡æ—¶è·³è½¬ç™»å½•é¡µæç¤ºã€‚</p>
</li>
<li><p>ç™»å½•é¡µé¢ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬å›è´­ç‰©è½¦ç»“ç®—é¡µé¢ã€‚</p>
</li>
<li><p>è·å–å¾®ä¿¡ç”¨æˆ·ä¿¡æ¯ã€å¾®ä¿¡ç™»å½•ã€å¾®ä¿¡æ”¯ä»˜ API çš„è°ƒç”¨ã€‚</p>
</li>
<li><p>é»‘é©¬ä¼˜è´­ç™»å½•ã€åˆ›å»ºè®¢å•ã€é¢„æ”¯ä»˜ç­‰ API çš„è°ƒç”¨ã€‚</p>
</li>
</ol>
<h2 id="ç‚¹å‡»ç»“ç®—æŒ‰é’®åŠŸèƒ½å®ç°"><a href="#ç‚¹å‡»ç»“ç®—æŒ‰é’®åŠŸèƒ½å®ç°" class="headerlink" title="ç‚¹å‡»ç»“ç®—æŒ‰é’®åŠŸèƒ½å®ç°"></a>ç‚¹å‡»ç»“ç®—æŒ‰é’®åŠŸèƒ½å®ç°</h2><p>ğŸ¤” ç»“ç®—æ¡ä»¶å¦‚ä¸‹ã€‚</p>
<ul>
<li><p>  æ˜¯å¦å‹¾é€‰äº†è‡³å°‘ä¸€ä»¶è¦ç»“ç®—çš„å•†å“ã€‚</p>
</li>
<li><p>  æ˜¯å¦é€‰æ‹©äº†æ”¶è´§åœ°å€ã€‚</p>
</li>
<li><p>  æ˜¯å¦ç™»å½•ã€‚</p>
</li>
<li><p>  å½“å‰ç»„ä»¶å†…ç¼ºå°‘çš„åˆ¤æ–­æ•°æ®ï¼šæ”¶è·åœ°å€ã€æ˜¯å¦ç™»å½•ï¼ˆtokenï¼‰ã€‚</p>
</li>
</ul>
<ol>
<li>åœ¨ <code>my-settle.vue</code> ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ mapGetters è¾…åŠ©å‡½æ•°ï¼Œä» m_user æ¨¡å—ä¸­å°† addstr å±æ€§æ˜ å°„åˆ°å½“å‰ç»„ä»¶ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>, <span class="string">&#x27;checkedCount&#x27;</span>, <span class="string">&#x27;checkedGoodsAmount&#x27;</span>]),</span><br><span class="line">        <span class="comment">// #mark addstr æ˜¯è¯¦ç»†çš„æ”¶è´§åœ°å€</span></span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;addstr&#x27;</span>]),</span><br><span class="line">        <span class="function"><span class="title">isFullCheck</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.total === <span class="built_in">this</span>.checkedCount</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>store/user.js</code> æ¨¡å—çš„ state èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜è¡¨ç¤ºç”¨æˆ·æ˜¯å¦ç™»å½•çš„ token å­—ç¬¦ä¸²ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// å¼€å¯å‘½åç©ºé—´</span></span><br><span class="line">    <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// state æ•°æ®</span></span><br><span class="line">    <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">        <span class="comment">// æ”¶è´§åœ°å€</span></span><br><span class="line">        <span class="attr">address</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;address&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">        <span class="comment">// ç™»å½•æˆåŠŸä¹‹åçš„ token å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ...çœç•¥å…¶å®ƒä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>my-settle.vue</code> ç»„ä»¶ä¸­ï¼Œä½¿ç”¨ mapState è¾…åŠ©å‡½æ•°ï¼Œä» m_user æ¨¡å—ä¸­å°† token æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€ä» vuex ä¸­å¯¼å…¥ mapState è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters, mapMutations, mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;total&#x27;</span>, <span class="string">&#x27;checkedCount&#x27;</span>, <span class="string">&#x27;checkedGoodsAmount&#x27;</span>]),</span><br><span class="line">        ...mapGetters(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;addstr&#x27;</span>]),</span><br><span class="line">        <span class="comment">// token æ˜¯ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åçš„ token å­—ç¬¦ä¸²</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;token&#x27;</span>]),</span><br><span class="line">        <span class="function"><span class="title">isFullCheck</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">this</span>.total === <span class="built_in">this</span>.checkedCount</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åœ¨ <code>my-settle.vue</code> ç»„ä»¶ä¸­ï¼Œä¸ºç»“ç®—æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç»“ç®—æŒ‰é’® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;btn-settle&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;settlement&quot;</span>&gt;</span>ç»“ç®—(&#123;&#123;checkedCount&#125;&#125;)<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»äº†ç»“ç®—æŒ‰é’®</span></span><br><span class="line"><span class="function"><span class="title">settlement</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// #1 å…ˆåˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†è¦ç»“ç®—çš„å•†å“</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.checkedCount === <span class="number">0</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·é€‰æ‹©è¦ç»“ç®—çš„å•†å“ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// #2 å†åˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.addstr) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·é€‰æ‹©æ”¶è´§åœ°å€ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// #3 æœ€ååˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•äº†</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.token) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·å…ˆç™»å½•ï¼&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºç™»å½•å’Œä¸ªäººä¿¡æ¯è‡ªå®šä¹‰ç»„ä»¶"><a href="#åˆ›å»ºç™»å½•å’Œä¸ªäººä¿¡æ¯è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="åˆ›å»ºç™»å½•å’Œä¸ªäººä¿¡æ¯è‡ªå®šä¹‰ç»„ä»¶"></a>åˆ›å»ºç™»å½•å’Œä¸ªäººä¿¡æ¯è‡ªå®šä¹‰ç»„ä»¶</h2><h3 id="å®šä¹‰-my-é¡µé¢çš„ç¼–è¯‘æ¨¡å¼"><a href="#å®šä¹‰-my-é¡µé¢çš„ç¼–è¯‘æ¨¡å¼" class="headerlink" title="å®šä¹‰ my é¡µé¢çš„ç¼–è¯‘æ¨¡å¼"></a>å®šä¹‰ my é¡µé¢çš„ç¼–è¯‘æ¨¡å¼</h3><h3 id="åˆ›å»ºç™»å½•å’Œç”¨æˆ·ä¿¡æ¯ç»„ä»¶ï¼Œå¹¶å®ç°æ ¹æ®æ˜¯å¦ç™»å½•çš„æ¡ä»¶æ¸²æŸ“"><a href="#åˆ›å»ºç™»å½•å’Œç”¨æˆ·ä¿¡æ¯ç»„ä»¶ï¼Œå¹¶å®ç°æ ¹æ®æ˜¯å¦ç™»å½•çš„æ¡ä»¶æ¸²æŸ“" class="headerlink" title="åˆ›å»ºç™»å½•å’Œç”¨æˆ·ä¿¡æ¯ç»„ä»¶ï¼Œå¹¶å®ç°æ ¹æ®æ˜¯å¦ç™»å½•çš„æ¡ä»¶æ¸²æŸ“"></a>åˆ›å»ºç™»å½•å’Œç”¨æˆ·ä¿¡æ¯ç»„ä»¶ï¼Œå¹¶å®ç°æ ¹æ®æ˜¯å¦ç™»å½•çš„æ¡ä»¶æ¸²æŸ“</h3><ol>
<li>åœ¨ components ç›®å½•ä¸­æ–°å»ºç™»å½•ç»„ä»¶ã€‚</li>
</ol>
<img src="/resource/images/10-1.46e30c32.png"/>

<ol start="2">
<li>åœ¨ components ç›®å½•ä¸­æ–°å»ºç”¨æˆ·ä¿¡æ¯ç»„ä»¶ã€‚</li>
</ol>
<img src="/resource/images/10-2.ace63114.png"/>

<ol start="3">
<li>åœ¨ <code>my.vue</code> é¡µé¢ä¸­ï¼Œé€šè¿‡ mapState è¾…åŠ©å‡½æ•°ï¼Œå¯¼å…¥ user æ¨¡å—ä¸­çš„ token å­—ç¬¦ä¸²ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> badgeMix <span class="keyword">from</span> <span class="string">&#x27;@/mixins/tabbar-badge.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// #1 ä» vuex ä¸­æŒ‰éœ€å¯¼å…¥ mapState è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">mixins</span>: [badgeMix],</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// #2 ä» m_user æ¨¡å—ä¸­å¯¼å…¥éœ€è¦çš„ token å­—ç¬¦ä¸²</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;token&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æ ¹æ® tokenï¼ŒæŒ‰éœ€å±•ç¤ºã€ç™»å½•ç»„ä»¶ã€‘å’Œã€ç”¨æˆ·ä¿¡æ¯ç»„ä»¶ã€‘ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç”¨æˆ·æœªç™»å½•æ—¶ï¼Œæ˜¾ç¤ºç™»å½•ç»„ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-login</span> <span class="attr">v-if</span>=<span class="string">&quot;!token&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">my-login</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- ç”¨æˆ·ç™»å½•åï¼Œæ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ç»„ä»¶ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">my-userinfo</span> <span class="attr">v-else</span>&gt;</span><span class="tag">&lt;/<span class="name">my-userinfo</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç™»å½•ç»„ä»¶å¸ƒå±€"><a href="#ç™»å½•ç»„ä»¶å¸ƒå±€" class="headerlink" title="ç™»å½•ç»„ä»¶å¸ƒå±€"></a>ç™»å½•ç»„ä»¶å¸ƒå±€</h2><ol>
<li>ä¸º <code>my-login.vue</code> ç»„ä»¶å®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;login-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æç¤ºç™»å½•çš„å›¾æ ‡ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;contact-filled&quot;</span> <span class="attr">size</span>=<span class="string">&quot;100&quot;</span> <span class="attr">color</span>=<span class="string">&quot;#AFAFAF&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç™»å½•æŒ‰é’® --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn-login&quot;</span>&gt;</span>ä¸€é”®ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç™»å½•æç¤º --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;login-tips&quot;</span>&gt;</span>ç™»å½•åå°½äº«æ›´å¤šæƒç›Š<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–ç™»å½•ç»„ä»¶çš„æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.login-container</span> &#123;</span><br><span class="line">    // ç™»å½•ç›’å­çš„æ ·å¼</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">750</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f8f8f8</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">    // ç»˜åˆ¶ç™»å½•ç›’å­åº•éƒ¨çš„åŠæ¤­åœ†é€ å‹</span><br><span class="line">    &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">        <span class="attribute">content</span>: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">        <span class="attribute">display</span>: block;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: white;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">translateY</span>(<span class="number">50%</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // ç™»å½•æŒ‰é’®çš„æ ·å¼</span><br><span class="line">    <span class="selector-class">.btn-login</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">90%</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">15px</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#c00000</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // æŒ‰é’®ä¸‹æ–¹æç¤ºæ¶ˆæ¯çš„æ ·å¼</span><br><span class="line">    <span class="selector-class">.login-tips</span> &#123;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">color</span>: gray;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç™»å½•åŠŸèƒ½å®ç°"><a href="#ç™»å½•åŠŸèƒ½å®ç°" class="headerlink" title="ç™»å½•åŠŸèƒ½å®ç°"></a>ç™»å½•åŠŸèƒ½å®ç°</h2><p><a target="_blank" rel="noopener" href="https://www.showdoc.com.cn/128719739414963/2612400282844951">https://www.showdoc.com.cn/128719739414963/2612400282844951</a></p>
<h3 id="ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯"><a href="#ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯" class="headerlink" title="ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯"></a>ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</h3><p>ğŸ“ éœ€æ±‚ï¼šéœ€è¦è·å–å¾®ä¿¡ç”¨æˆ·çš„å¤´åƒã€æ˜µç§°ç­‰åŸºæœ¬ä¿¡æ¯ã€‚</p>
<ol>
<li>ä¸ºç™»å½•çš„ button æŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œ<code>components/my-login/my-login.vue</code>ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç™»å½•æŒ‰é’® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn-login&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;getUserProfile&quot;</span>&gt;</span>ä¸€é”®ç™»å½•<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ methods èŠ‚ç‚¹ä¸­å£°æ˜ <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html">getUserProfile</a> äº‹ä»¶å¤„ç†å‡½æ•°å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="keyword">async</span> getUserProfile () &#123;</span><br><span class="line">        <span class="comment">// desc ä¸ºå¿…å¡«å­—æ®µï¼Œç”¨äºå£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œä¸è¶…è¿‡30ä¸ªå­—ç¬¦</span></span><br><span class="line">        <span class="keyword">const</span> [err, res] = <span class="keyword">await</span> uni.getUserProfile(&#123;<span class="attr">desc</span>: <span class="string">&#x27;å®Œå–„ä¸ªäººèµ„æ–™&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ‹’ç»æˆæƒ</span></span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;æ‚¨æ‹’ç»æˆæƒï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨æˆ·åŒæ„æˆæƒï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¿å­˜å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯åˆ°-vuex-ä¸­"><a href="#ä¿å­˜å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯åˆ°-vuex-ä¸­" class="headerlink" title="ä¿å­˜å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯åˆ° vuex ä¸­"></a>ä¿å­˜å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯åˆ° vuex ä¸­</h3><ol>
<li>åœ¨ <code>store/user.js</code> æ¨¡å—çš„ mutations èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„ä¸¤ä¸ªæ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•</span></span><br><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="comment">// çœç•¥å…¶å®ƒä»£ç ...</span></span><br><span class="line">    <span class="comment">// æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="function"><span class="title">saveUserInfo</span>(<span class="params">state, userinfo</span>)</span> &#123;</span><br><span class="line">        state.userinfo = userinfo</span><br><span class="line">        <span class="comment">// é€šè¿‡ this.commit() æ–¹æ³•ï¼Œè°ƒç”¨ m_user æ¨¡å—ä¸‹çš„ saveUserInfoToStorage æ–¹æ³•ï¼Œå°† userinfo å¯¹è±¡æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">        <span class="built_in">this</span>.commit(<span class="string">&#x27;m_user/saveUserInfoToStorage&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† userinfo æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">    <span class="function"><span class="title">saveUserInfoToStorage</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">        uni.setStorageSync(<span class="string">&#x27;userinfo&#x27;</span>, <span class="built_in">JSON</span>.stringify(state.userinfo))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>store/user.js</code> æ¨¡å—çš„ state èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜ userinfo çš„ä¿¡æ¯å¯¹è±¡å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state æ•°æ®</span></span><br><span class="line"><span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="comment">// address: &#123;&#125;</span></span><br><span class="line">    <span class="attr">address</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;address&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    <span class="comment">// ç™»å½•æˆåŠŸä¹‹åçš„ token å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="comment">// ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">userinfo</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;userinfo&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨ mapMutations è¾…åŠ©å‡½æ•°ï¼Œå°†éœ€è¦çš„æ–¹æ³•æ˜ å°„åˆ° <code>my-login.vue</code> ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #1 æŒ‰éœ€å¯¼å…¥ mapMutations è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// #2 è°ƒç”¨ mapMutations è¾…åŠ©æ–¹æ³•ï¼ŒæŠŠ m_user æ¨¡å—ä¸­çš„ saveUserInfo æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;saveUserInfo&#x27;</span>]),</span><br><span class="line">        <span class="comment">// è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">async</span> <span class="function"><span class="title">getUserProfile</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="comment">// desc ä¸ºå¿…å¡«å­—æ®µï¼Œç”¨äºå£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œä¸è¶…è¿‡30ä¸ªå­—ç¬¦</span></span><br><span class="line">            <span class="keyword">const</span> [err, res] = <span class="keyword">await</span> uni.getUserProfile(&#123; <span class="attr">desc</span>: <span class="string">&#x27;å®Œå–„ä¸ªäººä¿¡æ¯&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç”¨æˆ·æ‹’ç»æˆæƒ</span></span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;æ‚¨æ‹’ç»æˆæƒï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç”¨æˆ·åŒæ„æˆæƒï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ° vuex ä¸­</span></span><br><span class="line">            <span class="built_in">console</span>.log(res)</span><br><span class="line">            <span class="built_in">this</span>.saveUserInfo(res.userInfo)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·å–-Token-å­—ç¬¦ä¸²"><a href="#è·å–-Token-å­—ç¬¦ä¸²" class="headerlink" title="è·å– Token å­—ç¬¦ä¸²"></a>è·å– Token å­—ç¬¦ä¸²</h2><p>ğŸ“ éœ€æ±‚ï¼šå½“è·å–åˆ°äº†å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ä¹‹åã€‚</p>
<ol>
<li><p>è°ƒç”¨å¾®ä¿¡ç™»å½•æ¥å£ <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">wx.login</a>ï¼Œè·å–ç™»å½•å‡­è¯ï¼ˆcodeï¼‰ã€‚</p>
</li>
<li><p>è°ƒç”¨é»‘é©¬ä¼˜è´­ç™»å½•æ¥å£ï¼Œè·å– Token å­—ç¬¦ä¸²ã€‚</p>
</li>
</ol>
<p>åœ¨ getUserProfile æ–¹æ³•ä¸­ï¼Œé¢„è°ƒç”¨ <code>this.getToken()</code> æ–¹æ³•ï¼ŒåŒæ—¶æŠŠè·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯ä¼ é€’è¿›å»ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">async</span> getUserProfile () &#123;</span><br><span class="line">    <span class="comment">// desc ä¸ºå¿…å¡«å­—æ®µï¼Œç”¨äºå£°æ˜è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯åçš„ç”¨é€”ï¼Œä¸è¶…è¿‡ 30 ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="keyword">const</span> [err, res] = <span class="keyword">await</span> uni.getUserProfile(&#123;<span class="attr">desc</span>: <span class="string">&#x27;å®Œå–„ç”¨æˆ·ä¿¡æ¯&#x27;</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·æ‹’ç»æˆæƒ</span></span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;æ‚¨æ‹’ç»æˆæƒï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨æˆ·åŒæ„æˆæƒï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ° vuex ä¸­</span></span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">    <span class="built_in">this</span>.saveUserInfo(res.userInfo)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–ç™»å½•æˆåŠŸåçš„ Token å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="built_in">this</span>.getToken(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ methods ä¸­å®šä¹‰ getToken æ–¹æ³•ï¼Œè°ƒç”¨ç™»å½•ç›¸å…³çš„ APIï¼Œå®ç°ç™»å½•çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨ç™»å½•æ¥å£ï¼Œæ¢å–æ°¸ä¹…çš„ token</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getToken</span>(<span class="params">info</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨å¾®ä¿¡ç™»å½•æ¥å£</span></span><br><span class="line">    <span class="keyword">const</span> [err, res] = <span class="keyword">await</span> uni.login()</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ¤æ–­å¾®ä¿¡ç™»å½• uni.login() æ˜¯å¦è°ƒç”¨å¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;å¾®ä¿¡ç™»å½•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‡†å¤‡å‚æ•°å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> data = &#123;</span><br><span class="line">        <span class="attr">code</span>: res.code, <span class="comment">// å¾®ä¿¡ç™»å½•è¿”å›çš„ code</span></span><br><span class="line">        <span class="attr">encryptedData</span>: info.encryptedData, <span class="comment">// åŒ…æ‹¬æ•æ„Ÿæ•°æ®åœ¨å†…çš„å®Œæ•´ç”¨æˆ·ä¿¡æ¯çš„åŠ å¯†æ•°æ®</span></span><br><span class="line">        <span class="attr">iv</span>: info.iv, <span class="comment">// åŠ å¯†ç®—æ³•çš„åˆå§‹å‘é‡</span></span><br><span class="line">        <span class="attr">rawData</span>: info.rawData, <span class="comment">// ä¸åŒ…æ‹¬æ•æ„Ÿä¿¡æ¯çš„åŸå§‹æ•°æ®å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="attr">signature</span>: info.signature <span class="comment">// ç”¨äºæ ¡éªŒç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// wxfb52f2d7b2f6123a</span></span><br><span class="line">    <span class="comment">// ç”±äºåŒå­¦ä»¬ä¸æ˜¯å°ç¨‹åºå¼€å‘è€…ï¼Œå¯ä»¥å†™æ­»ä¸€ä¸ªå‡å€¼è¿›è¡Œä¸‹é¢æµç¨‹çš„æµ‹è¯•</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: loginResult &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/users/wxlogin&#x27;</span>, data)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç™»å½•ï¼ˆé»‘é©¬ä¼˜è´­ï¼‰æ˜¯å¦æˆåŠŸåˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (loginResult.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;é»‘é©¬ä¼˜è´­ç™»å½•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line">    uni.$showMsg(<span class="string">&#x27;é»‘é©¬ä¼˜è´­ç™»å½•æˆåŠŸï¼&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¿å­˜-Token-å­—ç¬¦ä¸²åˆ°-vuex-ä¸­"><a href="#ä¿å­˜-Token-å­—ç¬¦ä¸²åˆ°-vuex-ä¸­" class="headerlink" title="ä¿å­˜ Token å­—ç¬¦ä¸²åˆ° vuex ä¸­"></a>ä¿å­˜ Token å­—ç¬¦ä¸²åˆ° vuex ä¸­</h2><ol>
<li>åœ¨ <code>store/user.js</code> æ¨¡å—çš„ mutations èŠ‚ç‚¹ä¸­ï¼Œå£°æ˜å¦‚ä¸‹çš„ä¸¤ä¸ªæ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">    <span class="comment">// ...çœç•¥å…¶å®ƒä»£ç </span></span><br><span class="line">    <span class="comment">// æ›´æ–° token å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="function"><span class="title">updateToken</span>(<span class="params">state, token</span>)</span> &#123;</span><br><span class="line">        state.token = token</span><br><span class="line">        <span class="comment">// é€šè¿‡ this.commit() æ–¹æ³•ï¼Œè°ƒç”¨ m_user æ¨¡å—ä¸‹çš„ saveTokenToStorage æ–¹æ³•ï¼Œå°† token å­—ç¬¦ä¸²æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">        <span class="built_in">this</span>.commit(<span class="string">&#x27;m_user/saveTokenToStorage&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† token å­—ç¬¦ä¸²æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></span><br><span class="line">    <span class="function"><span class="title">saveTokenToStorage</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">        uni.setStorageSync(<span class="string">&#x27;token&#x27;</span>, state.token)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¿®æ”¹ <code>store/user.js</code> æ¨¡å—çš„ state èŠ‚ç‚¹å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state æ•°æ®</span></span><br><span class="line"><span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="attr">address</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;address&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    <span class="comment">// ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">userinfo</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;userinfo&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">    <span class="comment">// #mark ç™»å½•æˆåŠŸä¹‹åçš„ token å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="attr">token</span>: uni.getStorageSync(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>my-login.vue</code> ç»„ä»¶ä¸­ï¼ŒæŠŠ vuex ä¸­çš„ updateToken æ–¹æ³•æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// #1 ä½¿ç”¨ mapMutations è¾…åŠ©æ–¹æ³•ï¼ŒæŠŠ m_user æ¨¡å—ä¸­çš„ updateToken æ–¹æ³•æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">    ...mapMutations(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;saveUserInfo&#x27;</span>, <span class="string">&#x27;updateToken&#x27;</span>])</span><br><span class="line">    <span class="comment">// ...çœç•¥å…¶å®ƒä»£ç </span></span><br><span class="line">    <span class="comment">// è°ƒç”¨ç™»å½•æ¥å£ï¼Œæ¢å–æ°¸ä¹…çš„ token</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="title">getToken</span>(<span class="params">info</span>)</span> &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨å¾®ä¿¡ç™»å½•æ¥å£</span></span><br><span class="line">        <span class="keyword">const</span> [err, res] = <span class="keyword">await</span> uni.login()</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­å¾®ä¿¡ç™»å½•uni.login()æ˜¯å¦è°ƒç”¨å¤±è´¥</span></span><br><span class="line">        <span class="keyword">if</span> (err || res.errMsg !== <span class="string">&#x27;login:ok&#x27;</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;å¾®ä¿¡ç™»å½•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‡†å¤‡å‚æ•°å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">const</span> query = &#123;</span><br><span class="line">            <span class="attr">code</span>: res.code, <span class="comment">// å¾®ä¿¡ç™»å½•è¿”å›çš„code</span></span><br><span class="line">            <span class="attr">encryptedData</span>: info.encryptedData,</span><br><span class="line">            <span class="attr">iv</span>: info.iv,</span><br><span class="line">            <span class="attr">rawData</span>: info.rawData,</span><br><span class="line">            <span class="attr">signature</span>: info.signature</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> &#123; <span class="attr">data</span>: loginResult &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/users/wxlogin&#x27;</span>, query)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç™»å½•ï¼ˆé»‘é©¬ä¼˜è´­ï¼‰æ˜¯å¦æˆåŠŸåˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (loginResult.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;é»‘é©¬ä¼˜è´­ç™»å½•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line">        uni.$showMsg(<span class="string">&#x27;é»‘é©¬ä¼˜è´­ç™»å½•æˆåŠŸï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// #2 æ›´æ–° vuex ä¸­çš„ token</span></span><br><span class="line">        <span class="built_in">this</span>.updateToken(loginResult.message.token)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-å¤´åƒæ˜µç§°åŒºåŸŸå¸ƒå±€å’Œæ•°æ®æ¸²æŸ“"><a href="#ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-å¤´åƒæ˜µç§°åŒºåŸŸå¸ƒå±€å’Œæ•°æ®æ¸²æŸ“" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-å¤´åƒæ˜µç§°åŒºåŸŸå¸ƒå±€å’Œæ•°æ®æ¸²æŸ“"></a>ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-å¤´åƒæ˜µç§°åŒºåŸŸå¸ƒå±€å’Œæ•°æ®æ¸²æŸ“</h2><h3 id="å®ç°ç”¨æˆ·å¤´åƒæ˜µç§°åŒºåŸŸçš„åŸºæœ¬å¸ƒå±€"><a href="#å®ç°ç”¨æˆ·å¤´åƒæ˜µç§°åŒºåŸŸçš„åŸºæœ¬å¸ƒå±€" class="headerlink" title="å®ç°ç”¨æˆ·å¤´åƒæ˜µç§°åŒºåŸŸçš„åŸºæœ¬å¸ƒå±€"></a>å®ç°ç”¨æˆ·å¤´åƒæ˜µç§°åŒºåŸŸçš„åŸºæœ¬å¸ƒå±€</h3><ol>
<li>åœ¨ <code>my-userinfo.vue</code> ç»„ä»¶ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;my-userinfo-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¤´åƒæ˜µç§°åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;top-box&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nickname&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–å½“å‰ç»„ä»¶çš„æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my-userinfo-container</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    // ä¸ºæ•´ä¸ªç»„ä»¶çš„ç»“æ„æ·»åŠ æµ…ç°è‰²çš„èƒŒæ™¯ï¼Œè¦æƒ³å®Œå…¨æ’‘å¼€éœ€è¦å°†çˆ¶å®¹å™¨é«˜åº¦è®¾ç½®ä¸º<span class="number">100%</span>ï¼Œå‚ç…§ä¸‹é¢çš„ç¬¬<span class="number">3</span>æ­¥</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#efefef</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.top-box</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">400</span>rpx;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#c00000</span>;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">flex-direction</span>: column;</span><br><span class="line">        <span class="attribute">align-items</span>: center;</span><br><span class="line">        <span class="attribute">justify-content</span>: center;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.avatar</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: block;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">180</span>rpx;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">180</span>rpx;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">90</span>rpx;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">4</span>rpx solid white;</span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2</span>rpx <span class="number">10</span>rpx black;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.nickname</span> &#123;</span><br><span class="line">            <span class="attribute">color</span>: white;</span><br><span class="line">            <span class="attribute">font-weight</span>: bold;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">32</span>rpx;</span><br><span class="line">            <span class="attribute">margin-top</span>: <span class="number">20</span>rpx;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>my.vue</code> é¡µé¢ä¸­ï¼Œä¸ºæœ€å¤–å±‚åŒ…è£¹æ€§è´¨çš„ view å®¹å™¨ï¼Œæ·»åŠ  <code>class=&quot;my-container&quot;</code> çš„ç±»åï¼Œå¹¶ç¾åŒ–æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">page,</span><br><span class="line"><span class="selector-class">.my-container</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°"><a href="#æ¸²æŸ“ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°" class="headerlink" title="æ¸²æŸ“ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°"></a>æ¸²æŸ“ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°</h3><ol>
<li>åœ¨ my-userinfo ç»„ä»¶ä¸­ï¼Œé€šè¿‡ mapState è¾…åŠ©å‡½æ•°ï¼Œå°†éœ€è¦çš„æˆå‘˜æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥ mapState è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// å°† m_user æ¨¡å—ä¸­çš„ userinfo æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;userinfo&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å°†ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°æ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¤´åƒæ˜µç§°åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;top-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">:src</span>=<span class="string">&quot;userinfo.avatarUrl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;nickname&quot;</span>&gt;</span>&#123;&#123;userinfo.nickName&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-åŠŸèƒ½é¢æ¿åŒºåŸŸå¸ƒå±€"><a href="#ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-åŠŸèƒ½é¢æ¿åŒºåŸŸå¸ƒå±€" class="headerlink" title="ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-åŠŸèƒ½é¢æ¿åŒºåŸŸå¸ƒå±€"></a>ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-åŠŸèƒ½é¢æ¿åŒºåŸŸå¸ƒå±€</h2><h3 id="æ¸²æŸ“ç¬¬ä¸€ä¸ªé¢æ¿åŒºåŸŸ"><a href="#æ¸²æŸ“ç¬¬ä¸€ä¸ªé¢æ¿åŒºåŸŸ" class="headerlink" title="æ¸²æŸ“ç¬¬ä¸€ä¸ªé¢æ¿åŒºåŸŸ"></a>æ¸²æŸ“ç¬¬ä¸€ä¸ªé¢æ¿åŒºåŸŸ</h3><ol>
<li>åœ¨ my-userinfo ç»„ä»¶ä¸­ï¼Œå®šä¹‰å¦‚ä¸‹çš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- é¢æ¿çš„åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-list&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¬¬ä¸€ä¸ªé¢æ¿ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- panel çš„ä¸»ä½“åŒºåŸŸ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- panel çš„ item é¡¹ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>8<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>æ”¶è—çš„åº—é“º<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>14<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>æ”¶è—çš„å•†å“<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>18<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>å…³æ³¨çš„å•†å“<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>84<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">text</span>&gt;</span>è¶³è¿¹<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¬¬äºŒä¸ªé¢æ¿ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç¬¬ä¸‰ä¸ªé¢æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–ç¬¬ä¸€ä¸ªé¢æ¿çš„æ ·å¼å¦‚ä¸‹ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panel-list</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">20</span>rpx;</span><br><span class="line">    <span class="selector-class">.panel</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: white;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">6</span>rpx;</span><br><span class="line">        <span class="attribute">margin-bottom</span>: <span class="number">16</span>rpx;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.panel-body</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">justify-content</span>: space-around;</span><br><span class="line"></span><br><span class="line">            <span class="selector-class">.panel-item</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: flex;</span><br><span class="line">                <span class="attribute">flex-direction</span>: column;</span><br><span class="line">                <span class="attribute">align-items</span>: center;</span><br><span class="line">                <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“ç¬¬äºŒä¸ªé¢æ¿åŒºåŸŸ"><a href="#æ¸²æŸ“ç¬¬äºŒä¸ªé¢æ¿åŒºåŸŸ" class="headerlink" title="æ¸²æŸ“ç¬¬äºŒä¸ªé¢æ¿åŒºåŸŸ"></a>æ¸²æŸ“ç¬¬äºŒä¸ªé¢æ¿åŒºåŸŸ</h3><ol>
<li>å®šä¹‰ç¬¬äºŒä¸ªé¢æ¿åŒºåŸŸçš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒä¸ªé¢æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¢æ¿çš„æ ‡é¢˜ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-title&quot;</span>&gt;</span>æˆ‘çš„è®¢å•<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¢æ¿çš„ä¸»ä½“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-body&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é¢æ¿ä¸»ä½“ä¸­çš„ item é¡¹ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/my-icons/icon1.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span>&gt;</span>å¾…ä»˜æ¬¾<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/my-icons/icon2.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span>&gt;</span>å¾…æ”¶è´§<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/my-icons/icon3.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span>&gt;</span>é€€æ¬¾/é€€è´§<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-item&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;/static/my-icons/icon4.png&quot;</span> <span class="attr">class</span>=<span class="string">&quot;icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">text</span>&gt;</span>å…¨éƒ¨è®¢å•<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å¯¹ä¹‹å‰çš„ SCSS æ ·å¼è¿›è¡Œæ”¹é€ ï¼Œä»è€Œç¾åŒ–ç¬¬äºŒä¸ªé¢æ¿çš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panel-list</span> &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">top</span>: -<span class="number">20</span>rpx;</span><br><span class="line">    <span class="selector-class">.panel</span> &#123;</span><br><span class="line">        <span class="attribute">background-color</span>: white;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">6</span>rpx;</span><br><span class="line">        <span class="attribute">margin-bottom</span>: <span class="number">16</span>rpx;</span><br><span class="line">        <span class="selector-class">.panel-title</span> &#123;</span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">90</span>rpx;</span><br><span class="line">            <span class="attribute">padding-left</span>: <span class="number">20</span>rpx;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">            <span class="attribute">border-bottom</span>: <span class="number">2px</span> solid <span class="number">#f4f4f4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.panel-body</span> &#123;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">            <span class="selector-class">.panel-item</span> &#123;</span><br><span class="line">                <span class="attribute">display</span>: flex;</span><br><span class="line">                <span class="attribute">flex-direction</span>: column;</span><br><span class="line">                <span class="attribute">align-items</span>: center;</span><br><span class="line">                <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">                <span class="attribute">font-size</span>: <span class="number">26</span>rpx;</span><br><span class="line">                <span class="attribute">padding</span>: <span class="number">20</span>rpx <span class="number">0</span>;</span><br><span class="line">                <span class="selector-class">.icon</span> &#123;</span><br><span class="line">                    <span class="attribute">width</span>: <span class="number">70</span>rpx;</span><br><span class="line">                    <span class="attribute">height</span>: <span class="number">70</span>rpx;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¸²æŸ“ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸ"><a href="#æ¸²æŸ“ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸ" class="headerlink" title="æ¸²æŸ“ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸ"></a>æ¸²æŸ“ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸ</h3><ol>
<li>å®šä¹‰ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸçš„ UI ç»“æ„ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸‰ä¸ªé¢æ¿ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-list-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>æ”¶è´§åœ°å€<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span> <span class="attr">size</span>=<span class="string">&quot;15&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-list-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>è”ç³»å®¢æœ<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span> <span class="attr">size</span>=<span class="string">&quot;15&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-list-item&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span>&gt;</span>é€€å‡ºç™»å½•<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span> <span class="attr">size</span>=<span class="string">&quot;15&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ç¾åŒ–ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸçš„æ ·å¼ã€‚</li>
</ol>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.panel-list-item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">90</span>rpx;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é€€å‡ºç™»å½•åŠŸèƒ½å®ç°"><a href="#é€€å‡ºç™»å½•åŠŸèƒ½å®ç°" class="headerlink" title="é€€å‡ºç™»å½•åŠŸèƒ½å®ç°"></a>é€€å‡ºç™»å½•åŠŸèƒ½å®ç°</h2><p><code>components/my-userinfo/my-userinfo.vue</code></p>
<ol>
<li>ä½¿ç”¨ mapMutations è¾…åŠ©æ–¹æ³•ï¼Œå°†éœ€è¦ç”¨åˆ°çš„ mutations æ–¹æ³•æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, mapMutations &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;saveUserInfo&#x27;</span>, <span class="string">&#x27;updateToken&#x27;</span>, <span class="string">&#x27;updateAddress&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>ä¸ºç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸä¸­çš„ é€€å‡ºç™»å½• é¡¹ç»‘å®š click ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;panel-list-item&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;logout&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span>&gt;</span>é€€å‡ºç™»å½•<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uni-icons</span> <span class="attr">type</span>=<span class="string">&quot;arrowright&quot;</span> <span class="attr">size</span>=<span class="string">&quot;15&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">uni-icons</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ my-userinfo ç»„ä»¶çš„ methods èŠ‚ç‚¹ä¸­å®šä¹‰ logout äº‹ä»¶å¤„ç†å‡½æ•°ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€€å‡ºç™»å½•</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">logout</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// è¯¢é—®ç”¨æˆ·æ˜¯å¦é€€å‡ºç™»å½•</span></span><br><span class="line">    <span class="keyword">const</span> [err, succ] = <span class="keyword">await</span> uni.showModal(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æç¤º&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;ç¡®è®¤é€€å‡ºç™»å½•å—ï¼Ÿ&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (succ &amp;&amp; succ.confirm) &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·ç¡®è®¤äº†é€€å‡ºç™»å½•çš„æ“ä½œ</span></span><br><span class="line">        <span class="comment">// éœ€è¦æ¸…ç©º vuex ä¸­çš„ userinfoã€token å’Œ address</span></span><br><span class="line">        <span class="built_in">this</span>.saveUserInfo(&#123;&#125;)</span><br><span class="line">        <span class="built_in">this</span>.updateToken(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="built_in">this</span>.updateAddress(&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‰ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢"><a href="#ä¸‰ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢" class="headerlink" title="ä¸‰ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢"></a>ä¸‰ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢</h2><p>ğŸ“ éœ€æ±‚ï¼šåœ¨è´­ç‰©è½¦é¡µé¢ï¼Œå½“ç”¨æˆ·ç‚¹å‡» â€œç»“ç®—â€ æŒ‰é’®æ—¶ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œåˆ™ 3 ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚</p>
<ol>
<li>åœ¨ data èŠ‚ç‚¹ä¸­å£°æ˜å€’è®¡æ—¶çš„ç§’æ•°ï¼Œ<code>components/my-settle/my-settle.vue</code>ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// å€’è®¡æ—¶çš„ç§’æ•°</span></span><br><span class="line">        <span class="attr">seconds</span>: <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>æ”¹é€  ç»“ç®— æŒ‰é’®çš„ click äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œåˆ™é¢„è°ƒç”¨ä¸€ä¸ªå«åš delayNavigate çš„æ–¹æ³•ï¼Œè¿›è¡Œå€’è®¡æ—¶çš„å¯¼èˆªè·³è½¬ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»äº†ç»“ç®—æŒ‰é’®</span></span><br><span class="line"><span class="function"><span class="title">settlement</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. å…ˆåˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†è¦ç»“ç®—çš„å•†å“</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.checkedCount) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·é€‰æ‹©è¦ç»“ç®—çš„å•†å“ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. å†åˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.addstr) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·é€‰æ‹©æ”¶è´§åœ°å€ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. æœ€ååˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•äº†ï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™è°ƒç”¨ delayNavigate() è¿›è¡Œå€’è®¡æ—¶çš„å¯¼èˆªè·³è½¬</span></span><br><span class="line">    <span class="comment">// if (!this.token) return uni.$showMsg(&#x27;è¯·å…ˆç™»å½•ï¼&#x27;)</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.token) <span class="keyword">return</span> <span class="built_in">this</span>.delayNavigate()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ methods å¯¹è±¡ä¸­ï¼Œå®šä¹‰ delayNavigate æ–¹æ³•ï¼Œå®ç°å€’è®¡æ—¶çš„æç¤ºåŠŸèƒ½ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">delayNavigate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å‘äº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­æ·»åŠ æ˜¾ç¤ºå€’è®¡æ—¶æç¤ºæ¡†ä»£ç </span></span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer)</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.seconds === <span class="number">0</span>) &#123;</span><br><span class="line">            uni.switchTab(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&#x27;/pages/my/my&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="built_in">this</span>.seconds = <span class="number">3</span></span><br><span class="line">            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            uni.showToast(&#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">`æœªç™»å½•ï¼Œå°†åœ¨<span class="subst">$&#123;<span class="built_in">this</span>.seconds--&#125;</span>ç§’åè·³è½¬åˆ°ç™»å½•é¡µé¢`</span>,</span><br><span class="line">                <span class="attr">duration</span>: <span class="number">1000</span>,</span><br><span class="line">                <span class="attr">mask</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç™»å½•æˆåŠŸä¹‹åè‡ªåŠ¨è¿”å›ä¹‹å‰çš„é¡µé¢"><a href="#ç™»å½•æˆåŠŸä¹‹åè‡ªåŠ¨è¿”å›ä¹‹å‰çš„é¡µé¢" class="headerlink" title="ç™»å½•æˆåŠŸä¹‹åè‡ªåŠ¨è¿”å›ä¹‹å‰çš„é¡µé¢"></a>ç™»å½•æˆåŠŸä¹‹åè‡ªåŠ¨è¿”å›ä¹‹å‰çš„é¡µé¢</h2><p>ğŸ¤” æ€è·¯ï¼šåœ¨è·³è½¬åˆ°ç™»å½•é¡µå®Œæˆä¹‹åï¼ŒæŠŠ<font color=e32d40><strong>è¿”å›é¡µé¢ï¼ˆå½“å‰é¡µé¢ï¼‰</strong></font>çš„ä¿¡æ¯å­˜å‚¨åˆ° vuex ä¸­ï¼Œç™»å½•æˆåŠŸä¹‹åï¼Œä» vuex å–è¿”å›é¡µé¢ä¿¡æ¯ï¼Œæ ¹æ®è¿”å›é¡µé¢çš„ä¿¡æ¯é‡æ–°è·³è½¬å›å»ã€‚</p>
<p>ğŸ¤” è®¾è®¡ï¼šè¿”å›é¡µé¢çš„ä¿¡æ¯å¯¹è±¡ï¼Œä¸»è¦åŒ…å« openType å’Œ from ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­ openType è¡¨ç¤ºä»¥å“ªç§æ–¹å¼å¯¼èˆªå›ä¹‹å‰çš„é¡µé¢ï¼›from è¡¨ç¤ºä¹‹å‰é¡µé¢çš„ url åœ°å€ã€‚</p>
<ol>
<li>åœ¨ <code>store/user.js</code> æ¨¡å—çš„ state èŠ‚ç‚¹ä¸­å£°æ˜ redirectInfo çš„åˆå§‹å€¼ä¸º nullã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// state æ•°æ®</span></span><br><span class="line"><span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="attr">address</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;address&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    <span class="comment">// ç™»å½•æˆåŠŸä¹‹åçš„ token å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="attr">token</span>: uni.getStorageSync(<span class="string">&#x27;token&#x27;</span>) || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="comment">// ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="attr">userinfo</span>: <span class="built_in">JSON</span>.parse(uni.getStorageSync(<span class="string">&#x27;userinfo&#x27;</span>) || <span class="string">&#x27;&#123;&#125;&#x27;</span>),</span><br><span class="line">    <span class="comment">// é‡å®šå‘çš„ object å¯¹è±¡ &#123; openType, from &#125;</span></span><br><span class="line">    <span class="attr">redirectInfo</span>: <span class="literal">null</span></span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å£°æ˜ä¸€ä¸ªå«åš updateRedirectInfo çš„ mutation æ–¹æ³•ï¼Œç”¨äºæ›´æ–° redirectInfoã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°é‡å®šå‘çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="title">updateRedirectInfo</span>(<span class="params">state, info</span>)</span> &#123;</span><br><span class="line">        state.redirectInfo = info</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>åœ¨ <code>my-settle.vue</code> ç»„ä»¶ä¸­ï¼Œé€šè¿‡ mapMutations è¾…åŠ©æ–¹æ³•ï¼ŒæŠŠ <font color=e32d40><strong>m_user æ¨¡å—</strong></font>ä¸­çš„ updateRedirectInfo æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    <span class="comment">// æŠŠ m_user æ¨¡å—ä¸­çš„ updateRedirectInfo æ–¹æ³•æ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨</span></span><br><span class="line">    ...mapMutations(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;updateRedirectInfo&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æ”¹é€  <code>my-settle.vue</code> ç»„ä»¶ methods èŠ‚ç‚¹ä¸­çš„ delayNavigate æ–¹æ³•ï¼Œåœ¨ switchTab çš„å›è°ƒä¸­å°†é‡å®šå‘çš„ä¿¡æ¯å¯¹è±¡å­˜å‚¨åˆ° vuex ä¸­ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">delayNavigate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// å‘äº‹ä»¶å¾ªç¯é˜Ÿåˆ—ä¸­æ·»åŠ æ˜¾ç¤ºå€’è®¡æ—¶æç¤ºæ¡†ä»£ç </span></span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer)</span><br><span class="line">    <span class="built_in">this</span>.timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.seconds === <span class="number">0</span>) &#123;</span><br><span class="line">            uni.switchTab(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&#x27;/pages/my/my&#x27;</span>,</span><br><span class="line">                <span class="attr">success</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">// è°ƒç”¨ vuex çš„ updateRedirectInfo æ–¹æ³•ï¼ŒæŠŠè·³è½¬ä¿¡æ¯å­˜å‚¨åˆ° Store ä¸­</span></span><br><span class="line">                    <span class="built_in">this</span>.updateRedirectInfo(&#123;</span><br><span class="line">                        <span class="comment">// è·³è½¬çš„æ–¹å¼</span></span><br><span class="line">                        <span class="attr">openType</span>: <span class="string">&#x27;switchTab&#x27;</span>,</span><br><span class="line">                        <span class="comment">// ä»å“ªä¸ªé¡µé¢è·³è½¬è¿‡å»çš„</span></span><br><span class="line">                        <span class="attr">from</span>: <span class="string">&#x27;/pages/cart/cart&#x27;</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="built_in">this</span>.seconds = <span class="number">3</span></span><br><span class="line">            <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.timer)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            uni.showToast(&#123;</span><br><span class="line">                <span class="attr">title</span>: <span class="string">`æœªç™»å½•ï¼Œå°†åœ¨<span class="subst">$&#123;<span class="built_in">this</span>.seconds--&#125;</span>ç§’åè·³è½¬åˆ°ç™»å½•é¡µé¢`</span>,</span><br><span class="line">                <span class="attr">duration</span>: <span class="number">1000</span>,</span><br><span class="line">                <span class="attr">mask</span>: <span class="literal">true</span>,</span><br><span class="line">                <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>åœ¨ <code>my-login.vue</code> ç»„ä»¶ä¸­ï¼Œé€šè¿‡ mapState å’Œ mapMutations è¾…åŠ©æ–¹æ³•ï¼Œå°† vuex ä¸­éœ€è¦çš„æ•°æ®å’Œæ–¹æ³•ï¼Œæ˜ å°„åˆ°å½“å‰é¡µé¢ä¸­ä½¿ç”¨ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŒ‰éœ€å¯¼å…¥è¾…åŠ©å‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapMutations, mapState &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ mapState è¾…åŠ©æ–¹æ³•ï¼ŒæŠŠ m_user æ¨¡å—ä¸­çš„æ•°æ®æ˜ å°„åˆ°å½“å‰ç”¨ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapState(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;redirectInfo&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨ mapMutations è¾…åŠ©æ–¹æ³•ï¼ŒæŠŠ m_user æ¨¡å—ä¸­çš„æ–¹æ³•æ˜ å°„åˆ°å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">        ...mapMutations(<span class="string">&#x27;m_user&#x27;</span>, [<span class="string">&#x27;saveUserInfo&#x27;</span>, <span class="string">&#x27;updateToken&#x27;</span>, <span class="string">&#x27;updateRedirectInfo&#x27;</span>]),</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>æ”¹é€  my-login ç»„ä»¶ä¸­çš„ getToken æ–¹æ³•ï¼Œå½“ç™»å½•æˆåŠŸä¹‹åï¼Œè°ƒç”¨ this.navigateBack() æ–¹æ³•è¿”å›ç™»å½•ä¹‹å‰çš„é¡µé¢ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨ç™»å½•æ¥å£ï¼Œæ¢å–æ°¸ä¹…çš„ token</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">getToken</span>(<span class="params">info</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// ...çœç•¥å…¶å®ƒä»£ç </span></span><br><span class="line">    <span class="comment">// åˆ¤æ–­ vuex ä¸­çš„ redirectInfo æ˜¯å¦ä¸º null</span></span><br><span class="line">    <span class="comment">// å¦‚æœä¸ä¸º nullï¼Œåˆ™ç™»å½•æˆåŠŸä¹‹åï¼Œéœ€è¦é‡æ–°å¯¼èˆªåˆ°å¯¹åº”çš„é¡µé¢</span></span><br><span class="line">    <span class="built_in">this</span>.navigateBack()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>navigateBack æ–¹æ³•å¦‚ä¸‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›ç™»å½•ä¹‹å‰çš„é¡µé¢</span></span><br><span class="line"><span class="function"><span class="title">navigateBack</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// redirectInfo ä¸ä¸º nullï¼Œå¹¶ä¸”å¯¼èˆªæ–¹å¼ä¸º switchTab</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span>.redirectInfo &amp;&amp; <span class="built_in">this</span>.redirectInfo.openType === <span class="string">&#x27;switchTab&#x27;</span>) &#123;</span><br><span class="line">        <span class="comment">// è°ƒç”¨å°ç¨‹åºæä¾›çš„ uni.switchTab() API è¿›è¡Œé¡µé¢çš„å¯¼èˆª</span></span><br><span class="line">        uni.switchTab(&#123;</span><br><span class="line">            <span class="comment">// è¦å¯¼èˆªåˆ°çš„é¡µé¢åœ°å€</span></span><br><span class="line">            <span class="attr">url</span>: <span class="built_in">this</span>.redirectInfo.from,</span><br><span class="line">            <span class="comment">// å¯¼èˆªæˆåŠŸä¹‹åï¼ŒæŠŠ vuex ä¸­çš„ redirectInfo å¯¹è±¡é‡ç½®ä¸º null</span></span><br><span class="line">            <span class="attr">complete</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.updateRedirectInfo(<span class="literal">null</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è°ƒç”¨æ”¯ä»˜å‡†å¤‡å·¥ä½œ"><a href="#è°ƒç”¨æ”¯ä»˜å‡†å¤‡å·¥ä½œ" class="headerlink" title="è°ƒç”¨æ”¯ä»˜å‡†å¤‡å·¥ä½œ"></a>è°ƒç”¨æ”¯ä»˜å‡†å¤‡å·¥ä½œ</h2><h3 id="åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ -Token-èº«ä»½è®¤è¯çš„å­—æ®µ"><a href="#åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ -Token-èº«ä»½è®¤è¯çš„å­—æ®µ" class="headerlink" title="åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Token èº«ä»½è®¤è¯çš„å­—æ®µ"></a>åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Token èº«ä»½è®¤è¯çš„å­—æ®µ</h3><ol>
<li><p>å‡†å¤‡ï¼šåªæœ‰åœ¨ç™»å½•ä¹‹åæ‰å…è®¸è°ƒç”¨æ”¯ä»˜ç›¸å…³çš„æ¥å£ï¼Œæ‰€ä»¥å¿…é¡»ä¸ºæœ‰æƒé™çš„æ¥å£æ·»åŠ èº«ä»½è®¤è¯çš„è¯·æ±‚å¤´å­—æ®µã€‚</p>
</li>
<li><p>æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>common/request.js</code>ï¼Œæ”¹é€  $http.beforeRequest è¯·æ±‚æ‹¦æˆªå™¨ä¸­çš„ä»£ç å¦‚ä¸‹ã€‚</p>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/store&#x27;</span></span><br><span class="line"><span class="comment">// è¯·æ±‚å¼€å§‹ä¹‹å‰åšä¸€äº›äº‹æƒ…</span></span><br><span class="line">$http.beforeRequest = <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">    uni.showLoading(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ•°æ®åŠ è½½ä¸­...&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// åˆ¤æ–­è¯·æ±‚çš„æ˜¯å¦ä¸ºæœ‰æƒé™çš„ API æ¥å£</span></span><br><span class="line">    <span class="keyword">if</span> (options.url.indexOf(<span class="string">&#x27;/my/&#x27;</span>) !== -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// ä¸ºè¯·æ±‚å¤´æ·»åŠ èº«ä»½è®¤è¯å­—æ®µ</span></span><br><span class="line">        options.header = &#123;</span><br><span class="line">            <span class="comment">// å­—æ®µçš„å€¼å¯ä»¥ç›´æ¥ä» vuex ä¸­è¿›è¡Œè·å–</span></span><br><span class="line">            <span class="attr">Authorization</span>: store.state.m_user.token,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¾®ä¿¡æ”¯ä»˜çš„æµç¨‹"><a href="#å¾®ä¿¡æ”¯ä»˜çš„æµç¨‹" class="headerlink" title="å¾®ä¿¡æ”¯ä»˜çš„æµç¨‹"></a>å¾®ä¿¡æ”¯ä»˜çš„æµç¨‹</h3><ol>
<li><p>åˆ›å»ºè®¢å•ã€‚</p>
<p> â—‹ è¯·æ±‚åˆ›å»ºè®¢å•çš„ API æ¥å£ï¼šæŠŠï¼ˆè®¢å•é‡‘é¢ã€æ”¶è´§åœ°å€ã€è®¢å•ä¸­åŒ…å«çš„å•†å“ä¿¡æ¯ï¼‰å‘é€åˆ°æœåŠ¡å™¨ã€‚</p>
<p> â—‹ æœåŠ¡å™¨å“åº”çš„ç»“æœï¼š<font color=e32d40><strong>è®¢å•ç¼–å·</strong></font>ã€‚</p>
</li>
<li><p>è®¢å•é¢„æ”¯ä»˜ã€‚</p>
<p> â—‹ è¯·æ±‚è®¢å•é¢„æ”¯ä»˜çš„ API æ¥å£ï¼šæŠŠï¼ˆè®¢å•ç¼–å·ï¼‰å‘é€åˆ°æœåŠ¡å™¨ã€‚</p>
<p> â—‹ æœåŠ¡å™¨å“åº”çš„ç»“æœï¼š<font color=e32d40><strong>è®¢å•é¢„æ”¯ä»˜å¯¹è±¡</strong></font>ï¼Œé‡Œé¢åŒ…å«äº†è®¢å•æ”¯ä»˜ç›¸å…³çš„å¿…è¦å‚æ•°ã€‚</p>
</li>
<li><p>å‘èµ·å¾®ä¿¡æ”¯ä»˜ã€‚</p>
<p> â—‹ è°ƒç”¨ <code>uni.requestPayment()</code> è¿™ä¸ª APIï¼Œå¹¶ä¼ é€’è®¢å•é¢„æ”¯ä»˜å¯¹è±¡ï¼Œå‘èµ·å¾®ä¿¡æ”¯ä»˜ã€‚</p>
<p> â—‹ ç›‘å¬ <code>uni.requestPayment()</code> è¿™ä¸ª API çš„ successï¼Œfailï¼Œcomplete å›è°ƒå‡½æ•°ã€‚</p>
</li>
</ol>
<h2 id="åˆ›å»ºè®¢å•"><a href="#åˆ›å»ºè®¢å•" class="headerlink" title="åˆ›å»ºè®¢å•"></a>åˆ›å»ºè®¢å•</h2><ol>
<li>æ”¹é€  <code>my-settle.vue</code> ç»„ä»¶ä¸­çš„ settlement æ–¹æ³•ï¼Œå½“å‰ä¸‰ä¸ªåˆ¤æ–­æ¡ä»¶é€šè¿‡ä¹‹åï¼Œè°ƒç”¨å®ç°å¾®ä¿¡æ”¯ä»˜çš„æ–¹æ³•ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç‚¹å‡»äº†ç»“ç®—æŒ‰é’®</span></span><br><span class="line"><span class="function"><span class="title">settlement</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// #1 å…ˆåˆ¤æ–­æ˜¯å¦å‹¾é€‰äº†è¦ç»“ç®—çš„å•†å“</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.checkedCount) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·é€‰æ‹©è¦ç»“ç®—çš„å•†å“ï¼&#x27;</span>)</span><br><span class="line">    <span class="comment">// #2 å†åˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†æ”¶è´§åœ°å€</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.addstr) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è¯·é€‰æ‹©æ”¶è´§åœ°å€ï¼&#x27;</span>)</span><br><span class="line">    <span class="comment">// #3 æœ€ååˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•äº†</span></span><br><span class="line">    <span class="comment">// if (!this.token) return uni.$showMsg(&#x27;è¯·å…ˆç™»å½•ï¼&#x27;)</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.token) <span class="keyword">return</span> <span class="built_in">this</span>.delayNavigate()</span><br><span class="line">    <span class="comment">// #4 å®ç°å¾®ä¿¡æ”¯ä»˜åŠŸèƒ½</span></span><br><span class="line">    <span class="built_in">this</span>.payOrder()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åœ¨ <code>my-settle.vue</code> ç»„ä»¶ä¸­å®šä¹‰ payOrder æ–¹æ³•å¦‚ä¸‹ï¼Œå…ˆå®ç°åˆ›å»ºè®¢å•çš„åŠŸèƒ½ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    ...mapState(<span class="string">&#x27;m_cart&#x27;</span>, [<span class="string">&#x27;cart&#x27;</span>]),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">payOrder</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="comment">// 1.1 ç»„ç»‡è®¢å•çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> orderInfo = &#123;</span><br><span class="line">        <span class="comment">// å¼€å‘æœŸé—´ï¼Œæ³¨é‡Šæ‰çœŸå®çš„è®¢å•ä»·æ ¼</span></span><br><span class="line">        <span class="comment">// order_price: this.checkedGoodsAmount,</span></span><br><span class="line">        <span class="comment">// å†™æ­»è®¢å•æ€»ä»·ä¸º 1 åˆ†é’±</span></span><br><span class="line">        <span class="attr">order_price</span>: <span class="number">0.01</span>,</span><br><span class="line">        <span class="attr">consignee_addr</span>: <span class="built_in">this</span>.addstr,</span><br><span class="line">        <span class="attr">goods</span>: <span class="built_in">this</span>.cart.filter(<span class="function"><span class="params">x</span> =&gt;</span> x.goods_state)</span><br><span class="line">        .map(<span class="function"><span class="params">x</span> =&gt;</span> (&#123;</span><br><span class="line">            <span class="attr">goods_id</span>: x.goods_id,</span><br><span class="line">            <span class="attr">goods_number</span>: x.goods_count,</span><br><span class="line">            <span class="attr">goods_price</span>: x.goods_price</span><br><span class="line">        &#125;))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.2 å‘èµ·è¯·æ±‚åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="keyword">const</span> &#123;</span><br><span class="line">        <span class="attr">data</span>: res</span><br><span class="line">    &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/my/orders/create&#x27;</span>, orderInfo)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;åˆ›å»ºè®¢å•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.3 å¾—åˆ°æœåŠ¡å™¨å“åº”çš„â€œè®¢å•ç¼–å·â€</span></span><br><span class="line">    <span class="keyword">const</span> orderNumber = res.message.order_number</span><br><span class="line">    <span class="comment">// 2. è®¢å•é¢„æ”¯ä»˜</span></span><br><span class="line">    <span class="comment">// 3. å‘èµ·å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è®¢å•é¢„æ”¯ä»˜"><a href="#è®¢å•é¢„æ”¯ä»˜" class="headerlink" title="è®¢å•é¢„æ”¯ä»˜"></a>è®¢å•é¢„æ”¯ä»˜</h2><p>æ”¹é€  <code>my-settle.vue</code> ç»„ä»¶çš„ payOrder æ–¹æ³•ï¼Œå®ç°è®¢å•é¢„æ”¯ä»˜åŠŸèƒ½ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">payOrder</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="comment">// 1.1 ç»„ç»‡è®¢å•çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> orderInfo = &#123;</span><br><span class="line">        <span class="comment">// å¼€å‘æœŸé—´ï¼Œæ³¨é‡Šæ‰çœŸå®çš„è®¢å•ä»·æ ¼ï¼Œ</span></span><br><span class="line">        <span class="comment">// order_price: this.checkedGoodsAmount,</span></span><br><span class="line">        <span class="comment">// å†™æ­»è®¢å•æ€»ä»·ä¸º 1 åˆ†é’±</span></span><br><span class="line">        <span class="attr">order_price</span>: <span class="number">0.01</span>,</span><br><span class="line">        <span class="attr">consignee_addr</span>: <span class="built_in">this</span>.addstr,</span><br><span class="line">        <span class="attr">goods</span>: <span class="built_in">this</span>.cart.filter(<span class="function"><span class="params">x</span> =&gt;</span> x.goods_state).map(<span class="function"><span class="params">x</span> =&gt;</span> (</span><br><span class="line">            &#123; <span class="attr">goods_id</span>: x.goods_id, <span class="attr">goods_number</span>: x.goods_count, <span class="attr">goods_price</span>: x.goods_price &#125;</span><br><span class="line">        ))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.2 å‘èµ·è¯·æ±‚åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/my/orders/create&#x27;</span>, orderInfo)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;åˆ›å»ºè®¢å•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.3 å¾—åˆ°æœåŠ¡å™¨å“åº”çš„â€œè®¢å•ç¼–å·â€</span></span><br><span class="line">    <span class="keyword">const</span> orderNumber = res.message.order_number</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è®¢å•é¢„æ”¯ä»˜</span></span><br><span class="line">    <span class="comment">// 2.1 å‘èµ·è¯·æ±‚è·å–è®¢å•çš„æ”¯ä»˜ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res2 &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/my/orders/req_unifiedorder&#x27;</span>, &#123; <span class="attr">order_number</span>: orderNumber &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.2 é¢„ä»˜è®¢å•ç”Ÿæˆå¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (res2.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;é¢„ä»˜è®¢å•ç”Ÿæˆå¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.3 å¾—åˆ°è®¢å•æ”¯ä»˜ç›¸å…³çš„å¿…è¦å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> payInfo = res2.message.pay</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å‘èµ·å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å‘èµ·å¾®ä¿¡æ”¯ä»˜"><a href="#å‘èµ·å¾®ä¿¡æ”¯ä»˜" class="headerlink" title="å‘èµ·å¾®ä¿¡æ”¯ä»˜"></a>å‘èµ·å¾®ä¿¡æ”¯ä»˜</h2><ol>
<li>æ”¹é€  my-settle ç»„ä»¶çš„ payOrder æ–¹æ³•ï¼Œå®ç°å¾®ä¿¡æ”¯ä»˜çš„åŠŸèƒ½ã€‚</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">payOrder</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="comment">// 1.1 ç»„ç»‡è®¢å•çš„ä¿¡æ¯å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> orderInfo = &#123;</span><br><span class="line">        <span class="comment">// å¼€å‘æœŸé—´ï¼Œæ³¨é‡Šæ‰çœŸå®çš„è®¢å•ä»·æ ¼ï¼Œ</span></span><br><span class="line">        <span class="comment">// order_price: this.checkedGoodsAmount,</span></span><br><span class="line">        <span class="comment">// å†™æ­»è®¢å•æ€»ä»·ä¸º 1 åˆ†é’±</span></span><br><span class="line">        <span class="attr">order_price</span>: <span class="number">0.01</span>,</span><br><span class="line">        <span class="attr">consignee_addr</span>: <span class="built_in">this</span>.addstr,</span><br><span class="line">        <span class="attr">goods</span>: <span class="built_in">this</span>.cart.filter(<span class="function"><span class="params">x</span> =&gt;</span> x.goods_state).map(<span class="function"><span class="params">x</span> =&gt;</span> (</span><br><span class="line">            &#123; <span class="attr">goods_id</span>: x.goods_id, <span class="attr">goods_number</span>: x.goods_count, <span class="attr">goods_price</span>: x.goods_price &#125;</span><br><span class="line">        ))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 1.2 å‘èµ·è¯·æ±‚åˆ›å»ºè®¢å•</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/orders/create&#x27;</span>, orderInfo)</span><br><span class="line">    <span class="keyword">if</span> (res.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;åˆ›å»ºè®¢å•å¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.3 å¾—åˆ°æœåŠ¡å™¨å“åº”çš„â€œè®¢å•ç¼–å·â€</span></span><br><span class="line">    <span class="keyword">const</span> orderNumber = res.message.order_number</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. è®¢å•é¢„æ”¯ä»˜</span></span><br><span class="line">    <span class="comment">// 2.1 å‘èµ·è¯·æ±‚è·å–è®¢å•çš„æ”¯ä»˜ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res2 &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/my/orders/req_unifiedorder&#x27;</span>, &#123; <span class="attr">order_number</span>: orderNumber &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.2 é¢„ä»˜è®¢å•ç”Ÿæˆå¤±è´¥</span></span><br><span class="line">    <span class="keyword">if</span> (res2.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;é¢„ä»˜è®¢å•ç”Ÿæˆå¤±è´¥ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.3 å¾—åˆ°è®¢å•æ”¯ä»˜ç›¸å…³çš„å¿…è¦å‚æ•°</span></span><br><span class="line">    <span class="keyword">const</span> payInfo = res2.message.pay</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. å‘èµ·å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line">    <span class="comment">// 3.1 è°ƒç”¨ uni.requestPayment() å‘èµ·å¾®ä¿¡æ”¯ä»˜</span></span><br><span class="line">    <span class="keyword">const</span> [err, succ] = <span class="keyword">await</span> uni.requestPayment(payInfo)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.2 æœªå®Œæˆæ”¯ä»˜</span></span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è®¢å•æœªæ”¯ä»˜ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.3 å®Œæˆäº†æ”¯ä»˜ï¼Œè¿›ä¸€æ­¥æŸ¥è¯¢æ”¯ä»˜çš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">const</span> &#123; <span class="attr">data</span>: res3 &#125; = <span class="keyword">await</span> uni.$http.post(<span class="string">&#x27;/my/orders/chkOrder&#x27;</span>, &#123; <span class="attr">order_number</span>: orderNumber &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.4 æ£€æµ‹åˆ°è®¢å•æœªæ”¯ä»˜</span></span><br><span class="line">    <span class="keyword">if</span> (res3.meta.status !== <span class="number">200</span>) <span class="keyword">return</span> uni.$showMsg(<span class="string">&#x27;è®¢å•æœªæ”¯ä»˜ï¼&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.5 æ£€æµ‹åˆ°è®¢å•æ”¯ä»˜å®Œæˆ</span></span><br><span class="line">    uni.showToast(&#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;æ”¯ä»˜å®Œæˆï¼&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å°ç¨‹åº<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">ç™»å½•</a>ã€ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ¥å£è°ƒæ•´<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/develop/doc/000cacfa20ce88df04cb468bc52801?blockType=1">è¯´æ˜</a>ã€<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/wQQBi9jrszjOYZa0tRU8Sw">å¾®ä¿¡ç”Ÿæ€å†…çš„è´¦æˆ·ä½“ç³»</a>ã€‚</li>
</ol>
<h1 id="å‘å¸ƒå°ç¨‹åº"><a href="#å‘å¸ƒå°ç¨‹åº" class="headerlink" title="å‘å¸ƒå°ç¨‹åº"></a>å‘å¸ƒå°ç¨‹åº</h1><p>ç‚¹å‡» HBuilderX èœå•æ ä¸Šçš„ å‘è¡Œ -&gt; å°ç¨‹åº -&gt; å¾®ä¿¡ï¼ˆä»…é€‚ç”¨äº uni-appï¼‰ã€‚</p>
<img src="/resource/images/11-1.9cdf19c7.png"/>

<p>åœ¨å¼¹å‡ºæ¡†ä¸­å¡«å†™è¦å‘å¸ƒçš„å°ç¨‹åºçš„åç§°å’Œ AppId ä¹‹åï¼Œç‚¹å‡»å‘è¡ŒæŒ‰é’®ã€‚</p>
<img src="/resource/images/image (18).png"/>

<p>åœ¨ HBuilderX çš„æ§åˆ¶å°ä¸­æŸ¥çœ‹å°ç¨‹åºå‘å¸ƒç¼–è¯‘çš„è¿›åº¦ã€‚</p>
<img src="/resource/images/11-3.567c1979.png"/>

<p>å‘å¸ƒç¼–è¯‘å®Œæˆä¹‹åï¼Œä¼šè‡ªåŠ¨æ‰“å¼€ä¸€ä¸ªæ–°çš„å¾®ä¿¡å¼€å‘è€…å·¥å…·ç•Œé¢ï¼Œæ­¤æ—¶ï¼Œç‚¹å‡»å·¥å…·æ ä¸Šçš„ä¸Šä¼ æŒ‰é’®ã€‚</p>
<img src="/resource/images/11-4.9c24f0ee.png"/>

<p>å¡«å†™ç‰ˆæœ¬å·å’Œé¡¹ç›®å¤‡æ³¨ä¹‹åï¼Œç‚¹å‡»ä¸Šä¼ æŒ‰é’®ã€‚</p>
<img src="/resource/images/image (19).png"/>

<p>ä¸Šä¼ å®Œæˆä¹‹åï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„æç¤ºæ¶ˆæ¯ï¼Œç›´æ¥ç‚¹å‡»ç¡®å®šæŒ‰é’®å³å¯ã€‚</p>
<img src="/resource/images/11-6.d5c408c3.png"/>

<p>é€šè¿‡å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸Šä¼ çš„ä»£ç ï¼Œé»˜è®¤å¤„äºç‰ˆæœ¬ç®¡ç†çš„å¼€å‘ç‰ˆæœ¬åˆ—è¡¨ä¸­ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<img src="/resource/images/11-7.ec9045bc.png"/>

<p>å°† å¼€å‘ç‰ˆæœ¬æäº¤å®¡æ ¸ -&gt; å†å°† å®¡æ ¸é€šè¿‡çš„ç‰ˆæœ¬å‘å¸ƒä¸Šçº¿ï¼Œå³å¯å®ç°å°ç¨‹åºçš„å‘å¸ƒå’Œä¸Šçº¿ã€‚</p>
<img src="/resource/images/11-8.a251f8b8.png"/>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/02/21/xcx-course03/" rel="prev" title="03_å°ç¨‹åºäº«+é¡¹ç›®">
      <i class="fa fa-chevron-left"></i> 03_å°ç¨‹åºäº«+é¡¹ç›®
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/03/23/rz-base-new-course01/" rel="next" title="01_äººèµ„åå°">
      01_äººèµ„åå° <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E7%9B%AE%E6%A0%87"><span class="nav-number">1.</span> <span class="nav-text">é¡¹ç›®ç›®æ ‡</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0"><span class="nav-number">2.</span> <span class="nav-text">é¡¹ç›®æ¦‚è¿°</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0-1"><span class="nav-number">2.1.</span> <span class="nav-text">é¡¹ç›®æ¦‚è¿°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%A7%88"><span class="nav-number">2.2.</span> <span class="nav-text">é¡¹ç›®æ¦‚è§ˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="nav-number">2.2.1.</span> <span class="nav-text">æŠ€æœ¯æ ˆ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E8%B5%B7%E6%AD%A5"><span class="nav-number">3.</span> <span class="nav-text">é¡¹ç›®èµ·æ­¥</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#uni-app-%E7%AE%80%E4%BB%8B"><span class="nav-number">3.1.</span> <span class="nav-text">uni-app ç®€ä»‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E4%B8%8B%E8%BD%BD"><span class="nav-number">3.2.</span> <span class="nav-text">å¼€å‘å·¥å…·ä¸‹è½½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD-HBuilder"><span class="nav-number">3.3.</span> <span class="nav-text">ä¸‹è½½ HBuilder</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-HBuilder"><span class="nav-number">3.4.</span> <span class="nav-text">å®‰è£… HBuilder</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="nav-number">3.5.</span> <span class="nav-text">å¼€å‘è€…å·¥å…·çš„é…ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Sass"><span class="nav-number">3.5.1.</span> <span class="nav-text">å®‰è£… Sass</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%96%B9%E6%A1%88%E5%88%87%E6%8D%A2"><span class="nav-number">3.5.2.</span> <span class="nav-text">å¿«æ·é”®æ–¹æ¡ˆåˆ‡æ¢</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%BC%96%E8%BE%91%E5%99%A8%E8%AE%BE%E7%BD%AE"><span class="nav-number">3.5.3.</span> <span class="nav-text">ä¿®æ”¹ç¼–è¾‘å™¨è®¾ç½®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E5%BB%BA-uni-app-%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.6.</span> <span class="nav-text">æ–°å»º uni-app é¡¹ç›®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.6.1.</span> <span class="nav-text">åˆ›å»ºé¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A1%AB%E5%86%99%E4%BF%A1%E6%81%AF"><span class="nav-number">3.6.2.</span> <span class="nav-text">å¡«å†™ä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%88%90%E5%8A%9F"><span class="nav-number">3.6.3.</span> <span class="nav-text">åˆ›å»ºæˆåŠŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uni-app-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="nav-number">3.7.</span> <span class="nav-text">uni-app ç›®å½•ç»“æ„</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E5%B7%A5%E5%85%B7%E9%A2%84%E8%A7%88%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.8.</span> <span class="nav-text">å¾®ä¿¡å·¥å…·é¢„è§ˆé¡¹ç›®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A1%AB%E5%86%99-AppID"><span class="nav-number">3.8.1.</span> <span class="nav-text">å¡«å†™ AppID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%B7%A5%E5%85%B7%E8%B7%AF%E5%BE%84"><span class="nav-number">3.8.2.</span> <span class="nav-text">é…ç½®å·¥å…·è·¯å¾„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3"><span class="nav-number">3.8.3.</span> <span class="nav-text">å¼€å¯æœåŠ¡ç«¯å£</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E9%A2%84%E8%A7%88%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.8.4.</span> <span class="nav-text">å¯åŠ¨é¢„è§ˆé¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F%E6%95%88%E6%9E%9C"><span class="nav-number">3.8.5.</span> <span class="nav-text">è¿è¡ŒæˆåŠŸæ•ˆæœ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-Git-%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.9.</span> <span class="nav-text">ä½¿ç”¨ Git ç®¡ç†é¡¹ç›®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-gitignore"><span class="nav-number">3.9.1.</span> <span class="nav-text">åˆ›å»º .gitignore</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9C%AC%E5%9C%B0-Git-%E4%BB%93%E5%BA%93"><span class="nav-number">3.9.2.</span> <span class="nav-text">åˆå§‹åŒ–æœ¬åœ° Git ä»“åº“</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%88%B0%E6%9A%82%E5%AD%98%E5%8C%BA"><span class="nav-number">3.9.3.</span> <span class="nav-text">æ·»åŠ åˆ°æš‚å­˜åŒº</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E6%8F%90%E4%BA%A4%E9%A1%B9%E7%9B%AE"><span class="nav-number">3.9.4.</span> <span class="nav-text">æœ¬åœ°æäº¤é¡¹ç›®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%89%98%E7%AE%A1%E7%A0%81%E4%BA%91"><span class="nav-number">3.9.5.</span> <span class="nav-text">é¡¹ç›®æ‰˜ç®¡ç äº‘</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TabBar"><span class="nav-number">4.</span> <span class="nav-text">TabBar</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA-TabBar-%E5%AF%B9%E5%BA%94%E9%A1%B5%E9%9D%A2"><span class="nav-number">4.1.</span> <span class="nav-text">åˆ›å»º TabBar å¯¹åº”é¡µé¢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E7%9A%84-index-%E9%A6%96%E9%A1%B5"><span class="nav-number">4.2.</span> <span class="nav-text">åˆ é™¤é»˜è®¤çš„ index é¦–é¡µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-TabBar-%E5%AF%B9%E5%BA%94%E4%BF%A1%E6%81%AF"><span class="nav-number">4.3.</span> <span class="nav-text">é…ç½® TabBar å¯¹åº”ä¿¡æ¯</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%BC%E8%88%AA%E6%9D%A1%E7%9A%84%E6%A0%B7%E5%BC%8F%E6%95%88%E6%9E%9C"><span class="nav-number">4.4.</span> <span class="nav-text">ä¿®æ”¹å¯¼èˆªæ¡çš„æ ·å¼æ•ˆæœ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E9%A6%96%E9%A1%B5"><span class="nav-number">5.</span> <span class="nav-text">é¡¹ç›®é¦–é¡µ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="nav-number">5.1.</span> <span class="nav-text">é…ç½®ç½‘ç»œè¯·æ±‚</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A6%96%E9%A1%B5%E8%BD%AE%E6%92%AD%E5%8C%BA%E5%9F%9F"><span class="nav-number">5.2.</span> <span class="nav-text">é¦–é¡µè½®æ’­åŒºåŸŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">5.2.1.</span> <span class="nav-text">è¯·æ±‚è½®æ’­å›¾çš„æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">5.2.2.</span> <span class="nav-text">æ¸²æŸ“è½®æ’­å›¾çš„ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%88%86%E5%8C%85"><span class="nav-number">5.2.3.</span> <span class="nav-text">é…ç½®å°ç¨‹åºçš„åˆ†åŒ…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E8%BD%AE%E6%92%AD%E8%B7%B3%E8%BD%AC%E8%AF%A6%E6%83%85"><span class="nav-number">5.2.4.</span> <span class="nav-text">ç‚¹å‡»è½®æ’­è·³è½¬è¯¦æƒ…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%81%E8%A3%85-uni-showMsg"><span class="nav-number">5.2.5.</span> <span class="nav-text">å°è£… uni.$showMsg()</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E5%AF%BC%E8%88%AA%E5%8C%BA%E5%9F%9F"><span class="nav-number">5.3.</span> <span class="nav-text">åˆ†ç±»å¯¼èˆªåŒºåŸŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%88%86%E7%B1%BB%E5%AF%BC%E8%88%AA%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">5.3.1.</span> <span class="nav-text">è·å–åˆ†ç±»å¯¼èˆªçš„æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%88%86%E7%B1%BB%E5%AF%BC%E8%88%AA%E7%9A%84%E7%BB%93%E6%9E%84"><span class="nav-number">5.3.2.</span> <span class="nav-text">æ¸²æŸ“åˆ†ç±»å¯¼èˆªçš„ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E7%AC%AC%E4%B8%80%E9%A1%B9%E5%88%B0%E5%88%86%E7%B1%BB%E9%A1%B5"><span class="nav-number">5.3.3.</span> <span class="nav-text">ç‚¹å‡»ç¬¬ä¸€é¡¹åˆ°åˆ†ç±»é¡µ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A6%96%E9%A1%B5%E6%A5%BC%E5%B1%82%E5%8C%BA%E5%9F%9F"><span class="nav-number">5.4.</span> <span class="nav-text">é¦–é¡µæ¥¼å±‚åŒºåŸŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%A5%BC%E5%B1%82%E6%95%B0%E6%8D%AE"><span class="nav-number">5.4.1.</span> <span class="nav-text">è·å–æ¥¼å±‚æ•°æ®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E6%A5%BC%E5%B1%82%E6%A0%87%E9%A2%98"><span class="nav-number">5.4.2.</span> <span class="nav-text">æ¸²æŸ“æ¥¼å±‚æ ‡é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E6%A5%BC%E5%B1%82%E5%86%85%E5%AE%B9"><span class="nav-number">5.4.3.</span> <span class="nav-text">æ¸²æŸ“æ¥¼å±‚å†…å®¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E6%A5%BC%E5%B1%82%E8%B7%B3%E8%BD%AC"><span class="nav-number">5.4.4.</span> <span class="nav-text">ç‚¹å‡»æ¥¼å±‚è·³è½¬</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%88%86%E7%B1%BB%E9%A1%B5%E9%9D%A2"><span class="nav-number">6.</span> <span class="nav-text">åˆ†ç±»é¡µé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E5%92%8C%E6%A0%B7%E5%BC%8F"><span class="nav-number">6.1.</span> <span class="nav-text">åŸºæœ¬ç»“æ„å’Œæ ·å¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%88%86%E7%B1%BB%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-number">6.2.</span> <span class="nav-text">è·å–åˆ†ç±»çš„æ•°æ®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A6%E4%BE%A7%E7%9A%84%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB"><span class="nav-number">6.3.</span> <span class="nav-text">å·¦ä¾§çš„ä¸€çº§åˆ†ç±»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB%E7%9A%84%E6%A0%87%E9%A2%98"><span class="nav-number">6.4.</span> <span class="nav-text">äºŒçº§åˆ†ç±»çš„æ ‡é¢˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB%E7%9A%84%E5%86%85%E5%AE%B9"><span class="nav-number">6.5.</span> <span class="nav-text">äºŒçº§åˆ†ç±»çš„å†…å®¹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E7%BD%AE%E6%BB%9A%E5%8A%A8%E6%9D%A1%E4%BD%8D%E7%BD%AE"><span class="nav-number">6.6.</span> <span class="nav-text">é‡ç½®æ»šåŠ¨æ¡ä½ç½®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%B3%E8%BD%AC%E5%88%B0%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8"><span class="nav-number">6.7.</span> <span class="nav-text">è·³è½¬åˆ°å•†å“åˆ—è¡¨</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD"><span class="nav-number">7.</span> <span class="nav-text">æœç´¢åŠŸèƒ½</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%84%E4%BB%B6"><span class="nav-number">7.1.</span> <span class="nav-text">æœç´¢ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89-my-search-%E7%BB%84%E4%BB%B6"><span class="nav-number">7.1.1.</span> <span class="nav-text">è‡ªå®šä¹‰ my-search ç»„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E4%BC%A0%E5%80%BC%E5%A2%9E%E5%BC%BA%E7%BB%84%E4%BB%B6%E9%80%9A%E7%94%A8%E6%80%A7"><span class="nav-number">7.1.2.</span> <span class="nav-text">é€šè¿‡ä¼ å€¼å¢å¼ºç»„ä»¶é€šç”¨æ€§</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%AF%E6%8C%81%E5%A4%96%E7%95%8C-click-%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="nav-number">7.1.3.</span> <span class="nav-text">æ”¯æŒå¤–ç•Œ click ç‚¹å‡»äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E9%A6%96%E9%A1%B5%E6%90%9C%E7%B4%A2%E7%9A%84%E5%90%B8%E9%A1%B6%E6%95%88%E6%9E%9C"><span class="nav-number">7.1.4.</span> <span class="nav-text">å®ç°é¦–é¡µæœç´¢çš„å¸é¡¶æ•ˆæœ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="nav-number">7.2.</span> <span class="nav-text">æœç´¢å»ºè®®</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="nav-number">7.2.1.</span> <span class="nav-text">æ¸²æŸ“æœç´¢é¡µé¢çš„åŸºæœ¬ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E6%A1%86%E8%87%AA%E5%8A%A8%E8%8E%B7%E5%8F%96%E7%84%A6%E7%82%B9"><span class="nav-number">7.2.2.</span> <span class="nav-text">å®ç°æœç´¢æ¡†è‡ªåŠ¨è·å–ç„¦ç‚¹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E8%BE%93%E5%85%A5%E5%86%85%E5%AE%B9%E7%9A%84%E9%98%B2%E6%8A%96%E5%A4%84%E7%90%86"><span class="nav-number">7.2.3.</span> <span class="nav-text">å®ç°è¾“å…¥å†…å®¹çš„é˜²æŠ–å¤„ç†</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E5%85%B3%E9%94%AE%E8%AF%8D%E6%9F%A5%E8%AF%A2%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="nav-number">7.2.4.</span> <span class="nav-text">æ ¹æ®å…³é”®è¯æŸ¥è¯¢æœç´¢å»ºè®®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%90%8E%E7%AB%AF%E8%BF%94%E5%9B%9E%E7%9A%84%E6%90%9C%E7%B4%A2%E5%BB%BA%E8%AE%AE"><span class="nav-number">7.2.5.</span> <span class="nav-text">æ¸²æŸ“åç«¯è¿”å›çš„æœç´¢å»ºè®®</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2"><span class="nav-number">7.3.</span> <span class="nav-text">æœç´¢å†å²</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="nav-number">7.3.1.</span> <span class="nav-text">åŸºæœ¬ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E9%9C%80%E5%B1%95%E7%A4%BA"><span class="nav-number">7.3.2.</span> <span class="nav-text">æŒ‰éœ€å±•ç¤º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%B0%E5%BD%95%E5%85%B3%E9%94%AE%E8%AF%8D"><span class="nav-number">7.3.3.</span> <span class="nav-text">è®°å½•å…³é”®è¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E5%85%B3%E9%94%AE%E8%AF%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-number">7.3.4.</span> <span class="nav-text">è§£å†³å…³é”®è¯é‡å¤çš„é—®é¢˜</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E6%8C%81%E4%B9%85%E5%8C%96"><span class="nav-number">7.3.5.</span> <span class="nav-text">å°†æœç´¢å†å²è®°å½•æŒä¹…åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%85%E7%A9%BA%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="nav-number">7.3.6.</span> <span class="nav-text">æ¸…ç©ºæœç´¢å†å²è®°å½•åŠŸèƒ½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E5%8E%86%E5%8F%B2%E8%B7%B3%E8%BD%AC%E5%88%B0%E5%88%97%E8%A1%A8%E9%A1%B5"><span class="nav-number">7.3.7.</span> <span class="nav-text">ç‚¹å‡»å†å²è·³è½¬åˆ°åˆ—è¡¨é¡µ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8"><span class="nav-number">8.</span> <span class="nav-text">å•†å“åˆ—è¡¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E6%80%BB%E7%BB%93"><span class="nav-number">8.1.</span> <span class="nav-text">éœ€æ±‚åˆ†ææ€»ç»“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E5%89%8D%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">8.2.</span> <span class="nav-text">å¼€å‘å‰å‡†å¤‡å·¥ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%88%97%E8%A1%A8%E9%A1%B5%E7%9A%84%E7%BC%96%E8%AF%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">8.2.1.</span> <span class="nav-text">è®¾ç½®åˆ—è¡¨é¡µçš„ç¼–è¯‘æ¨¡å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E6%95%B4%E4%BD%93%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90%E6%90%AD%E5%BB%BA"><span class="nav-number">8.2.2.</span> <span class="nav-text">é¡µé¢æ•´ä½“ç»“æ„åˆ†ææ­å»º</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%AF%B9%E8%B1%A1"><span class="nav-number">8.3.</span> <span class="nav-text">å®šä¹‰è¯·æ±‚å‚æ•°å¯¹è±¡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="nav-number">8.4.</span> <span class="nav-text">è·å–å•†å“åˆ—è¡¨æ•°æ®</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="nav-number">8.5.</span> <span class="nav-text">æ¸²æŸ“å•†å“åˆ—è¡¨ç»“æ„</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%81%E8%A3%85%E5%95%86%E5%93%81-item-%E7%BB%84%E4%BB%B6"><span class="nav-number">8.6.</span> <span class="nav-text">å°è£…å•†å“ item ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%BF%87%E6%BB%A4%E5%99%A8%E5%A4%84%E7%90%86%E4%BB%B7%E6%A0%BC"><span class="nav-number">8.7.</span> <span class="nav-text">ä½¿ç”¨è¿‡æ»¤å™¨å¤„ç†ä»·æ ¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%95%88%E6%9E%9C"><span class="nav-number">8.8.</span> <span class="nav-text">ä¸Šæ‹‰åŠ è½½æ›´å¤šçš„æ•ˆæœ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E6%AD%A5%E5%AE%9E%E7%8E%B0%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A"><span class="nav-number">8.8.1.</span> <span class="nav-text">åˆæ­¥å®ç°ä¸Šæ‹‰åŠ è½½æ›´å¤š</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%8A%82%E6%B5%81%E9%98%80%E6%8E%A7%E5%88%B6%E8%AF%B7%E6%B1%82"><span class="nav-number">8.8.2.</span> <span class="nav-text">é€šè¿‡èŠ‚æµé˜€æ§åˆ¶è¯·æ±‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E6%98%AF%E5%90%A6%E5%8A%A0%E8%BD%BD%E5%AE%8C%E6%AF%95"><span class="nav-number">8.8.3.</span> <span class="nav-text">åˆ¤æ–­æ•°æ®æ˜¯å¦åŠ è½½å®Œæ¯•</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E7%9A%84%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0"><span class="nav-number">8.9.</span> <span class="nav-text">å•†å“åˆ—è¡¨çš„ä¸‹æ‹‰åˆ·æ–°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E5%88%97%E8%A1%A8%E9%A1%B9%E8%B7%B3%E8%BD%AC%E8%AF%A6%E6%83%85"><span class="nav-number">8.10.</span> <span class="nav-text">ç‚¹å‡»åˆ—è¡¨é¡¹è·³è½¬è¯¦æƒ…</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85"><span class="nav-number">9.</span> <span class="nav-text">å•†å“è¯¦æƒ…</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%95%86%E5%93%81%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="nav-number">9.1.</span> <span class="nav-text">å•†å“éœ€æ±‚åˆ†æ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">9.2.</span> <span class="nav-text">å¼€å‘å‡†å¤‡å·¥ä½œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85"><span class="nav-number">9.3.</span> <span class="nav-text">è·å–å•†å“è¯¦æƒ…</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85"><span class="nav-number">9.4.</span> <span class="nav-text">æ¸²æŸ“å•†å“è¯¦æƒ…</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E8%BD%AE%E6%92%AD%E5%9B%BE%E5%8C%BA%E5%9F%9F"><span class="nav-number">9.4.1.</span> <span class="nav-text">æ¸²æŸ“è½®æ’­å›¾åŒºåŸŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E8%BD%AE%E6%92%AD%E5%9B%BE%E9%A2%84%E8%A7%88"><span class="nav-number">9.4.2.</span> <span class="nav-text">å®ç°è½®æ’­å›¾é¢„è§ˆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E5%93%81%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="nav-number">9.4.3.</span> <span class="nav-text">æ¸²æŸ“å•†å“çš„ä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E5%93%81%E7%9A%84%E8%AF%A6%E6%83%85"><span class="nav-number">9.4.4.</span> <span class="nav-text">æ¸²æŸ“å•†å“çš„è¯¦æƒ…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E5%86%B3%E4%BB%B7%E6%A0%BC%E7%9A%84%E9%97%AA%E7%83%81"><span class="nav-number">9.4.5.</span> <span class="nav-text">è§£å†³ä»·æ ¼çš„é—ªçƒ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E5%93%81%E5%AF%BC%E8%88%AA"><span class="nav-number">9.5.</span> <span class="nav-text">æ¸²æŸ“å•†å“å¯¼èˆª</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%86%E5%A4%87-UI-%E7%BB%93%E6%9E%84"><span class="nav-number">9.5.1.</span> <span class="nav-text">å‡†å¤‡ UI ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%B3%E8%BD%AC%E5%88%B0%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="nav-number">9.5.2.</span> <span class="nav-text">è·³è½¬åˆ°è´­ç‰©è½¦</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6"><span class="nav-number">10.</span> <span class="nav-text">åŠ å…¥è´­ç‰©è½¦</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-Vuex"><span class="nav-number">10.1.</span> <span class="nav-text">é…ç½® Vuex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97"><span class="nav-number">10.2.</span> <span class="nav-text">åˆ›å»ºè´­ç‰©è½¦æ¨¡å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97"><span class="nav-number">10.3.</span> <span class="nav-text">ä½¿ç”¨è´­ç‰©è½¦æ¨¡å—</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8A%9F%E8%83%BD"><span class="nav-number">10.4.</span> <span class="nav-text">åŠ å…¥è´­ç‰©è½¦åŠŸèƒ½</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%AD%E6%80%BB%E6%95%B0%E9%87%8F"><span class="nav-number">10.5.</span> <span class="nav-text">è´­ç‰©è½¦ä¸­æ€»æ•°é‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%AD%E5%95%86%E5%93%81"><span class="nav-number">10.6.</span> <span class="nav-text">æŒä¹…åŒ–å­˜å‚¨è´­ç‰©è½¦ä¸­å•†å“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E4%B8%BA-TabBar-%E8%AE%BE%E7%BD%AE%E5%BE%BD%E6%A0%87"><span class="nav-number">10.7.</span> <span class="nav-text">åŠ¨æ€ä¸º TabBar è®¾ç½®å¾½æ ‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%98%E5%8C%96%E4%B8%8A%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="nav-number">10.8.</span> <span class="nav-text">ä¼˜åŒ–ä¸Šé¢çš„ä»£ç </span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E9%A1%B5%E9%9D%A2"><span class="nav-number">11.</span> <span class="nav-text">è´­ç‰©è½¦é¡µé¢</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E6%80%BB%E7%BB%93-1"><span class="nav-number">11.1.</span> <span class="nav-text">éœ€æ±‚åˆ†ææ€»ç»“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-1"><span class="nav-number">11.2.</span> <span class="nav-text">å¼€å‘å‡†å¤‡å·¥ä½œ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%B6%E8%B4%A7%E5%9C%B0%E5%9D%80%E7%BB%84%E4%BB%B6"><span class="nav-number">11.3.</span> <span class="nav-text">æ”¶è´§åœ°å€ç»„ä»¶</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E6%94%B6%E8%B4%A7%E5%9C%B0%E5%9D%80"><span class="nav-number">11.4.</span> <span class="nav-text">è·å–æ”¶è´§åœ°å€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%98%E5%82%A8-address-%E5%88%B0-Vuex"><span class="nav-number">11.5.</span> <span class="nav-text">å­˜å‚¨ address åˆ° Vuex</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86-address-%E4%BF%A1%E6%81%AF%E5%AD%98%E5%82%A8%E5%88%B0-vuex-%E4%B8%AD"><span class="nav-number">11.5.1.</span> <span class="nav-text">å°† address ä¿¡æ¯å­˜å‚¨åˆ° vuex ä¸­</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86-Store-%E4%B8%AD%E7%9A%84-address-%E6%8C%81%E4%B9%85%E5%8C%96%E5%AD%98%E5%82%A8%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="nav-number">11.5.2.</span> <span class="nav-text">å°† Store ä¸­çš„ address æŒä¹…åŒ–å­˜å‚¨åˆ°æœ¬åœ°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B0%86-addstr-%E6%8A%BD%E7%A6%BB%E4%B8%BA-getters"><span class="nav-number">11.5.3.</span> <span class="nav-text">å°† addstr æŠ½ç¦»ä¸º getters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E9%80%89%E6%8B%A9%E6%94%B6%E8%B4%A7%E5%9C%B0%E5%9D%80"><span class="nav-number">11.5.4.</span> <span class="nav-text">é‡æ–°é€‰æ‹©æ”¶è´§åœ°å€</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%88%97%E8%A1%A8%E5%8C%BA%E5%9F%9F"><span class="nav-number">11.6.</span> <span class="nav-text">è´­ç‰©è½¦åˆ—è¡¨åŒºåŸŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E7%9A%84%E6%A0%87%E9%A2%98%E5%8C%BA%E5%9F%9F"><span class="nav-number">11.6.1.</span> <span class="nav-text">æ¸²æŸ“è´­ç‰©è½¦å•†å“åˆ—è¡¨çš„æ ‡é¢˜åŒºåŸŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E5%95%86%E5%93%81%E5%88%97%E8%A1%A8%E5%8C%BA%E5%9F%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="nav-number">11.6.2.</span> <span class="nav-text">æ¸²æŸ“å•†å“åˆ—è¡¨åŒºåŸŸçš„åŸºæœ¬ç»“æ„</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA-my-goods-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-radio-%E5%8B%BE%E9%80%89%E7%8A%B6%E6%80%81"><span class="nav-number">11.6.3.</span> <span class="nav-text">ä¸º my-goods ç»„ä»¶å°è£… radio å‹¾é€‰çŠ¶æ€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87-props-%E5%B1%9E%E6%80%A7%E6%8E%A7%E5%88%B6-radio-%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="nav-number">11.6.4.</span> <span class="nav-text">é€šè¿‡ props å±æ€§æ§åˆ¶ radio çš„æ˜¾ç¤º</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A-radio-%E7%BB%84%E4%BB%B6%E7%9A%84%E5%80%BC"><span class="nav-number">11.6.5.</span> <span class="nav-text">åŠ¨æ€ç»‘å®š radio ç»„ä»¶çš„å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA-my-goods-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-radio-change-%E4%BA%8B%E4%BB%B6"><span class="nav-number">11.6.6.</span> <span class="nav-text">ä¸º my-goods è‡ªå®šä¹‰ç»„ä»¶å°è£… radio-change äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%AD%E5%95%86%E5%93%81%E7%9A%84%E5%8B%BE%E9%80%89%E7%8A%B6%E6%80%81"><span class="nav-number">11.6.7.</span> <span class="nav-text">ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„å‹¾é€‰çŠ¶æ€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA-my-goods-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-NumberBox"><span class="nav-number">11.6.8.</span> <span class="nav-text">ä¸º my-goods ç»„ä»¶å°è£… NumberBox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA-my-goods-%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85-num-change-%E4%BA%8B%E4%BB%B6"><span class="nav-number">11.6.9.</span> <span class="nav-text">ä¸º my-goods ç»„ä»¶å°è£… num-change äº‹ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%AD%E5%95%86%E5%93%81%E7%9A%84%E6%95%B0%E9%87%8F"><span class="nav-number">11.6.10.</span> <span class="nav-text">ä¿®æ”¹è´­ç‰©è½¦ä¸­å•†å“çš„æ•°é‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E8%AE%A1%E7%AE%97%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%BE%BD%E6%A0%87%E7%9A%84%E6%95%B0%E5%80%BC"><span class="nav-number">11.6.11.</span> <span class="nav-text">åŠ¨æ€è®¡ç®—è´­ç‰©è½¦å¾½æ ‡çš„æ•°å€¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E6%BB%91%E5%8A%A8%E5%88%A0%E9%99%A4%E7%9A%84-UI-%E6%95%88%E6%9E%9C"><span class="nav-number">11.6.12.</span> <span class="nav-text">æ¸²æŸ“æ»‘åŠ¨åˆ é™¤çš„ UI æ•ˆæœ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%BB%91%E5%8A%A8%E5%88%A0%E9%99%A4%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="nav-number">11.6.13.</span> <span class="nav-text">å®ç°æ»‘åŠ¨åˆ é™¤çš„åŠŸèƒ½</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E7%AE%97%E5%8C%BA%E5%9F%9F"><span class="nav-number">11.7.</span> <span class="nav-text">ç»“ç®—åŒºåŸŸ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%8A%E7%BB%93%E7%AE%97%E5%8C%BA%E5%9F%9F%E5%B0%81%E8%A3%85%E4%B8%BA%E7%BB%84%E4%BB%B6"><span class="nav-number">11.7.1.</span> <span class="nav-text">æŠŠç»“ç®—åŒºåŸŸå°è£…ä¸ºç»„ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E7%BB%93%E7%AE%97%E5%8C%BA%E5%9F%9F%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E6%A0%B7%E5%BC%8F"><span class="nav-number">11.7.2.</span> <span class="nav-text">æ¸²æŸ“ç»“ç®—åŒºåŸŸçš„ç»“æ„å’Œæ ·å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%E5%B7%B2%E5%8B%BE%E9%80%89%E5%95%86%E5%93%81%E7%9A%84%E6%80%BB%E6%95%B0%E9%87%8F"><span class="nav-number">11.7.3.</span> <span class="nav-text">åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»æ•°é‡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%E5%85%A8%E9%80%89%E6%8C%89%E9%92%AE%E7%9A%84%E9%80%89%E4%B8%AD%E7%8A%B6%E6%80%81"><span class="nav-number">11.7.4.</span> <span class="nav-text">åŠ¨æ€æ¸²æŸ“å…¨é€‰æŒ‰é’®çš„é€‰ä¸­çŠ¶æ€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E5%95%86%E5%93%81%E7%9A%84%E5%85%A8%E9%80%89-%E5%8F%8D%E9%80%89%E5%8A%9F%E8%83%BD"><span class="nav-number">11.7.5.</span> <span class="nav-text">å®ç°å•†å“çš„å…¨é€‰&#x2F;åé€‰åŠŸèƒ½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93%E5%B7%B2%E5%8B%BE%E9%80%89%E5%95%86%E5%93%81%E7%9A%84%E6%80%BB%E4%BB%B7%E6%A0%BC"><span class="nav-number">11.7.6.</span> <span class="nav-text">åŠ¨æ€æ¸²æŸ“å·²å‹¾é€‰å•†å“çš„æ€»ä»·æ ¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E8%B4%AD%E7%89%A9%E8%BD%A6%E4%B8%BA%E7%A9%BA%E6%97%B6%E7%9A%84%E9%A1%B5%E9%9D%A2%E7%BB%93%E6%9E%84"><span class="nav-number">11.7.7.</span> <span class="nav-text">æ¸²æŸ“è´­ç‰©è½¦ä¸ºç©ºæ—¶çš„é¡µé¢ç»“æ„</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E5%92%8C%E6%94%AF%E4%BB%98"><span class="nav-number">12.</span> <span class="nav-text">ç™»å½•å’Œæ”¯ä»˜</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%94%AF%E4%BB%98%E6%BC%94%E7%A4%BA"><span class="nav-number">12.1.</span> <span class="nav-text">ç™»å½•æ”¯ä»˜æ¼”ç¤º</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90%E6%80%BB%E7%BB%93-2"><span class="nav-number">12.2.</span> <span class="nav-text">éœ€æ±‚åˆ†ææ€»ç»“</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E7%BB%93%E7%AE%97%E6%8C%89%E9%92%AE%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">12.3.</span> <span class="nav-text">ç‚¹å‡»ç»“ç®—æŒ‰é’®åŠŸèƒ½å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%99%BB%E5%BD%95%E5%92%8C%E4%B8%AA%E4%BA%BA%E4%BF%A1%E6%81%AF%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="nav-number">12.4.</span> <span class="nav-text">åˆ›å»ºç™»å½•å’Œä¸ªäººä¿¡æ¯è‡ªå®šä¹‰ç»„ä»¶</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89-my-%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%BC%96%E8%AF%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">12.4.1.</span> <span class="nav-text">å®šä¹‰ my é¡µé¢çš„ç¼–è¯‘æ¨¡å¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%99%BB%E5%BD%95%E5%92%8C%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E7%BB%84%E4%BB%B6%EF%BC%8C%E5%B9%B6%E5%AE%9E%E7%8E%B0%E6%A0%B9%E6%8D%AE%E6%98%AF%E5%90%A6%E7%99%BB%E5%BD%95%E7%9A%84%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="nav-number">12.4.2.</span> <span class="nav-text">åˆ›å»ºç™»å½•å’Œç”¨æˆ·ä¿¡æ¯ç»„ä»¶ï¼Œå¹¶å®ç°æ ¹æ®æ˜¯å¦ç™»å½•çš„æ¡ä»¶æ¸²æŸ“</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6%E5%B8%83%E5%B1%80"><span class="nav-number">12.5.</span> <span class="nav-text">ç™»å½•ç»„ä»¶å¸ƒå±€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">12.6.</span> <span class="nav-text">ç™»å½•åŠŸèƒ½å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E7%99%BB%E5%BD%95%E6%8C%89%E9%92%AE%E8%8E%B7%E5%8F%96%E5%BE%AE%E4%BF%A1%E7%94%A8%E6%88%B7%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="nav-number">12.6.1.</span> <span class="nav-text">ç‚¹å‡»ç™»å½•æŒ‰é’®è·å–å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98%E5%BE%AE%E4%BF%A1%E7%94%A8%E6%88%B7%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E5%88%B0-vuex-%E4%B8%AD"><span class="nav-number">12.6.2.</span> <span class="nav-text">ä¿å­˜å¾®ä¿¡ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯åˆ° vuex ä¸­</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-Token-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-number">12.7.</span> <span class="nav-text">è·å– Token å­—ç¬¦ä¸²</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%9D%E5%AD%98-Token-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%B0-vuex-%E4%B8%AD"><span class="nav-number">12.8.</span> <span class="nav-text">ä¿å­˜ Token å­—ç¬¦ä¸²åˆ° vuex ä¸­</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E7%BB%84%E4%BB%B6-%E5%A4%B4%E5%83%8F%E6%98%B5%E7%A7%B0%E5%8C%BA%E5%9F%9F%E5%B8%83%E5%B1%80%E5%92%8C%E6%95%B0%E6%8D%AE%E6%B8%B2%E6%9F%93"><span class="nav-number">12.9.</span> <span class="nav-text">ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-å¤´åƒæ˜µç§°åŒºåŸŸå¸ƒå±€å’Œæ•°æ®æ¸²æŸ“</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E7%94%A8%E6%88%B7%E5%A4%B4%E5%83%8F%E6%98%B5%E7%A7%B0%E5%8C%BA%E5%9F%9F%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%B8%83%E5%B1%80"><span class="nav-number">12.9.1.</span> <span class="nav-text">å®ç°ç”¨æˆ·å¤´åƒæ˜µç§°åŒºåŸŸçš„åŸºæœ¬å¸ƒå±€</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E7%94%A8%E6%88%B7%E7%9A%84%E5%A4%B4%E5%83%8F%E5%92%8C%E6%98%B5%E7%A7%B0"><span class="nav-number">12.9.2.</span> <span class="nav-text">æ¸²æŸ“ç”¨æˆ·çš„å¤´åƒå’Œæ˜µç§°</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E7%BB%84%E4%BB%B6-%E5%8A%9F%E8%83%BD%E9%9D%A2%E6%9D%BF%E5%8C%BA%E5%9F%9F%E5%B8%83%E5%B1%80"><span class="nav-number">12.10.</span> <span class="nav-text">ç”¨æˆ·ä¿¡æ¯ç»„ä»¶-åŠŸèƒ½é¢æ¿åŒºåŸŸå¸ƒå±€</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%9D%A2%E6%9D%BF%E5%8C%BA%E5%9F%9F"><span class="nav-number">12.10.1.</span> <span class="nav-text">æ¸²æŸ“ç¬¬ä¸€ä¸ªé¢æ¿åŒºåŸŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E7%AC%AC%E4%BA%8C%E4%B8%AA%E9%9D%A2%E6%9D%BF%E5%8C%BA%E5%9F%9F"><span class="nav-number">12.10.2.</span> <span class="nav-text">æ¸²æŸ“ç¬¬äºŒä¸ªé¢æ¿åŒºåŸŸ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B2%E6%9F%93%E7%AC%AC%E4%B8%89%E4%B8%AA%E9%9D%A2%E6%9D%BF%E5%8C%BA%E5%9F%9F"><span class="nav-number">12.10.3.</span> <span class="nav-text">æ¸²æŸ“ç¬¬ä¸‰ä¸ªé¢æ¿åŒºåŸŸ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-number">12.11.</span> <span class="nav-text">é€€å‡ºç™»å½•åŠŸèƒ½å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E7%A7%92%E5%90%8E%E8%87%AA%E5%8A%A8%E8%B7%B3%E8%BD%AC%E5%88%B0%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2"><span class="nav-number">12.12.</span> <span class="nav-text">ä¸‰ç§’åè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%E8%87%AA%E5%8A%A8%E8%BF%94%E5%9B%9E%E4%B9%8B%E5%89%8D%E7%9A%84%E9%A1%B5%E9%9D%A2"><span class="nav-number">12.13.</span> <span class="nav-text">ç™»å½•æˆåŠŸä¹‹åè‡ªåŠ¨è¿”å›ä¹‹å‰çš„é¡µé¢</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E7%94%A8%E6%94%AF%E4%BB%98%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">12.14.</span> <span class="nav-text">è°ƒç”¨æ”¯ä»˜å‡†å¤‡å·¥ä½œ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E8%AF%B7%E6%B1%82%E5%A4%B4%E4%B8%AD%E6%B7%BB%E5%8A%A0-Token-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E8%AF%81%E7%9A%84%E5%AD%97%E6%AE%B5"><span class="nav-number">12.14.1.</span> <span class="nav-text">åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ  Token èº«ä»½è®¤è¯çš„å­—æ®µ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E7%9A%84%E6%B5%81%E7%A8%8B"><span class="nav-number">12.14.2.</span> <span class="nav-text">å¾®ä¿¡æ”¯ä»˜çš„æµç¨‹</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%AE%A2%E5%8D%95"><span class="nav-number">12.15.</span> <span class="nav-text">åˆ›å»ºè®¢å•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A2%E5%8D%95%E9%A2%84%E6%94%AF%E4%BB%98"><span class="nav-number">12.16.</span> <span class="nav-text">è®¢å•é¢„æ”¯ä»˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E8%B5%B7%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98"><span class="nav-number">12.17.</span> <span class="nav-text">å‘èµ·å¾®ä¿¡æ”¯ä»˜</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%91%E5%B8%83%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="nav-number">13.</span> <span class="nav-text">å‘å¸ƒå°ç¨‹åº</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ifer"
      src="/images/49337922.png">
  <p class="site-author-name" itemprop="name">Ifer</p>
  <div class="site-description" itemprop="description">React å…¨å®¶æ¡¶ <span style='position:relative;top:-2px;'>âœ</span></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">92</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://www.bilibili.com/video/BV1iW4y1k7Ci?spm_id_from=333.337.search-card.all.click" title="ğŸ˜š â†’ https:&#x2F;&#x2F;www.bilibili.com&#x2F;video&#x2F;BV1iW4y1k7Ci?spm_id_from&#x3D;333.337.search-card.all.click" rel="noopener" target="_blank"><i class="a fa-fw"></i>ğŸ˜š</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.zhihu.com/people/weixiantx" title="ğŸ˜™ â†’ https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;weixiantx" rel="noopener" target="_blank"><i class="a fa-fw"></i>ğŸ˜™</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ifer</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
